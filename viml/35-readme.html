<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-vim-go" class="anchor" href="#vim-go" aria-hidden="true"><span class="octicon octicon-link"></span></a>vim-go</h1>

<p>Go (golang) support for Vim. Contains official misc/vim files. vim-go installs
automatically all necessary binaries for providing seamless Vim integration.
It comes with pre-defined sensible settings (like auto gofmt on save), has
autocomplete, snippet support, improved syntax highlighting, go toolchain
commands, etc... It's highly customizable and each individual feature can be
disabled/enabled easily.</p>

<p><a href="https://camo.githubusercontent.com/1cce115feed8b777513474ecad86e45872203e0a/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f3137343430342f76696d2d676f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/1cce115feed8b777513474ecad86e45872203e0a/68747470733a2f2f646c2e64726f70626f7875736572636f6e74656e742e636f6d2f752f3137343430342f76696d2d676f2e706e67" alt="vim-go" data-canonical-src="https://dl.dropboxusercontent.com/u/174404/vim-go.png" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul class="task-list">
<li>Improved Syntax highlighting, such as Functions, Operators, Methods..</li>
<li>Auto completion support via <code>gocode</code>
</li>
<li>Better <code>gofmt</code> on save, keeps cursor position and doesn't break your undo
history</li>
<li>Go to symbol/declaration with <code>godef</code>
</li>
<li>Look up documentation with <code>godoc</code> inside Vim or open it in browser.</li>
<li>Automatically import packages via <code>goimports</code>
</li>
<li>Compile and <code>go build</code> your package, install it with <code>go install</code>
</li>
<li>
<code>go run</code> quickly your current file/files</li>
<li>Run <code>go test</code> and see any errors in quickfix window</li>
<li>Create a coverage profile and display annotated source code in browser to see
which functions are covered.</li>
<li>Lint your code with <code>golint</code>
</li>
<li>Run your code through <code>go vet</code> to catch static errors.</li>
<li>Advanced source analysis tool with <code>oracle</code>
</li>
<li>List all source files and dependencies</li>
<li>Checking with <code>errcheck</code> for unchecked errors.</li>
<li>Integrated and improved snippets. Supports <code>ultisnips</code> or <code>neosnippet</code>
</li>
<li>Share your current code to <a href="http://play.golang.org">play.golang.org</a>
</li>
<li>On-the-fly type information about the word under the cursor</li>
<li>Tagbar support to show tags of the source code in a sidebar with <code>gotags</code>
</li>
</ul><h2>
<a name="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<p>If you use pathogen, just clone it into your bundle directory:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span><span class="nb">cd</span> ~/.vim/bundle
<span class="nv">$ </span>git clone https://github.com/fatih/vim-go.git
</pre></div>

<p>For Vundle add this line to your vimrc:</p>

<pre lang="vimrc"><code>Plugin 'fatih/vim-go'
</code></pre>

<p>and execute <code>:PluginInstall</code> (or <code>:BundleInstall</code> for older versions of Vundle)</p>

<p>For the first Vim start it will try to download and install all necessary go
binaries. It requires <code>git</code> and <code>hg</code> for fetching the individual Go packages.
This can take some time. To disable this behaviour add <code>let g:go_disable_autoinstall = 1</code>.
Do not use it with other Go plugins.</p>

<h3>
<a name="user-content-optional" class="anchor" href="#optional" aria-hidden="true"><span class="octicon octicon-link"></span></a>Optional</h3>

<ul class="task-list">
<li>Autocompletion is enabled by default via <code>&lt;C-x&gt;&lt;C-o&gt;</code>, to get real-time
completion (completion by type) install:
<a href="https://github.com/Valloric/YouCompleteMe">YCM</a> or
<a href="https://github.com/Shougo/neocomplete.vim">neocomplete</a>.</li>
<li>To get displayed source code tag informations on a sidebar install
<a href="https://github.com/majutsushi/tagbar">tagbar</a>.</li>
<li>For snippet feature install:
<a href="https://github.com/SirVer/ultisnips">ultisnips</a> or
<a href="https://github.com/Shougo/neosnippet.vim">neosnippet</a>.</li>
<li>Screenshot color scheme is a slightly modified molokai: <a href="https://github.com/fatih/molokai">fatih/molokai</a>.</li>
</ul><h2>
<a name="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>All <a href="#features">features</a> are enabled by default. There are no additional
settings needed.  Usage and commands are listed in <code>doc/vim-go.txt</code>. Just open
the help page to see all commands:</p>

<pre><code>:help vim-go
</code></pre>

<h2>
<a name="user-content-mappings" class="anchor" href="#mappings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mappings</h2>

<p>vim-go has several <code>&lt;Plug&gt;</code> mappings which can be used to create custom
mappings. Below are some examples you might find useful:</p>

<p>Show type info for the word under your cursor with <code>&lt;leader&gt;i</code> (useful if you
have disabled auto showing type info via <code>g:go_auto_type_info</code>)</p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span><span class="k">i</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>info<span class="p">)</span>
</pre></div>

<p>Open the relevant Godoc for the word under the cursor with <code>&lt;leader&gt;gd</code> or open
it vertically with <code>&lt;leader&gt;gv</code></p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span><span class="nb">gd</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>doc<span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span>gv <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>doc<span class="p">-</span><span class="k">vertical</span><span class="p">)</span>
</pre></div>

<p>Or open the Godoc in browser</p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span>gb <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>doc<span class="p">-</span>browser<span class="p">)</span>
</pre></div>

<p>Run commands, such as  <code>go run</code> with <code>&lt;leader&gt;r</code> for the current file or <code>go
build</code> and <code>go test</code> for the current package with <code>&lt;leader&gt;b</code> and <code>&lt;leader&gt;t</code>.
Display a beautiful annotated source code to see which functions are covered
with <code>&lt;leader&gt;c</code>.</p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">r</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>run<span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">b</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>build<span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">t</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>test<span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>leader<span class="p">&gt;</span><span class="k">c</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span>coverage<span class="p">)</span>
</pre></div>

<p>Replace <code>gd</code> (Goto Declaration) for the word under your cursor (replaces current buffer):</p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="nb">gd</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span><span class="nb">def</span><span class="p">)</span>
</pre></div>

<p>Or open the definition/declaration in a new vertical, horizontal or tab for the
word under your cursor:</p>

<div class="highlight highlight-vim"><pre><span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span><span class="k">ds</span> <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span><span class="nb">def</span><span class="p">-</span>split<span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span>dv <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span><span class="nb">def</span><span class="p">-</span><span class="k">vertical</span><span class="p">)</span>
<span class="k">au</span> <span class="nb">FileType</span> <span class="k">go</span> nmap <span class="p">&lt;</span>Leader<span class="p">&gt;</span>dt <span class="p">&lt;</span>Plug<span class="p">&gt;(</span><span class="k">go</span><span class="p">-</span><span class="nb">def</span><span class="p">-</span><span class="k">tab</span><span class="p">)</span>
</pre></div>

<p>More <code>&lt;Plug&gt;</code> mappings can be seen with <code>:he go-mappings</code>. Also these are just
recommendations, you are free to create more advanced mappings or functions
based on <code>:he go-commands</code>.</p>

<h2>
<a name="user-content-settings" class="anchor" href="#settings" aria-hidden="true"><span class="octicon octicon-link"></span></a>Settings</h2>

<p>Below are some settings you might find useful. For the full list see <code>:he go-settings</code>.</p>

<p>Disable opening browser after posting to your snippet to <code>play.golang.org</code>:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_play_open_browser <span class="p">=</span> <span class="m">0</span>
</pre></div>

<p>By default vim-go shows errors for the fmt command, to disable it:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_fmt_fail_silently <span class="p">=</span> <span class="m">1</span>
</pre></div>

<p>Disable auto fmt on save:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_fmt_autosave <span class="p">=</span> <span class="m">0</span>
</pre></div>

<p>Disable goimports and use gofmt for the fmt command:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_fmt_command <span class="p">=</span> <span class="s2">"gofmt"</span>
</pre></div>

<p>By default binaries are installed to <code>$HOME/.vim-go/</code>. To change it:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_bin_path <span class="p">=</span> expand<span class="p">(</span><span class="s2">"~/.mypath"</span><span class="p">)</span>
<span class="k">let</span> <span class="k">g</span>:go_bin_path <span class="p">=</span> <span class="s2">"/home/fatih/.mypath"</span>      <span class="c">"or give absolute path</span>
</pre></div>

<p>Change individual binary paths, if the binary doesn't exist vim-go will
download and install it to <code>g:go_bin_path</code></p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_gocode_bin<span class="p">=</span><span class="s2">"~/your/custom/gocode/path"</span>
<span class="k">let</span> <span class="k">g</span>:go_goimports_bin<span class="p">=</span><span class="s2">"~/your/custom/goimports/path"</span>
<span class="k">let</span> <span class="k">g</span>:go_godef_bin<span class="p">=</span><span class="s2">"~/your/custom/godef/path"</span>
<span class="k">let</span> <span class="k">g</span>:go_oracle_bin<span class="p">=</span><span class="s2">"~/your/custom/godef/path"</span>
<span class="k">let</span> <span class="k">g</span>:go_golint_bin<span class="p">=</span><span class="s2">"~/your/custom/golint/path"</span>
<span class="k">let</span> <span class="k">g</span>:go_errcheck_bin<span class="p">=</span><span class="s2">"~/your/custom/errcheck/path"</span>
</pre></div>

<p>If you wish you can disable auto installation of binaries completely.</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_disable_autoinstall <span class="p">=</span> <span class="m">1</span>
</pre></div>

<h2>
<a name="user-content-snippets" class="anchor" href="#snippets" aria-hidden="true"><span class="octicon octicon-link"></span></a>Snippets</h2>

<p>Snippets are useful and very powerful. By default ultisnips is
used, however you can change it to neosnippet with:</p>

<div class="highlight highlight-vim"><pre><span class="k">let</span> <span class="k">g</span>:go_snippet_engine <span class="p">=</span> <span class="s2">"neosnippet"</span>
</pre></div>

<p>Snippet feature is enabled only if the snippet plugins are installed.  Below are
some examples snippets and the corresponding trigger keywords, The <code>|</code>
character defines the cursor. Ultisnips has support for multiple cursors</p>

<p><code>ff</code> is useful for debugging:</p>

<div class="highlight highlight-go"><pre><span class="nx">fmt</span><span class="p">.</span><span class="nx">Printf</span><span class="p">(</span><span class="s">" | %+v\n"</span><span class="p">,</span> <span class="p">|)</span>
</pre></div>

<p><code>errn</code> expands to:</p>

<div class="highlight highlight-go"><pre><span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">err</span>
<span class="p">}</span>
</pre></div>

<p>Use <code>gof</code> to quickly create a anonymous goroutine :</p>

<div class="highlight highlight-go"><pre><span class="k">go</span> <span class="kd">func</span><span class="p">()</span> <span class="p">{</span>
    <span class="p">|</span>
<span class="p">}()</span>
</pre></div>

<p>To add <code>json</code> tags to a struct field, use <code>json</code> trigger:</p>

<pre><code>type foo struct {
    bar string  `json:"myField"
           ^ type `json` here, hit tab and type "myField". It will expand to `json:"myField"`
}
</code></pre>

<p>...</p>

<p>And many more! For the full list have a look at the
<a href="https://github.com/fatih/vim-go/blob/master/gosnippets/">included snippets</a>:</p>

<h2>
<a name="user-content-troubleshooting" class="anchor" href="#troubleshooting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Troubleshooting</h2>

<h3>
<a name="user-content-im-using-fish-shell-but-have-some-problems-using-vim-go" class="anchor" href="#im-using-fish-shell-but-have-some-problems-using-vim-go" aria-hidden="true"><span class="octicon octicon-link"></span></a>I'm using Fish shell but have some problems using Vim-go</h3>

<p>First environment variables in Fish are applied differently, it should be like:</p>

<pre><code>set -x GOPATH /your/own/gopath
</code></pre>

<p>Second, Vim needs a POSIX compatible shell (more info here:
<a href="https://github.com/dag/vim-fish#teach-a-vim-to-fish">https://github.com/dag/vim-fish#teach-a-vim-to-fish</a>). If you use Fish to open
vim, it will make certainx shell based commands fail (means vim-go will fail
too). To overcome this problem change the default shell by adding the following
into your .vimrc (on the top of the file):</p>

<pre><code>if $SHELL =~ 'fish'
  set shell='/bin/sh'
endif
</code></pre>

<p>or</p>

<pre><code>set shell='/bin/sh'
</code></pre>

<h3>
<a name="user-content-im-seeing-weirds-errors-during-the-startup" class="anchor" href="#im-seeing-weirds-errors-during-the-startup" aria-hidden="true"><span class="octicon octicon-link"></span></a>I'm seeing weirds errors during the startup</h3>

<p>If you see errors like this:</p>

<pre><code>Installing code.google.com/p/go.tools/cmd/goimports Error installing code.google.com/p/go.tools/cmd/goimports:
Installing code.google.com/p/rog-go/exp/cmd/godef Error installing code.google.com/p/rog-go/exp/cmd/godef:
</code></pre>

<p>that means your local Go setup is broken or the remote website is down.  For
example sometimes code.google.com times out. To test, just execute a simple go
get:</p>

<pre><code>go get code.google.com/p/go.tools/cmd/goimports
</code></pre>

<p>You'll see a more detailed error. If this works, vim-go will work too.</p>

<h2>
<a name="user-content-why-another-plugin" class="anchor" href="#why-another-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why another plugin?</h2>

<p>This plugin/package is born mainly from frustration. I had to re-install my Vim
plugins and especially for Go I had to install a lot of separate different
plugins, setup the necessary binaries to make them work together and hope not
to lose them again. Lots of plugins out there lack proper settings.
This plugin is improved and contains all my fixes/changes that I'm using for
months under heavy go development environment.</p>

<p>Give it a try. I hope you like it. Feel free to contribute to the project.</p>

<h2>
<a name="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul class="task-list">
<li>Go Authors for official vim plugins</li>
<li>Gocode, Godef, Golint, Oracle, Goimports, Gotags, Errcheck projects and authors of those projects.</li>
<li>Other vim-plugins, thanks for inspiration (vim-golang, go.vim, vim-gocode, vim-godef)</li>
</ul></article></div>
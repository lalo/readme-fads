<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-haskellstarter-" class="anchor" href="#haskellstarter-" aria-hidden="true"><span class="octicon octicon-link"></span></a>HaskellStarter <a href="https://travis-ci.org/joshcough/HaskellStarter"><img src="https://camo.githubusercontent.com/e6e008eb27c4d8c0cdc9552a6af5e13de79d4879/68747470733a2f2f7472617669732d63692e6f72672f6a6f7368636f7567682f4861736b656c6c537461727465722e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://travis-ci.org/joshcough/HaskellStarter.png?branch=master" style="max-width:100%;"></a>
</h1>

<p>This project demonstrates how to set up your own real Haskell project, and helps you get a feel for the Haskell ecosystem. Currently, teaching Haskell is <em>not</em> a goal of this project, but it may in the future. As for now, basic knowledge of Haskell is assumed, and this project is aimed at people who want to build a real program or library in Haskell.</p>

<ul class="task-list">
<li><a href="#getting-started-with-this-project">Getting started with this project</a></li>
<li>
<a href="#prerequisites">Prerequisites</a>

<ul class="task-list">
<li><a href="#ghci">ghci – Haskell interpreter</a></li>
</ul>
</li>
<li><a href="#hoogle">Hoogle – Finding functions, libraries and documentation</a></li>
<li>
<a href="#cabal">Cabal – The Haskell build tool</a>

<ul class="task-list">
<li><a href="#getting-started-with-cabal">Getting Started with Cabal</a></li>
<li><a href="#cabal-file-header">Cabal file header</a></li>
</ul>
</li>
<li>
<a href="#creating-a-library">Libraries</a>

<ul class="task-list">
<li><a href="#creating-a-library">Modules</a></li>
<li><a href="#configuring-the-library-in-cabal">Configuration</a></li>
<li><a href="#using-the-library-with-ghci">Using the Library with ghci</a></li>
<li><a href="#building-and-installing-your-library">Building and Installing your Library</a></li>
</ul>
</li>
<li><a href="#haddock">Haddock – Haskell documentation</a></li>
<li><a href="#understanding-dependencies">Dependencies</a></li>
<li>
<a href="#executables">Executables</a>

<ul class="task-list">
<li><a href="#configuring-an-executable-in-cabal">Configuring an executable</a></li>
<li><a href="#installing-and-running-executables">Installing and Running Executables</a></li>
</ul>
</li>
<li>
<a href="#tests">Tests</a>

<ul class="task-list">
<li><a href="#hunit">Unit tests with HUnit</a></li>
<li><a href="#quickcheck">Properties with QuickCheck</a></li>
<li><a href="#test-framework">test-framework</a></li>
<li><a href="#configuring-a-test-suite-in-cabal">Configuring a test suite</a></li>
<li><a href="#running-tests">Running Tests</a></li>
<li><a href="#doctest">doctests</a></li>
</ul>
</li>
<li><a href="#travis">Travis – Building your project on git each commit</a></li>
<li><a href="#publishing-your-library">Publishing your library</a></li>
<li><a href="#further-reading">Further Reading</a></li>
<li><a href="#todo">TODO</a></li>
</ul><h2>
<a name="user-content-getting-started-with-this-project" class="anchor" href="#getting-started-with-this-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started with this project</h2>

<p>The best way to get started with this project is to simply clone it, and poke around.</p>

<p><code>git clone https://github.com/joshcough/HaskellStarter.git</code></p>

<p>Here are the contents of the project:</p>

<pre><code>$ tree -a -I .git
.
├── .gitignore
├── .travis.yml
├── LICENSE
├── README.md
├── Setup.hs
├── executables
│   └── Main.hs
├── haskell-starter.cabal
├── src
│   └── HaskellStarter
│       ├── CommitPrinter.hs
│       └── Util.hs
├── test
│   ├── DocTest.hs
│   ├── Main.hs
│   ├── Properties.hs
│   └── UnitTests.hs
└── travis
    ├── cabal-apt-install
    └── config

5 directories, 15 files
</code></pre>

<p>Some valuable commands to play with (all of which will be explained) are:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal --help
<span class="nv">$ </span>cabal update
<span class="nv">$ </span>cabal init
<span class="nv">$ </span>cabal install github
<span class="nv">$ </span>cabal build
<span class="nv">$ </span>cabal <span class="nb">test</span>
<span class="nv">$ </span>cabal repl
<span class="nv">$ </span>cabal install
</pre></div>

<h2>
<a name="user-content-prerequisites" class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites</h2>

<p>As stated, this project assumes some basic knowledge of Haskell. If you don't have that, I recommend <a href="http://learnyouahaskell.com/">Learn You a Haskell for Great Good!</a>. Also, if you haven't already, go install the <a href="http://www.haskell.org/platform/">Haskell Platform</a>. </p>

<h3>
<a name="user-content-ghci" class="anchor" href="#ghci" aria-hidden="true"><span class="octicon octicon-link"></span></a>ghci</h3>

<p>In order to have some basic knowledge of Haskell, it's highly likely that you've played with ghci, but a refresher still helps. </p>

<p>ghci is a simple way to get started playing with Haskell, and is essential for testing out functions and types during development.</p>

<p>Run ghci at the command line by simply typing ghci:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>ghci
</pre></div>

<p>Input expressions</p>

<div class="highlight highlight-haskell"><pre><span class="nf">prelude</span><span class="o">&gt;</span> <span class="mi">5</span> <span class="o">+</span> <span class="mi">5</span>
<span class="mi">10</span>
<span class="nf">prelude</span><span class="o">&gt;</span> <span class="kr">let</span> <span class="n">x</span> <span class="ow">=</span> <span class="mi">10</span>
<span class="nf">prelude</span><span class="o">&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
<span class="mi">20</span>
</pre></div>

<p>Get types with :t</p>

<div class="highlight highlight-haskell"><pre><span class="nf">prelude</span><span class="o">&gt;</span> <span class="kt">:</span><span class="n">t</span> <span class="n">x</span>
<span class="nf">x</span> <span class="ow">::</span> <span class="kt">Num</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="n">a</span>
<span class="nf">prelude</span><span class="o">&gt;</span> <span class="kr">let</span> <span class="n">x</span> <span class="ow">=</span> <span class="mi">7</span> <span class="ow">::</span> <span class="kt">Int</span>
<span class="nf">prelude</span><span class="o">&gt;</span> <span class="kt">:</span><span class="n">t</span> <span class="n">x</span> <span class="o">+</span> <span class="n">x</span>
<span class="nf">x</span> <span class="o">+</span> <span class="n">x</span> <span class="ow">::</span> <span class="kt">Int</span>
</pre></div>

<p>Load files with :load</p>

<div class="highlight highlight-haskell"><pre><span class="nf">prelude</span><span class="o">&gt;</span> <span class="kt">:</span><span class="n">load</span> <span class="kt">Goop</span>
<span class="o">*</span><span class="kt">Goop</span><span class="o">&gt;</span> <span class="c1">--now run some expressions in Goop</span>
</pre></div>

<p>Quit ghci</p>

<div class="highlight highlight-haskell"><pre><span class="nf">prelude</span><span class="o">&gt;</span> <span class="o">^</span><span class="n">d</span>
</pre></div>

<h2>
<a name="user-content-hoogle" class="anchor" href="#hoogle" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hoogle</h2>

<p><a href="http://www.haskell.org/hoogle/">Hoogle</a> is the go to place for finding: </p>

<ul class="task-list">
<li>Functions</li>
<li>Libraries</li>
<li>Documentation</li>
<li>Links to source code</li>
<li>etc...</li>
</ul><p>Maybe we want to write a library that does some fun stuff with the Github API (<a href="http://developer.github.com/v3/">http://developer.github.com/v3/</a>). Let's go search Hoogle to see if there is anything already there to help us:</p>

<p><a href="https://lmddgtfy.net/?q=!hoogle%20github">https://lmddgtfy.net/?q=!hoogle%20github</a></p>

<p>Yay, we've discovered a Github package — <a href="http://hackage.haskell.org/package/github">http://hackage.haskell.org/package/github</a>, complete with everything listed above. Poke around and find out more. After you're done poking, you should install the package:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal install github
</pre></div>

<h2>
<a name="user-content-cabal" class="anchor" href="#cabal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cabal</h2>

<p>While ghci is useful for playing with Haskell code, it doesn't enable you to build libraries and programs. Cabal (Common Architecture for Building Applications and Libraries) is installed with the Haskell Platform, and is the canonical tool for building Haskell code. This section explains using Cabal, but where it lacks, you can get more info at: <a href="http://www.haskell.org/cabal/">http://www.haskell.org/cabal/</a>.</p>

<h3>
<a name="user-content-getting-started-with-cabal" class="anchor" href="#getting-started-with-cabal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started with Cabal</h3>

<p>A few helpful commands for getting started with Cabal:</p>

<ul class="task-list">
<li>
<code>cabal --help</code> shows you all the Cabal commands. Highly recommended.</li>
<li>
<code>cabal update</code> updates Cabal so that it has all of the latest package information.</li>
<li>
<code>cabal init</code> runs you through a series of questions to start a new project.</li>
<li>
<code>cabal build</code> builds your project locally (into the <code>dist</code> directory).</li>
<li>
<code>cabal test</code> builds your project and then runs all of your tests.</li>
<li>
<code>cabal repl</code> runs GHCI with your project already loaded.</li>
<li>
<code>cabal install</code> installs a package.

<ul class="task-list">
<li>Given zero arguments, it will install your package.</li>
<li>Given any number of library arguments (like <code>cabal install github</code> which was used above), it will download those libraries from hackage, build, and install them.</li>
<li>Given <code>--only-dependencies</code>, it will install all your package's dependencies.  This is the recommended way to install new libraries to a project, as it will choose a version to install that is compatible with your other dependencies.</li>
</ul>
</li>
</ul><p>This project is a working Cabal project, and this document explains the Cabal configuration, which is in <code>haskellstarter.cabal</code>. Let's get started by taking a quick peek at it, and we'll create a Haskell library.</p>

<h3>
<a name="user-content-cabal-file-header" class="anchor" href="#cabal-file-header" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cabal file header</h3>

<pre><code>name:                haskell-starter
version:             0.1.0.0
synopsis:            A demo for getting a project started in Haskell.
homepage:            https://github.com/joshcough/HaskellStarter
license:             MIT
license-file:        LICENSE
author:              Josh Cough
maintainer:          joshcough@gmail.com
category:            Demo
build-type:          Simple
cabal-version:       &gt;=1.8

source-repository head
  type: git
    location: git@github.com:joshcough/HaskellStarter.git
</code></pre>

<p>Most of these fields are self explanatory, and are mostly for documentation, and only a couple of them are required. More information on what each of these fields means and which ones are required can be found at <a href="http://www.haskell.org/cabal/users-guide/developing-packages.html">http://www.haskell.org/cabal/users-guide/developing-packages.html</a>.</p>

<h2>
<a name="user-content-creating-a-library" class="anchor" href="#creating-a-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a Library</h2>

<h3>
<a name="user-content-modules" class="anchor" href="#modules" aria-hidden="true"><span class="octicon octicon-link"></span></a>Modules</h3>

<p>In order to have a library, we need some code. <img class="emoji" title=":smile:" alt=":smile:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f604.png" height="20" width="20" align="absmiddle"> I usually put my code in a directory called <code>src</code>, but any directory name you want is fine (<a href="#configuring-the-library-in-cabal">provided it is configured</a>). In this project we have two modules, <code>HaskellStarter.Util</code>, which just contains some simple utility functions, and <code>HaskellStarter.CommitPrinter</code> which uses the github library previously mentioned to print commits for a repo. </p>

<p>Let's take a look at <code>HaskellStarter.Util</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">HaskellStarter.Util</span> <span class="p">(</span><span class="nf">extract</span><span class="p">,</span> <span class="nf">printAll</span><span class="p">)</span> <span class="kr">where</span>

<span class="nf">extract</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Either</span> <span class="n">a</span> <span class="n">c</span> <span class="ow">-&gt;</span> <span class="n">c</span>
<span class="nf">extract</span> <span class="ow">=</span> <span class="n">either</span> <span class="p">(</span><span class="ne">error</span> <span class="o">.</span> <span class="n">show</span><span class="p">)</span> <span class="n">id</span>

<span class="nf">printAll</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">printAll</span> <span class="n">xs</span> <span class="ow">=</span> <span class="n">mapM_</span> <span class="n">print</span> <span class="n">xs</span>
</pre></div>

<p>Don't worry too much yet about what this code actually does; we'll document it shortly. </p>

<p>And <code>HaskellStarter.CommitPrinter</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">HaskellStarter.CommitPrinter</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Control.Applicative</span>
<span class="kr">import</span> <span class="nn">Github.Repos.Commits</span>
<span class="kr">import</span> <span class="nn">HaskellStarter.Util</span>

<span class="nf">getMessage</span> <span class="ow">::</span> <span class="kt">Commit</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
<span class="nf">getMessage</span> <span class="ow">=</span> <span class="n">gitCommitMessage</span> <span class="o">.</span> <span class="n">commitGitCommit</span>

<span class="nf">printCommitsFor</span> <span class="ow">::</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">printCommitsFor</span> <span class="n">user</span> <span class="n">repo</span> <span class="ow">=</span> <span class="kr">do</span>
  <span class="n">commits</span> <span class="ow">&lt;-</span> <span class="n">extract</span> <span class="o">&lt;$&gt;</span> <span class="n">commitsFor</span> <span class="n">user</span> <span class="n">repo</span>
  <span class="n">printAll</span> <span class="o">$</span> <span class="n">getMessage</span> <span class="o">&lt;$&gt;</span> <span class="n">commits</span>
</pre></div>

<p>We will document this code shortly too, but do notice that it imports <code>Github.Repos.Commits</code>, which is a module in the github library.</p>

<h3>
<a name="user-content-configuring-the-library-in-cabal" class="anchor" href="#configuring-the-library-in-cabal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring the library in Cabal</h3>

<p>A Cabal file can only have one library (but you're not required to have one). Here's the configuration for it:</p>

<pre><code>library 
  hs-source-dirs: src
  exposed-modules:
    HaskellStarter.CommitPrinter
  other-modules:
    HaskellStarter.Util
  build-depends:
    base &gt;= 4 &amp;&amp; &lt; 5, github &gt;= 0.7.4
</code></pre>

<ul class="task-list">
<li>
<code>hs-source-dirs</code> is a list of directories to find your source files in, relative to the root directory of your project. Here, we only use one, but you can also say: <code>hs-source-dirs: src1 src2 goober/joober</code>
</li>
<li>
<code>exposed-modules</code> specifies the modules in the library's public API.</li>
<li>
<code>other-modules</code> specifies modules that aren't publicly exposed, but are still part of the library.</li>
<li>
<code>build-depends</code> will be explained in the section <a href="#understanding-dependencies">Understanding Dependencies</a>, but for now, it is enough to know that this library depends on two other libraries: base, and github.</li>
</ul><p>A quick note about modules: Cabal must know about all of your modules in the library, so they must be specified in <code>exposed-modules</code> or <code>other-modules</code>. I find this good and bad — on one hand it allows you to have Haskell files in your source directory that you don't want to be compiled, on the other, it forces you to list all of your modules.</p>

<h3>
<a name="user-content-using-the-library-with-ghci" class="anchor" href="#using-the-library-with-ghci" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the Library with ghci</h3>

<p>With some code in place and the library configured, it's time to play with it. Try this out:</p>

<pre><code>$ cabal repl
</code></pre>

<p>This will bring you into ghci with all of your modules preloaded. Let's call a function:</p>

<pre><code>*HaskellStarter.CommitPrinter&gt; printCommitsFor "joshcough" "HaskellStarter"
</code></pre>

<p>Of course, this project has way too many bogus commits that just say "readme update" to actually show the output here, but it does work. Trust me.</p>

<h3>
<a name="user-content-building-and-installing-your-library" class="anchor" href="#building-and-installing-your-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building and Installing your Library</h3>

<p>Building your library is easy:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal build
</pre></div>

<p>If you want to build other projects that depend on your library, you can install it locally:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal install
</pre></div>

<h2>
<a name="user-content-haddock" class="anchor" href="#haddock" aria-hidden="true"><span class="octicon octicon-link"></span></a>Haddock</h2>

<p>Let's add some documentation to the code, and then generate pretty html from it.</p>

<p>First <code>HaskellStarter.Util</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="cm">{-|</span>
<span class="cm"> This module contains some simple utility functions.</span>
<span class="cm"> It exports two functions, extract and printAll.</span>
<span class="cm"> -}</span>
<span class="kr">module</span> <span class="nn">HaskellStarter.Util</span> <span class="p">(</span><span class="nf">extract</span><span class="p">,</span> <span class="nf">printAll</span><span class="p">)</span> <span class="kr">where</span>

<span class="cm">{-|</span>
<span class="cm">   Forcefully pull a value out of an Either.</span>
<span class="cm">   This function: </span>
<span class="cm">     * Returns the result if the Either is a Right.</span>
<span class="cm">     * Dies with an error if the Either is a Left.</span>
<span class="cm"> -}</span>
<span class="nf">extract</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Either</span> <span class="n">a</span> <span class="n">c</span> <span class="ow">-&gt;</span> <span class="n">c</span>
<span class="nf">extract</span> <span class="ow">=</span> <span class="n">either</span> <span class="p">(</span><span class="ne">error</span> <span class="o">.</span> <span class="n">show</span><span class="p">)</span> <span class="n">id</span>

<span class="cm">{-|</span>
<span class="cm">   Print a list of Strings, one per line.</span>
<span class="cm"> -}</span>
<span class="nf">printAll</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">String</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">printAll</span> <span class="n">xs</span> <span class="ow">=</span> <span class="n">mapM_</span> <span class="n">print</span> <span class="n">xs</span>
</pre></div>

<p>And <code>HaskellStarter.CommitPrinter</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="cm">{-|</span>
<span class="cm">  This module allows you to print the commits messages</span>
<span class="cm">  in a github repo.</span>
<span class="cm"> -}</span>
<span class="kr">module</span> <span class="nn">HaskellStarter.CommitPrinter</span> <span class="p">(</span><span class="nf">printCommitsFor</span><span class="p">)</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Control.Applicative</span>
<span class="kr">import</span> <span class="nn">Github.Repos.Commits</span>
<span class="kr">import</span> <span class="nn">HaskellStarter.Util</span>

<span class="cm">{-|</span>
<span class="cm">   Get the actual commit message from a Commit.</span>
<span class="cm"> -}</span>
<span class="nf">getMessage</span> <span class="ow">::</span> <span class="kt">Commit</span> <span class="ow">-&gt;</span> <span class="kt">String</span>
<span class="nf">getMessage</span> <span class="ow">=</span> <span class="n">gitCommitMessage</span> <span class="o">.</span> <span class="n">commitGitCommit</span>

<span class="cm">{-|</span>
<span class="cm">  Print all of the commits messages for a given user and repo.</span>
<span class="cm"> -}</span>
<span class="nf">printCommitsFor</span> <span class="ow">::</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">String</span> <span class="ow">-&gt;</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">printCommitsFor</span> <span class="n">user</span> <span class="n">repo</span> <span class="ow">=</span> <span class="kr">do</span>
  <span class="n">commits</span> <span class="ow">&lt;-</span> <span class="n">extract</span> <span class="o">&lt;$&gt;</span> <span class="n">commitsFor</span> <span class="n">user</span> <span class="n">repo</span>
  <span class="n">printAll</span> <span class="o">$</span> <span class="n">getMessage</span> <span class="o">&lt;$&gt;</span> <span class="n">commits</span>
</pre></div>

<p>Hopefully this documentation helps explain what the code does. If not, feel free to fix it and send me a pull request.</p>

<p>With the docs in our source code, generating pretty html from them is simple:</p>

<pre><code>$ cabal haddock
</code></pre>

<p>Which outputs this info:</p>

<pre><code>Haddock coverage:
 100% (  3 /  3) in 'HaskellStarter.Util'
 100% (  2 /  2) in 'HaskellStarter.CommitPrinter'
Documentation created: dist/doc/html/haskell-starter/index.html
</code></pre>

<p>Now, open up <code>dist/doc/html/haskell-starter/index.html</code> and see the glory. Notice that only publicly exposed modules are added to the documentation. </p>

<h2>
<a name="user-content-understanding-dependencies" class="anchor" href="#understanding-dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Understanding Dependencies</h2>

<p>TODO</p>

<h2>
<a name="user-content-executables" class="anchor" href="#executables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Executables</h2>

<p>A library is a collection of code that you can depend on, but cannot actually execute. Fortunately, you can build executables with Cabal very easily. To do this, we first need a module with a main function. Here is <code>executables/Main.hs</code> from this project:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">HaskellStarter.CommitPrinter</span>
<span class="kr">import</span> <span class="nn">System.Environment</span>

<span class="nf">main</span> <span class="ow">::</span> <span class="kt">IO</span> <span class="nb">()</span>
<span class="nf">main</span> <span class="ow">=</span> <span class="kr">do</span>
  <span class="n">args</span> <span class="ow">&lt;-</span> <span class="n">getArgs</span>
  <span class="n">printCommitsFor</span> <span class="p">(</span><span class="n">args</span> <span class="o">!!</span> <span class="mi">0</span><span class="p">)</span> <span class="p">(</span><span class="n">args</span> <span class="o">!!</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>

<p>This is a command line program that takes two arguments — a username and a project name, and prints the commits for that project.</p>

<h3>
<a name="user-content-configuring-an-executable-in-cabal" class="anchor" href="#configuring-an-executable-in-cabal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring an executable in Cabal</h3>

<p>Configuring an executable in Cabal is very simple:</p>

<pre><code>executable githubCommitPrinter
  hs-source-dirs: executables
  main-is: Main.hs
  build-depends: base &lt; 5, haskell-starter
</code></pre>

<ul class="task-list">
<li>
<code>executable githubCommitPrinter</code> starts the executable block, and names it. You may have many different executables in one Cabal file.</li>
<li>
<code>hs-source-dirs</code> is a list of directories to find source files.</li>
<li>
<code>main-is</code> specifies the Haskell file that contains the <code>main</code> function. <code>main</code> must have type <code>IO ()</code>.</li>
<li>
<code>build-depends</code> is the same as it is in the library definition. Notice here that githubCommitPrinter depends on the haskell-starter library. Cabal doesn't implicitely add your library to executables.</li>
</ul><h3>
<a name="user-content-installing-and-running-executables" class="anchor" href="#installing-and-running-executables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing and Running Executables</h3>

<p><code>cabal install</code> installs all executables in your project, as well as the library (if there is one). By default, Cabal installs executables to <code>~/.cabal/bin</code>, or <code>%appdata\cabal\bin</code> on Windows. By adding that to your <code>PATH</code>, you can run your executables immediately.</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>githubCommitPrinter joshcough HaskellStarter
</pre></div>

<h2>
<a name="user-content-tests" class="anchor" href="#tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tests</h2>

<p>In Haskell and Cabal there are a <em>lot</em> of different test libraries and frameworks, and it's difficult to choose which to use. Here, I'll explain briefly:</p>

<ul class="task-list">
<li>HUnit – a library for writing unit tests</li>
<li>QuickCheck – a library for writing properties </li>
<li>test-framework – a framework for organizing and running unit tests and properties</li>
<li>doctest – inject tests directly into your documentation</li>
</ul><h3>
<a name="user-content-hunit" class="anchor" href="#hunit" aria-hidden="true"><span class="octicon octicon-link"></span></a>HUnit</h3>

<p>HUnit is "is a unit testing framework for Haskell, similar to the JUnit tool for Java."</p>

<p>It allows you to write very simple assertions of this form:</p>

<div class="highlight highlight-Haskell"><pre><span class="nf">actual</span> <span class="o">@?=</span> <span class="n">expected</span>
</pre></div>

<p>And if actual doesn't equal expected, then you will get a test error.</p>

<p>I've written a very simple example in <code>test/UnitTests.hs</code>* that I think is very self explanatory:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">UnitTests</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Test.Framework.Providers.API</span>
<span class="kr">import</span> <span class="nn">Test.Framework.Providers.HUnit</span>
<span class="kr">import</span> <span class="nn">Test.HUnit</span>

<span class="nf">tests</span> <span class="ow">=</span> <span class="n">testGroup</span> <span class="s">"HUnit tests"</span> <span class="p">[</span>
  <span class="n">testCase</span> <span class="s">"a passing test!"</span>       <span class="o">$</span> <span class="mi">5</span> <span class="o">@?=</span> <span class="mi">5</span>
 <span class="p">,</span><span class="n">testCase</span> <span class="s">"another passing test!"</span> <span class="o">$</span> <span class="mi">6</span> <span class="o">@?=</span> <span class="mi">6</span> <span class="p">]</span>
</pre></div>

<p>*This doesn't currently import anything in the library. The reason for this is a little subtle — <code>HaskellStarter.Utils</code> is the only module with easily testable functions, but it is not exposed, so we don't have access to it! There are a couple ways around this, but the easiest is to simply expose all modules that you wish to test.</p>

<p>We will see how to run these tests shortly.</p>

<h3>
<a name="user-content-quickcheck" class="anchor" href="#quickcheck" aria-hidden="true"><span class="octicon octicon-link"></span></a>QuickCheck</h3>

<p>QuickCheck is a library for writing properties for your functions, and a framework for testing those properties with random inputs. Here is a simple example property that for all lists of integers, tests that the reverse of the reverse of that list is the equal to that list.</p>

<div class="highlight highlight-Haskell"><pre><span class="nf">prop_list_reverse_reverse</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Bool</span>
<span class="nf">prop_list_reverse_reverse</span> <span class="n">list</span> <span class="ow">=</span> <span class="n">list</span> <span class="o">==</span> <span class="n">reverse</span> <span class="p">(</span><span class="n">reverse</span> <span class="n">list</span><span class="p">)</span>
</pre></div>

<p>This property is put into a module in <code>tests/Properties.hs</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="cm">{-# LANGUAGE TemplateHaskell #-}</span>
<span class="kr">module</span> <span class="nn">Properties</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Test.Framework.Providers.QuickCheck2</span>
<span class="kr">import</span> <span class="nn">Test.Framework.TH</span>
<span class="kr">import</span> <span class="nn">Test.QuickCheck</span>

<span class="nf">prop_list_reverse_reverse</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Bool</span>
<span class="nf">prop_list_reverse_reverse</span> <span class="n">list</span> <span class="ow">=</span> <span class="n">list</span> <span class="o">==</span> <span class="n">reverse</span> <span class="p">(</span><span class="n">reverse</span> <span class="n">list</span><span class="p">)</span>

<span class="nf">prop_list_length</span> <span class="ow">::</span> <span class="p">[</span><span class="kt">Int</span><span class="p">]</span> <span class="ow">-&gt;</span> <span class="kt">Int</span> <span class="ow">-&gt;</span> <span class="kt">Bool</span>
<span class="nf">prop_list_length</span> <span class="n">list</span> <span class="n">i</span> <span class="ow">=</span> <span class="n">length</span> <span class="p">(</span><span class="n">i</span> <span class="kt">:</span> <span class="n">list</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">length</span> <span class="n">list</span>

<span class="nf">tests</span> <span class="ow">=</span> <span class="o">$</span><span class="n">testGroupGenerator</span>
</pre></div>

<p>This module has a couple of very simple properties in it (once again, unrelated to the code in the library). We will see how to run these shortly, as well.</p>

<h3>
<a name="user-content-test-framework" class="anchor" href="#test-framework" aria-hidden="true"><span class="octicon octicon-link"></span></a>test-framework</h3>

<p>Before we can run our tests, we need to package them up into a module with a main function. We do that using <a href="http://hackage.haskell.org/package/test-framework">test-framework</a>. Here are the contents of <code>test/Main.hs</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">Properties</span>
<span class="kr">import</span> <span class="nn">UnitTests</span>
<span class="kr">import</span> <span class="nn">Test.Framework.Runners.Console</span> <span class="p">(</span><span class="nf">defaultMain</span><span class="p">)</span>

<span class="nf">main</span> <span class="ow">=</span> <span class="n">defaultMain</span> <span class="o">$</span> <span class="p">[</span><span class="kt">UnitTests</span><span class="o">.</span><span class="n">tests</span><span class="p">,</span> <span class="kt">Properties</span><span class="o">.</span><span class="n">tests</span><span class="p">]</span>
</pre></div>

<p>This module provides a main function using the defaultMain function from test-framework. It takes a list of test groups as an argument, and runs all the tests in those groups. It also takes care of printing fancy messages for successes and failures.</p>

<h3>
<a name="user-content-configuring-a-test-suite-in-cabal" class="anchor" href="#configuring-a-test-suite-in-cabal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuring a test suite in Cabal</h3>

<p>Before we can run our tests, we need to configure our test suite in Cabal:</p>

<pre><code>-- configuration for Unit tests and properties
test-suite unit-tests-and-properties
  type:           exitcode-stdio-1.0
  main-is:        Main.hs
  hs-source-dirs: test
  build-depends:
    base,
    HUnit,
    QuickCheck                 &gt;= 2.4,
    test-framework             &gt;= 0.6,
    test-framework-hunit,
    test-framework-quickcheck2 &gt;= 0.2,
    test-framework-th          &gt;= 0.2
</code></pre>

<p>Don't worry too much about the details here. Just know that the tests are in the <code>test</code> directory, and <code>Main.hs</code> is in there. Hopefully soon I'll be able to provide more info here, and/or make the configuration slightly less verbose.</p>

<p>You'll need to configure with <code>cabal configure --enable-tests</code> before tests can be run.  If that fails for lack of dependencies, <code>cabal install --enable-tests --only-dependencies</code> will install them.</p>

<h4>
<a name="user-content-running-tests" class="anchor" href="#running-tests" aria-hidden="true"><span class="octicon octicon-link"></span></a>Running Tests</h4>

<p>Now that we have our test suite configured, running it is very easy:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal <span class="nb">test</span>
</pre></div>

<p>You can also pass the <code>--enable-tests</code> flag to <code>cabal install</code>, which will run all of your tests, and only install the library if all of the tests pass:</p>

<div class="highlight highlight-sh"><pre><span class="nv">$ </span>cabal install --enable-tests 
</pre></div>

<h4>
<a name="user-content-doctest" class="anchor" href="#doctest" aria-hidden="true"><span class="octicon octicon-link"></span></a>doctest</h4>

<p>"<a href="https://github.com/sol/doctest-haskell">doctest</a> is a small program, that checks examples in Haddock comments. It is similar to the popular Python module with the same name."</p>

<p>Let's add some tests into our documentation for the <code>extract</code> function in <code>HaskellStarter.Util</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="cm">{-|</span>
<span class="cm">   Forcefully pull a value out of an Either.</span>
<span class="cm">   This function: </span>
<span class="cm">     * Returns the result if the Either is a Right.</span>
<span class="cm">     * Dies with an error if the Either is a Left.</span>
<span class="cm">  &gt;&gt;&gt; extract $ Right 10</span>
<span class="cm">  10</span>
<span class="cm">  &gt;&gt;&gt; extract $ Right "hello, world"</span>
<span class="cm">  "hello, world"</span>
<span class="cm"> -}</span>
<span class="nf">extract</span> <span class="ow">::</span> <span class="kt">Show</span> <span class="n">a</span> <span class="ow">=&gt;</span> <span class="kt">Either</span> <span class="n">a</span> <span class="n">c</span> <span class="ow">-&gt;</span> <span class="n">c</span>
<span class="nf">extract</span> <span class="ow">=</span> <span class="n">either</span> <span class="p">(</span><span class="ne">error</span> <span class="o">.</span> <span class="n">show</span><span class="p">)</span> <span class="n">id</span>
</pre></div>

<p>In case it's hard to notice, I've added:</p>

<div class="highlight highlight-haskell"><pre>  <span class="o">&gt;&gt;&gt;</span> <span class="n">extract</span> <span class="o">$</span> <span class="kt">Right</span> <span class="mi">10</span>
  <span class="mi">10</span>
  <span class="o">&gt;&gt;&gt;</span> <span class="n">extract</span> <span class="o">$</span> <span class="kt">Right</span> <span class="s">"hello, world"</span>
  <span class="s">"hello, world"</span>
</pre></div>

<p>The first example says to run the extract function with <code>Right 10</code>, and expect to get back the value 10. The second is nearly identical.</p>

<p>In order to run doctests, we need to have a main function, and configure it in Cabal. </p>

<p>Here are the contents of <code>test/Doctest.hs</code>:</p>

<div class="highlight highlight-Haskell"><pre><span class="kr">module</span> <span class="nn">Main</span> <span class="kr">where</span>

<span class="kr">import</span> <span class="nn">System.FilePath.Glob</span> <span class="p">(</span><span class="nf">glob</span><span class="p">)</span>
<span class="kr">import</span> <span class="nn">Test.DocTest</span> <span class="p">(</span><span class="nf">doctest</span><span class="p">)</span>

<span class="nf">main</span> <span class="ow">=</span> <span class="n">glob</span> <span class="s">"src/**/*.hs"</span> <span class="o">&gt;&gt;=</span> <span class="n">doctest</span>
</pre></div>

<p>and here is the Cabal test suite configuration:</p>

<pre><code>test-suite doctest
  type:           exitcode-stdio-1.0
  main-is:        DocTest.hs
  hs-source-dirs: test
  build-depends:  base, doctest == 0.9.*, Glob == 0.7.*
</code></pre>

<p>All <code>test-suite</code> configurations get ran when you execute <code>cabal test</code>, so this there is nothing else additional needed.</p>

<h2>
<a name="user-content-travis" class="anchor" href="#travis" aria-hidden="true"><span class="octicon octicon-link"></span></a>Travis</h2>

<p><a href="https://travis-ci.org">Travis</a> is a service that works with Github for building your project automatically after a git push. It notifies you via email if the build fails. This project is already set up to use Travis, and technically all you need to do that is have a <code>.travis.yml</code> file in the root of your project with these contents:</p>

<div class="highlight highlight-YAML"><pre><span class="l-Scalar-Plain">language</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">haskell</span>
<span class="l-Scalar-Plain">script</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">cabal install --enable-tests</span>
</pre></div>

<p>To enable your GitHub repo to build on Travis: setup a Travis account, go to <a href="https://travis-ci.org/profile">https://travis-ci.org/profile</a>, find the repo you want to build, and simply flip the switch from Off to On. That's it.</p>

<p>The version in this project is slightly more complicated in order to allow the Travis build to pull dependencies even what Hackage is down. You shouldn't really need to worry about understanding those changes though, but if you're curious, check out <code>.travis.yml</code> and the <code>travis</code> directory.</p>

<h2>
<a name="user-content-publishing-your-library" class="anchor" href="#publishing-your-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Publishing Your Library</h2>

<p>TODO (But for now: <a href="http://hackage.haskell.org/upload">http://hackage.haskell.org/upload</a>)</p>

<h2>
<a name="user-content-further-reading" class="anchor" href="#further-reading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further Reading</h2>

<p>Here's a bunch of links (in no particular order) that I found useful in creating this project, and for Haskell development in general.</p>

<p>Hoogle:</p>

<ul class="task-list">
<li>
<a href="http://www.haskell.org/hoogle/">http://www.haskell.org/hoogle/</a> (This is probably the most important link, for me.)</li>
</ul><p>Hackage:</p>

<ul class="task-list">
<li><a href="http://hackage.haskell.org">http://hackage.haskell.org</a></li>
<li><a href="http://hackage.haskell.org/packages">http://hackage.haskell.org/packages</a></li>
<li><a href="http://hackage.haskell.org/upload">http://hackage.haskell.org/upload</a></li>
</ul><p>Libraries:</p>

<ul class="task-list">
<li><a href="http://hackage.haskell.org/package/github">http://hackage.haskell.org/package/github</a></li>
</ul><p>Haddock:</p>

<ul class="task-list">
<li><a href="http://www.haskell.org/haddock/#Overview">http://www.haskell.org/haddock/#Overview</a></li>
</ul><p>doctest:</p>

<ul class="task-list">
<li><a href="https://github.com/sol/doctest-haskell">https://github.com/sol/doctest-haskell</a></li>
<li><a href="http://hackage.haskell.org/package/doctest">http://hackage.haskell.org/package/doctest</a></li>
</ul><p>Testing:</p>

<ul class="task-list">
<li><a href="http://hunit.sourceforge.net/">http://hunit.sourceforge.net/</a></li>
<li><a href="http://hunit.sourceforge.net/HUnit-1.0/Guide.html">http://hunit.sourceforge.net/HUnit-1.0/Guide.html</a></li>
<li><a href="http://www.haskell.org/haskellwiki/Introduction_to_QuickCheck2">http://www.haskell.org/haskellwiki/Introduction_to_QuickCheck2</a></li>
<li><a href="http://hackage.haskell.org/package/test-framework">http://hackage.haskell.org/package/test-framework</a></li>
<li><a href="https://github.com/sol/doctest-haskell">https://github.com/sol/doctest-haskell</a></li>
</ul><p>Books:</p>

<ul class="task-list">
<li><a href="http://learnyouahaskell.com/">http://learnyouahaskell.com/</a></li>
<li><a href="http://book.realworldhaskell.org/">http://book.realworldhaskell.org/</a></li>
</ul><p>Cabal:</p>

<ul class="task-list">
<li><a href="http://www.haskell.org/cabal/">http://www.haskell.org/cabal/</a></li>
<li><a href="http://www.haskell.org/cabal/users-guide/">http://www.haskell.org/cabal/users-guide/</a></li>
<li><a href="http://www.haskell.org/cabal/users-guide/developing-packages.html">http://www.haskell.org/cabal/users-guide/developing-packages.html</a></li>
</ul><p>Travis:</p>

<ul class="task-list">
<li><a href="https://travis-ci.org/">https://travis-ci.org/</a></li>
<li><a href="https://travis-ci.org/profile">https://travis-ci.org/profile</a></li>
</ul><p>Other:</p>

<ul class="task-list">
<li><a href="http://www.haskell.org/haskellwiki/Package_versioning_policy">http://www.haskell.org/haskellwiki/Package_versioning_policy</a></li>
</ul><p>Other getting started links:</p>

<ul class="task-list">
<li><a href="http://taylor.fausak.me/2014/03/04/haskeleton-a-haskell-project-skeleton/">http://taylor.fausak.me/2014/03/04/haskeleton-a-haskell-project-skeleton/</a></li>
</ul><h2>
<a name="user-content-todo" class="anchor" href="#todo" aria-hidden="true"><span class="octicon octicon-link"></span></a>TODO</h2>

<p>This section contains things that still need to be done in this project. If you feel like something is missing and it isn't in this list, please let me know! </p>

<p>Definitely:</p>

<ul class="task-list">
<li>Explain what Hackage is.</li>
<li>Maybe give more attention to writing modules. This is for people with just basic ghci experience.</li>
<li>All of the Dependencies section, especially <code>base</code>.</li>
<li>Explain imports better, especially from the executable.</li>
<li>Upload my a project to Hackage, and explain how to do that.</li>
<li>Cabal sandboxes</li>
</ul><p>Maybe:</p>

<ul class="task-list">
<li>cabal unpack - you can pull something, unpack it, and fix it</li>
<li>HLint</li>
<li>Test coverage</li>
<li>Benchmarks</li>
</ul></article></div>
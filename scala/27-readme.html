<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage">

<p align="center"><a href="https://camo.githubusercontent.com/5d931b0b2c1b805cb20357d419f1fbeaba492434/687474703a2f2f6f2d6e322e636f6d2f7363616c6f69645f6c6f676f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/5d931b0b2c1b805cb20357d419f1fbeaba492434/687474703a2f2f6f2d6e322e636f6d2f7363616c6f69645f6c6f676f2e706e67" data-canonical-src="http://o-n2.com/scaloid_logo.png" style="max-width:100%;"></a></p>

<h1>
<a name="user-content-less-painful-android-development-with-scala" class="anchor" href="#less-painful-android-development-with-scala" aria-hidden="true"><span class="octicon octicon-link"></span></a>Less painful Android development with Scala</h1>

<p>Scaloid is a library that simplifies your Android code. It makes your code easy to understand and maintain by <a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-faqs-about-scaloid">leveraging Scala language</a>.</p>

<p>For example, the code block shown below:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">button</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Button</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">setText</span><span class="o">(</span><span class="s">"Greet"</span><span class="o">)</span>
<span class="n">button</span><span class="o">.</span><span class="n">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">OnClickListener</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">onClick</span><span class="o">(</span><span class="n">v</span><span class="k">:</span> <span class="kt">View</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Toast</span><span class="o">.</span><span class="n">makeText</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="s">"Hello!"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="nc">LENGTH_SHORT</span><span class="o">).</span><span class="n">show</span><span class="o">()</span>
  <span class="o">}</span>
<span class="o">})</span>
<span class="n">layout</span><span class="o">.</span><span class="n">addView</span><span class="o">(</span><span class="n">button</span><span class="o">)</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Greet"</span><span class="o">,</span> <span class="n">toast</span><span class="o">(</span><span class="s">"Hello!"</span><span class="o">))</span>
</pre></div>

<h3>
<a name="user-content-benefits" class="anchor" href="#benefits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Benefits</h3>

<ul class="task-list">
<li>
<strong>Write elegant Android software</strong><br>
Scaloid provides a concise and type-safe way of writing Android application.</li>
<li>
<strong>Simple to use</strong><br>
Check the <a href="https://github.com/pocorall/scaloid/wiki/Installation#wiki-quick-start">quick start guide</a>
</li>
<li>
<strong>Compatible with your legacy code</strong><br>
You can <a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-i-cant-use-scaloid-because-it-does-not-provide-a-functionality-x">use both Scaloid and plain-old Java Android API</a>. You can gradually improve your legacy code.</li>
<li>
<strong>Maintained actively</strong><br>
Scaloid is a <a href="http://en.wikipedia.org/wiki/Eating_your_own_dog_food">dogfooding</a> software. This is originally created to be used for <a href="https://play.google.com/store/apps/details?id=com.soundcorset.client.android">my own</a> <a href="https://play.google.com/store/apps/details?id=com.tocplus.client.android">Android apps</a>.</li>
</ul><h3>
<a name="user-content-demos" class="anchor" href="#demos" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demos</h3>

<ul class="task-list">
<li>
<a href="https://github.com/pocorall/hello-scaloid-maven"><b>Hello world of Scaloid for maven</b></a><br>
Fork this to start a new project.</li>
<li>
<a href="https://github.com/pocorall/hello-scaloid-sbt"><b>Hello world of Scaloid for sbt</b></a><br>
Fork this for sbt build.</li>
<li>
<a href="https://github.com/pocorall/scaloid-apidemos"><b>Scaloid port of apidemos app</b></a><br>
Learn how Scaloid can be used in action.</li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-list-of-projects-using-scaloid"><b>List of projects using Scaloid</b></a></li>
<li>
<a href="http://www.drdobbs.com/mobile/developing-android-apps-with-scala-and-s/240161584"><b>Tutorial by Gaston Hillar</b></a> - <a href="http://www.drdobbs.com/mobile/developing-android-apps-with-scala-and-s/240161584">part 1</a> and <a href="http://www.drdobbs.com/mobile/developing-android-apps-with-scala-and-s/240162204">part 2</a>
</li>
</ul><h2>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul class="task-list">
<li>
<a href="#ui-layout-without-xml">UI Layout without XML</a>

<ul class="task-list">
<li><a href="#layout-context">Layout context</a></li>
<li><a href="#styles-for-programmers">Styles for programmers</a></li>
<li><a href="#automatic-layout-converter">Automatic layout converter</a></li>
</ul>
</li>
<li><a href="#lifecycle-management">Lifecycle management</a></li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-asynchronous-task-processing">Asynchronous task processing</a></li>
<li>
<a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-implicit-conversions">Implicit conversions</a>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-enriched-implicit-classes">Shorter listeners</a></li>
<li><a href="http://blog.scaloid.org/2014/02/simple-enhancements-on-accessing.html">Database cursor</a></li>
</ul>
</li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-traits">Traits</a></li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-logging">Smarter logging</a></li>
<li><a href="#scala-getters-and-setters">Improved getters/setters</a></li>
<li>
<a href="#classes">Classes</a>

<ul class="task-list">
<li><a href="#class-alertdialogbuilder">Concise dialog builder</a></li>
<li><a href="#class-sarrayadapter">Beauty ArrayAdapter</a></li>
<li>
<a href="#class-preferences">Dynamically Preferences</a>  <a href="http://blog.scaloid.org/2013/03/dynamicly-accessing-sharedpreferences.html"><sub><code>Read in blog</code></sub></a>
</li>
<li>
<a href="#class-localservice">Binding services concisely</a>  <a href="http://blog.scaloid.org/2013/03/introducing-localservice.html"><sub><code>Read in blog</code></sub></a>
</li>
</ul>
</li>
</ul><h2>
<a name="user-content-other-links" class="anchor" href="#other-links" aria-hidden="true"><span class="octicon octicon-link"></span></a>Other links</h2>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Installation#wiki-quick-start"><b>Quick start guide</b></a></li>
<li><a href="http://docs.scaloid.org/"><b>API doc</b></a></li>
<li><a href="http://blog.scaloid.org/"><b>Blog</b></a></li>
<li><a href="https://twitter.com/scaloid/"><b>Twitter</b></a></li>
<li>
<a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-faqs-about-scaloid"><b>FAQs</b></a>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-faqs-about-scala-on-android">FAQs about Scala on Android</a></li>
</ul>
</li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Inside-Scaloid"><b>Inside Scaloid</b></a></li>
<li><a href="#we-are-hiring"><b>We are hiring!</b></a></li>
</ul><h2>
<a name="user-content-ui-layout-without-xml" class="anchor" href="#ui-layout-without-xml" aria-hidden="true"><span class="octicon octicon-link"></span></a>UI Layout without XML</h2>

<p align="center"><a href="https://camo.githubusercontent.com/72417659473b911df7f1bd03359de67685783ae7/687474703a2f2f6f2d6e322e636f6d2f766572626f736553696d706c652e706e67" target="_blank"><img src="https://camo.githubusercontent.com/72417659473b911df7f1bd03359de67685783ae7/687474703a2f2f6f2d6e322e636f6d2f766572626f736553696d706c652e706e67" data-canonical-src="http://o-n2.com/verboseSimple.png" style="max-width:100%;"></a></p>

<p>Android SDK leverages XML to build UI layouts. However, XML is considered still a bit verbose, and lacks programmability. Scaloid composes UI layout in Scala DSL style, therefore achieve both clarity and programmability. For example, suppose a legacy XML layout as shown below:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;LinearLayout</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
        <span class="na">android:orientation=</span><span class="s">"vertical"</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
        <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:padding=</span><span class="s">"20dip"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:text=</span><span class="s">"Sign in"</span>
            <span class="na">android:layout_marginBottom=</span><span class="s">"25dip"</span> <span class="na">android:textSize=</span><span class="s">"24.5sp"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:text=</span><span class="s">"ID"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:id=</span><span class="s">"@+id/userId"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;TextView</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:text=</span><span class="s">"Password"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;EditText</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:id=</span><span class="s">"@+id/password"</span>
            <span class="na">android:inputType=</span><span class="s">"textPassword"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;Button</span> <span class="na">android:layout_width=</span><span class="s">"match_parent"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span> <span class="na">android:id=</span><span class="s">"@+id/signin"</span>
            <span class="na">android:text=</span><span class="s">"Sign in"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;LinearLayout</span> <span class="na">android:orientation=</span><span class="s">"horizontal"</span>
            <span class="na">android:layout_width=</span><span class="s">"wrap_content"</span>
            <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;Button</span> <span class="na">android:text=</span><span class="s">"Help"</span> <span class="na">android:id=</span><span class="s">"@+id/help"</span>
                <span class="na">android:layout_width=</span><span class="s">"match_parent"</span> <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">/&gt;</span>
        <span class="nt">&lt;Button</span> <span class="na">android:text=</span><span class="s">"Sign up"</span> <span class="na">android:id=</span><span class="s">"@+id/signup"</span>
                <span class="na">android:layout_width=</span><span class="s">"match_parent"</span> <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;/LinearLayout&gt;</span>
<span class="nt">&lt;/LinearLayout&gt;</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">SVerticalLayout</span> <span class="o">{</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"Sign in"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mf">24.5</span> <span class="n">sp</span><span class="o">).&lt;&lt;.</span><span class="n">marginBottom</span><span class="o">(</span><span class="mi">25</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"ID"</span><span class="o">)</span>
  <span class="nc">SEditText</span><span class="o">()</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"Password"</span><span class="o">)</span>
  <span class="nc">SEditText</span><span class="o">()</span> <span class="n">inputType</span> <span class="nc">TEXT_PASSWORD</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"Sign in"</span><span class="o">)</span>
  <span class="k">this</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
    <span class="nc">SButton</span><span class="o">(</span><span class="s">"Help"</span><span class="o">)</span>
    <span class="nc">SButton</span><span class="o">(</span><span class="s">"Sign up"</span><span class="o">)</span>
  <span class="o">}.</span><span class="n">wrap</span>
<span class="o">}.</span><span class="n">padding</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">)</span>
</pre></div>

<p>The layout description shown above is highly programmable. You can easily wire your logic into the layout:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">SVerticalLayout</span> <span class="o">{</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"Sign in"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mf">24.5</span> <span class="n">sp</span><span class="o">).&lt;&lt;.</span><span class="n">marginBottom</span><span class="o">(</span><span class="mi">25</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"ID"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">userId</span> <span class="k">=</span> <span class="nc">SEditText</span><span class="o">()</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"Password"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">pass</span> <span class="k">=</span> <span class="nc">SEditText</span><span class="o">()</span> <span class="n">inputType</span> <span class="nc">TEXT_PASSWORD</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"Sign in"</span><span class="o">,</span> <span class="n">signin</span><span class="o">(</span><span class="n">userId</span><span class="o">.</span><span class="n">text</span><span class="o">,</span> <span class="n">pass</span><span class="o">.</span><span class="n">text</span><span class="o">))</span>
  <span class="k">this</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
    <span class="nc">SButton</span><span class="o">(</span><span class="s">"Help"</span><span class="o">,</span> <span class="n">openUri</span><span class="o">(</span><span class="s">"http://help.url"</span><span class="o">))</span>
    <span class="nc">SButton</span><span class="o">(</span><span class="s">"Sign up"</span><span class="o">,</span> <span class="n">openUri</span><span class="o">(</span><span class="s">"http://signup.uri"</span><span class="o">))</span>
  <span class="o">}.</span><span class="n">wrap</span>
<span class="o">}.</span><span class="n">padding</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">)</span>
</pre></div>

<p>Because a Scaloid layout description is plain Scala code, it is type-safe.</p>

<h3>
<a name="user-content-automatic-layout-converter" class="anchor" href="#automatic-layout-converter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automatic layout converter</h3>

<p>This converter turns an Android XML layout into a Scaloid layout:</p>

<p><a href="http://layout.scaloid.org">http://layout.scaloid.org</a></p>

<h3>
<a name="user-content-migration-tip" class="anchor" href="#migration-tip" aria-hidden="true"><span class="octicon octicon-link"></span></a>Migration tip</h3>

<p>Scaloid is fully compatible with legacy xml layout files. 
You can access a widget described in xml layout as:</p>

<div class="highlight highlight-scala"><pre><span class="n">onCreate</span> <span class="o">{</span>
  <span class="n">setContentView</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">main</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">name</span> <span class="k">=</span> <span class="n">find</span><span class="o">[</span><span class="kt">EditText</span><span class="o">](</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">name</span><span class="o">)</span>
  <span class="c1">// do something with `name`</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="user-content-responsive-layout" class="anchor" href="#responsive-layout" aria-hidden="true"><span class="octicon octicon-link"></span></a>Responsive layout</h3>

<p>Basically, a layout written in Scaloid is just an ordinary Scala code, so you can just freely composite the layout according to the device configuration:</p>

<div class="highlight highlight-scala"><pre><span class="k">import</span> <span class="nn">org.scaloid.util.Configuration._</span>

<span class="k">if</span><span class="o">(</span><span class="n">long</span><span class="o">)</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"This button is shown only for a long screen "</span>
  <span class="o">+</span> <span class="s">"dimension ("</span><span class="o">+</span> <span class="n">width</span> <span class="o">+</span> <span class="s">", "</span> <span class="o">+</span> <span class="n">height</span> <span class="o">+</span> <span class="s">")"</span><span class="o">)</span>
<span class="k">if</span><span class="o">(</span><span class="n">landscape</span><span class="o">)</span> <span class="k">this</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"Buttons for"</span><span class="o">)</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"landscape layout"</span><span class="o">)</span>
  <span class="k">if</span><span class="o">(</span><span class="n">dpi</span> <span class="o">&lt;=</span> <span class="nc">HDPI</span><span class="o">)</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"You have a high resolution display!"</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p>Please refer to this blog post for more detail:</p>

<ul class="task-list">
<li><a href="http://blog.scaloid.org/2013/08/syntactic-sugar-for-multiple-device.html">Syntactic sugar for multiple device configuration</a></li>
</ul><h3>
<a name="user-content-further-readings-about-scaloid-layout" class="anchor" href="#further-readings-about-scaloid-layout" aria-hidden="true"><span class="octicon octicon-link"></span></a>Further readings about Scaloid layout</h3>

<ul class="task-list">
<li><a href="http://blog.scaloid.org/2013/04/accessing-widgets-in-view-classes.html">Accessing widgets in view class</a></li>
<li><a href="#layout-context">Layout context</a></li>
<li><a href="http://blog.scaloid.org/2013/01/a-css-like-styling-on-android.html">In-depth tutorial on styles</a></li>
<li><a href="#styles-for-programmers">Styles for programmers</a></li>
</ul><h2>
<a name="user-content-lifecycle-management" class="anchor" href="#lifecycle-management" aria-hidden="true"><span class="octicon octicon-link"></span></a>Lifecycle management</h2>

<p>With Android API, Registering and unregistering BroadcastReceiver can be done as:</p>

<div class="highlight highlight-scala"><pre><span class="k">var</span> <span class="n">connectivityListener</span><span class="k">:</span> <span class="kt">BroadcastReceiver</span> <span class="o">=</span> <span class="kc">null</span>

<span class="k">def</span> <span class="n">onResume</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">super</span><span class="o">.</span><span class="n">onResume</span><span class="o">()</span>
  <span class="c1">// ...</span>
  <span class="n">connectivityListener</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">BroadcastReceiver</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">onReceive</span><span class="o">(</span><span class="n">context</span><span class="k">:</span> <span class="kt">Context</span><span class="o">,</span> <span class="n">intent</span><span class="k">:</span> <span class="kt">Intent</span><span class="o">)</span> <span class="o">{</span>
     <span class="n">doSomething</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}</span> 
  <span class="n">registerReceiver</span><span class="o">(</span><span class="n">connectivityListener</span><span class="o">,</span> <span class="k">new</span> <span class="nc">IntentFilter</span><span class="o">(</span><span class="nc">ConnectivityManager</span><span class="o">.</span><span class="nc">CONNECTIVITY_ACTION</span><span class="o">))</span>
<span class="o">}</span>

<span class="k">def</span> <span class="n">onPause</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">unregisterReceiver</span><span class="o">(</span><span class="n">connectivityListener</span><span class="o">)</span>
  <span class="c1">// ...</span>
  <span class="k">super</span><span class="o">.</span><span class="n">onPause</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>

<p>In Scaloid, the directly equivalent code is:</p>

<div class="highlight highlight-scala"><pre><span class="n">broadcastReceiver</span><span class="o">(</span><span class="nc">ConnectivityManager</span><span class="o">.</span><span class="nc">CONNECTIVITY_ACTION</span><span class="o">)</span> <span class="o">{</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">)</span> <span class="k">=&gt;</span>
  <span class="n">doSomething</span><span class="o">()</span>
<span class="o">}</span>
</pre></div>

<p>Scaloid has highly flexible resource register/unregister management architecture.
If this code is written in services, registering and unregistering is done in onCreate and onDestroy respectively. 
If the same code is in activities, registering and unregistering is done in onResume and onPause respectively.
This is just a default behavior. 
You can override a preference that determine when the register/unregister preforms. 
Overriding it is simple as well:</p>

<div class="highlight highlight-scala"><pre><span class="n">broadcastReceiver</span><span class="o">(</span><span class="nc">ConnectivityManager</span><span class="o">.</span><span class="nc">CONNECTIVITY_ACTION</span><span class="o">)</span> <span class="o">{</span> <span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">intent</span><span class="o">)</span> <span class="k">=&gt;</span>
  <span class="n">doSomething</span><span class="o">()</span>
<span class="o">}(</span><span class="k">this</span><span class="o">,</span> <span class="n">onStartStop</span><span class="o">)</span>
</pre></div>

<p>Then, the receiver is registered onStart, and unregistered onStop.</p>

<p><strong>Further reading:</strong> Refer to <a href="http://blog.scaloid.org/2013/02/better-resource-releasing-in-android.html">this blog post</a> for more details.</p>

<h2>
<a name="user-content-asynchronous-task-processing" class="anchor" href="#asynchronous-task-processing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Asynchronous task processing</h2>

<p>Android API provides <code>runOnUiThread()</code> only for class <code>Activity</code>. Scaloid provides a Scala version of <code>runOnUiThread()</code> for anywhere other than <code>Activity</code>.</p>

<p>Instead of:</p>

<div class="highlight highlight-scala"><pre><span class="n">activity</span><span class="o">.</span><span class="n">runOnUiThread</span> <span class="o">{</span>
  <span class="k">new</span> <span class="nc">Runnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">run</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">debug</span><span class="o">(</span><span class="s">"Running only in Activity class"</span><span class="o">)</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p>In Scaloid, use it like this:</p>

<div class="highlight highlight-scala"><pre><span class="n">runOnUiThread</span><span class="o">(</span><span class="n">debug</span><span class="o">(</span><span class="s">"Running in any context"</span><span class="o">))</span>
</pre></div>

<p>Running a job asynchronously and notifying the UI thread is a very frequently used pattern. Although Android API provides a helper class <code>AsyncTask</code>, implementing such a simple idea is still painful, even when we use Scala:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">AsyncTask</span><span class="o">[</span><span class="kt">String</span>, <span class="kt">Void</span>, <span class="kt">String</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">doInBackground</span><span class="o">(</span><span class="n">params</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="k">=</span> <span class="o">{</span>
    <span class="n">doAJobTakeSomeTime</span><span class="o">(</span><span class="n">params</span><span class="o">)</span>
  <span class="o">}</span>

  <span class="k">override</span> <span class="k">def</span> <span class="n">onPostExecute</span><span class="o">(</span><span class="n">result</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">alert</span><span class="o">(</span><span class="s">"Done!"</span><span class="o">,</span> <span class="n">result</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}.</span><span class="n">execute</span><span class="o">(</span><span class="s">"param"</span><span class="o">)</span>
</pre></div>

<p>Using <a href="http://docs.scala-lang.org/sips/completed/futures-promises.html"><code>scala.concurrent.Future</code></a>, the asynchronous job shown above can be rewritten like this:</p>

<div class="highlight highlight-scala"><pre><span class="nc">Future</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="n">doAJobTakeSomeTime</span><span class="o">(</span><span class="n">params</span><span class="o">)</span>
  <span class="n">runOnUiThread</span><span class="o">(</span><span class="n">alert</span><span class="o">(</span><span class="s">"Done!"</span><span class="o">,</span> <span class="n">result</span><span class="o">))</span>
<span class="o">}</span>
</pre></div>

<p>When you don't want to build sophisticate UI interactions, but just want to display something by calling a single Scaloid method (e.g. <code>alert</code>, <code>toast</code>, and <code>spinnerDialog</code>), Scaloid handles <code>runOnUiThread</code> for you. Therefore, the code block shown above is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="nc">Future</span> <span class="o">{</span>
  <span class="n">alert</span><span class="o">(</span><span class="s">"Done!"</span><span class="o">,</span> <span class="n">doAJobTakeSomeTime</span><span class="o">(</span><span class="n">params</span><span class="o">))</span>
<span class="o">}</span>
</pre></div>

<p>It is a great win as it exposes your idea clearly.</p>

<p>Just like we thrown away <code>AsyncTask</code>, we can also eliminate all other Java helpers for asynchronous job, such as <code>AsyncQueryHandler</code> and <code>AsyncTaskLoader</code>. Compare with the <a href="http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.1.1_r1/com/example/android/apis/view/ExpandableList2.java?av=h">original Java code</a>
and a <a href="https://github.com/pocorall/scaloid-apidemos/blob/master/src/main/java/com/example/android/apis/view/ExpandableList2.scala">Scala port</a> of ApiDemos example app.</p>

<p>Using <code>Future</code> is just an example of asynchronous task processing in Scaloid. You can freely use any modern task management utilities.</p>

<p><strong>Further reading:</strong> Refer to <a href="http://blog.scaloid.org/2013/11/using-scalaconcurrentfuture-in-android.html">this blog post</a> for an important consideration when using <code>Future</code> in Android.</p>

<h2>
<a name="user-content-implicit-conversions" class="anchor" href="#implicit-conversions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Implicit conversions</h2>

<p>Scaloid employs several implicit conversions. Some of the available implicit conversions are shown below:</p>

<h5>
<a name="user-content-uri-conversion" class="anchor" href="#uri-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uri conversion</h5>

<div class="highlight highlight-scala"><pre><span class="nc">String</span> <span class="k">=&gt;</span> <span class="nc">Uri</span>
</pre></div>

<p>The functions such as <a href="#play-ringtones">play ringtones</a> <code>play()</code> or <a href="#open-uris">open URIs</a> <code>openUri()</code> takes an instance of <code>Uri</code> as a parameter. However, we frequently have URIs as a <code>String</code>. Scaloid implicitly converts <code>String</code> into <code>Uri</code>. Therefore, you can freely use <code>String</code> when you play a ringtone:</p>

<div class="highlight highlight-scala"><pre><span class="n">play</span><span class="o">(</span><span class="s">"content://media/internal/audio/media/50"</span><span class="o">)</span>
</pre></div>

<p>, open a URI:</p>

<div class="highlight highlight-scala"><pre><span class="n">openUri</span><span class="o">(</span><span class="s">"http://scaloid.org"</span><span class="o">)</span>
</pre></div>

<p>, or wherever you want.</p>

<p>Alternatively, you can specify the conversion as:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">uri</span><span class="k">:</span><span class="kt">Uri</span> <span class="o">=</span> <span class="s">"http://scaloid.org"</span><span class="o">.</span><span class="n">toUri</span>
</pre></div>

<h5>
<a name="user-content-unit-conversion" class="anchor" href="#unit-conversion" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unit conversion</h5>

<p>Units <code>dip</code> and <code>sp</code> can be converted into the pixel unit.</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">inPixel</span><span class="k">:</span><span class="kt">Int</span> <span class="o">=</span> <span class="mf">32.d</span><span class="n">ip</span>
<span class="k">val</span> <span class="n">inPixel2</span><span class="k">:</span><span class="kt">Int</span> <span class="o">=</span> <span class="mf">22.</span><span class="n">sp</span>
</pre></div>

<p>Reversely, pixel unit can also be converted into <code>dip</code> and <code>sp</code> unit.</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">inDip</span><span class="k">:</span><span class="kt">Double</span> <span class="o">=</span> <span class="mf">35.</span><span class="n">px2dip</span>
<span class="k">val</span> <span class="n">inSp</span><span class="k">:</span><span class="kt">Double</span> <span class="o">=</span> <span class="mf">27.</span><span class="n">px2sp</span>
</pre></div>

<h5>
<a name="user-content-resource-ids" class="anchor" href="#resource-ids" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resource IDs</h5>

<p>Scaloid provides several implicit conversions that convert from <code>Int</code> type resource ID to <code>CharSequence</code>, <code>Array[CharSequence]</code>, <code>Array[String]</code>, <code>Drawable</code> and <code>Movie</code>.
For example:</p>

<div class="highlight highlight-scala"><pre><span class="k">def</span> <span class="n">toast</span><span class="o">(</span><span class="n">msg</span><span class="k">:</span><span class="kt">CharSequence</span><span class="o">)</span> <span class="k">=</span> <span class="o">...</span>

<span class="n">toast</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">my_message</span><span class="o">)</span> <span class="c1">// implicit conversion works!</span>
</pre></div>

<p>Although Scaloid provides these conversions implicitly, explicit conversion may be required in some context. In this case, methods <code>r2...</code> are provided for the <code>Int</code> type:</p>

<div class="highlight highlight-scala"><pre><span class="n">warn</span><span class="o">(</span><span class="s">"Will display the content of the resource: "</span> <span class="o">+</span> <span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">my_message</span><span class="o">.</span><span class="n">r2String</span><span class="o">)</span>
</pre></div>

<p>Currently, <code>r2Text</code>, <code>r2TextArray</code>, <code>r2String</code>, <code>r2StringArray</code>, <code>r2Drawable</code> and <code>r2Movie</code> is provided.</p>

<p><strong>Further reading:</strong></p>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-why-implicit-conversion-of-resource-id-is-cool">Why implicit conversion of Resource ID is cool?</a></li>
</ul><h2>
<a name="user-content-context-as-an-implicit-parameter" class="anchor" href="#context-as-an-implicit-parameter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Context as an implicit parameter</h2>

<p>Many methods in the Android API require an instance of a class <code>Context</code>. Providing this for every method call results in clumsy code. We employ an implicit parameter to eliminate this. Just declare an implicit value that represents current context:</p>

<div class="highlight highlight-scala"><pre><span class="k">implicit</span> <span class="k">val</span> <span class="n">ctx</span> <span class="k">=</span> <span class="o">...</span>
</pre></div>

<p>or just extend trait <code>SContext</code>, which defines it for you. Then the code that required <code>Context</code> becomes much simpler, for example:</p>

<h5>
<a name="user-content-intent" class="anchor" href="#intent" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intent</h5>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">])</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SIntent</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">]</span>
</pre></div>

<p>When a method takes an <code>Intent</code> as a first parameter in which we want to pass the newly created intent object, the parameter can be omitted. For example:</p>

<div class="highlight highlight-scala"><pre><span class="n">startService</span><span class="o">(</span><span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]))</span>
<span class="n">stopService</span><span class="o">(</span><span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]))</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">startService</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]</span>
<span class="n">stopService</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]</span>
</pre></div>

<h5>
<a name="user-content-toast" class="anchor" href="#toast" aria-hidden="true"><span class="octicon octicon-link"></span></a>Toast</h5>

<div class="highlight highlight-scala"><pre><span class="nc">Toast</span><span class="o">.</span><span class="n">makeText</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="s">"hi, there!"</span><span class="o">,</span> <span class="nc">Toast</span><span class="o">.</span><span class="nc">LENGTH_SHORT</span><span class="o">).</span><span class="n">show</span><span class="o">()</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">toast</span><span class="o">(</span><span class="s">"hi, there!"</span><span class="o">)</span>
</pre></div>

<p>If you want a longer toast:</p>

<div class="highlight highlight-scala"><pre><span class="n">longToast</span><span class="o">(</span><span class="s">"long toast"</span><span class="o">)</span>
</pre></div>

<h5>
<a name="user-content-dialog" class="anchor" href="#dialog" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dialog</h5>

<div class="highlight highlight-scala"><pre><span class="nc">ProgressDialog</span><span class="o">.</span><span class="n">show</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="s">"Dialog"</span><span class="o">,</span> <span class="s">"working..."</span><span class="o">,</span> <span class="kc">true</span><span class="o">)</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">spinnerDialog</span><span class="o">(</span><span class="s">"Dialog"</span><span class="o">,</span> <span class="s">"working..."</span><span class="o">)</span>
</pre></div>

<p>When you call <code>toast</code>, <code>longToast</code> or <code>spinnerDialog</code> from non-UI thread, you <a href="#asynchronous-task-processing">don't have to mind about threading</a>.
The toast example shown above is equivalent to the following Java code: </p>

<div class="highlight highlight-java"><pre><span class="n">activity</span><span class="o">.</span><span class="na">runOnUiThread</span><span class="o">(</span><span class="k">new</span> <span class="nf">Runnable</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Toast</span><span class="o">.</span><span class="na">makeText</span><span class="o">(</span><span class="n">activity</span><span class="o">,</span> <span class="s">"hi, there!"</span><span class="o">,</span> <span class="n">Toast</span><span class="o">.</span><span class="na">LENGTH_SHORT</span><span class="o">).</span><span class="na">show</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>

<h5>
<a name="user-content-pending-intent" class="anchor" href="#pending-intent" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pending intent</h5>

<div class="highlight highlight-scala"><pre><span class="nc">PendingIntent</span><span class="o">.</span><span class="n">getActivity</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">]),</span> <span class="mi">0</span><span class="o">)</span>
<span class="nc">PendingIntent</span><span class="o">.</span><span class="n">getService</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]),</span> <span class="mi">0</span><span class="o">)</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">pendingActivity</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">]</span>
<span class="n">pendingService</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]</span>
</pre></div>

<h5>
<a name="user-content-defaultsharedpreferences" class="anchor" href="#defaultsharedpreferences" aria-hidden="true"><span class="octicon octicon-link"></span></a>DefaultSharedPreferences</h5>

<div class="highlight highlight-scala"><pre><span class="nc">PreferenceManager</span><span class="o">.</span><span class="n">getDefaultSharedPreferences</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">defaultSharedPreferences</span>
</pre></div>

<h5>
<a name="user-content-play-ringtones" class="anchor" href="#play-ringtones" aria-hidden="true"><span class="octicon octicon-link"></span></a>Play ringtones</h5>

<p>Just play the default notification ringtone:</p>

<div class="highlight highlight-scala"><pre><span class="n">play</span><span class="o">()</span>
</pre></div>

<p>specify ringtone resources as a <code>String</code>:</p>

<div class="highlight highlight-scala"><pre><span class="n">play</span><span class="o">(</span><span class="s">"content://media/internal/audio/media/50"</span><span class="o">)</span>
</pre></div>

<p>or specify a resource <code>Uri</code>:</p>

<div class="highlight highlight-scala"><pre><span class="n">play</span><span class="o">(</span><span class="n">alarmSound</span><span class="o">)</span>
</pre></div>

<h5>
<a name="user-content-open-uris" class="anchor" href="#open-uris" aria-hidden="true"><span class="octicon octicon-link"></span></a>Open URIs</h5>

<p>This opens a web browser (or another view assigned to the http protocol).</p>

<div class="highlight highlight-scala"><pre><span class="n">openUri</span><span class="o">(</span><span class="s">"http://scaloid.org"</span><span class="o">)</span>
</pre></div>

<h5>
<a name="user-content-system-services" class="anchor" href="#system-services" aria-hidden="true"><span class="octicon octicon-link"></span></a>System services</h5>

<p>Getting system service objects become much simpler. The following legacy code:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">vibrator</span> <span class="k">=</span> <span class="n">context</span><span class="o">.</span><span class="n">getSystemService</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="nc">VIBRATOR_SERVICE</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Vibrator</span><span class="o">]</span>
<span class="n">vibrator</span><span class="o">.</span><span class="n">vibrate</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">vibrator</span><span class="o">.</span><span class="n">vibrate</span><span class="o">(</span><span class="mi">500</span><span class="o">)</span>
</pre></div>

<p>Under the hood, Scaloid defines a function <code>vibrator</code> like this:</p>

<div class="highlight highlight-scala"><pre><span class="k">def</span> <span class="n">vibrator</span><span class="o">(</span><span class="k">implicit</span> <span class="n">ctx</span><span class="k">:</span> <span class="kt">Context</span><span class="o">)</span> <span class="k">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">getSystemService</span><span class="o">(</span><span class="nc">Context</span><span class="o">.</span><span class="nc">VIBRATOR_SERVICE</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Vibrator</span><span class="o">]</span>
</pre></div>

<p>All the system service accessors available in Android API level 8 are defined (e.g. <code>audioManager</code>, <code>alarmManager</code>, <code>notificationManager</code>, etc.). The name of a system service accessor is the same as its class name, except that the first character is lowercased.</p>

<h2>
<a name="user-content-enriched-implicit-classes" class="anchor" href="#enriched-implicit-classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enriched Implicit classes</h2>

<p>Suppose an Android class <code>Foo</code>, for example, Scaloid defines an implicit conversion <code>Foo =&gt; RichFoo</code>. The class <code>RichFoo</code> defines additional methods for more convenient access to <code>Foo</code>. This is a common pattern in Scala to extend existing API (see <a href="http://www.artima.com/weblogs/viewpost.jsp?thread=179766">pimp-my-library</a> pattern). This section describes various features added on existing Android API classes.</p>

<h5>
<a name="user-content-listeners" class="anchor" href="#listeners" aria-hidden="true"><span class="octicon octicon-link"></span></a>Listeners</h5>

<p>Android API defines many listener interfaces for callback notifications. For example, <code>View.OnClickListener</code> is used to be notified when a view is clicked:</p>

<div class="highlight highlight-scala"><pre><span class="n">find</span><span class="o">[</span><span class="kt">Button</span><span class="o">](</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">search</span><span class="o">).</span><span class="n">setOnClickListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="nc">OnClickListener</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">onClick</span><span class="o">(</span><span class="n">v</span><span class="k">:</span><span class="kt">View</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">openUri</span><span class="o">(</span><span class="s">"http://scaloid.org"</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">})</span>
</pre></div>

<p>Scaloid provides a shortcut that dramatically reduces the length of the code:</p>

<div class="highlight highlight-scala"><pre><span class="n">find</span><span class="o">[</span><span class="kt">Button</span><span class="o">](</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">search</span><span class="o">).</span><span class="n">onClick</span><span class="o">(</span><span class="n">openUri</span><span class="o">(</span><span class="s">"http://scaloid.org"</span><span class="o">))</span>
</pre></div>

<p>All other listener-appending methods such as <code>.onKey()</code>, <code>.onLongClick()</code>, and <code>.onTouch()</code> are defined.</p>

<p>Some conventions we employed for method naming are:</p>

<ul class="task-list">
<li>We omit <code>set...</code>, <code>add...</code>, and <code>...Listener</code> from the method name, which is less significant.<br>
For example, <code>.setOnKeyListener()</code> becomes <code>.onKey()</code>.</li>
<li>Every method has two versions of parameters overridden. One is a lazy parameter, and another is a function which has full parameters defined in the original Android API. For example, these two usages are valid:</li>
</ul><div class="highlight highlight-scala"><pre><span class="n">button</span><span class="o">.</span><span class="n">onClick</span><span class="o">(</span><span class="n">info</span><span class="o">(</span><span class="s">"touched"</span><span class="o">))</span>
<span class="n">button</span><span class="o">.</span><span class="n">onClick</span><span class="o">((</span><span class="n">v</span><span class="k">:</span><span class="kt">View</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">info</span><span class="o">(</span><span class="s">"touched a button "</span><span class="o">+</span><span class="n">v</span><span class="o">))</span>
</pre></div>

<ul class="task-list">
<li>Methods <code>add...</code> is abbreviated with a method <code>+=</code> if it is not a listener-appender.<br>
For example, <code>layout.addView(button)</code> becomes <code>layout += button</code>.</li>
</ul><h5>
<a name="user-content-multiple-method-listeners" class="anchor" href="#multiple-method-listeners" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multiple method listeners</h5>

<p>Methods <code>beforeTextChanged()</code>, <code>onTextChanged()</code>, and <code>afterTextChanged()</code> are defined in <code>RichTextView</code>, which can be implicitly converted from <code>TextView</code>. It is more convenient than using <code>TextWatcher</code> directly. For example:</p>

<div class="highlight highlight-scala"><pre><span class="n">inputField</span><span class="o">.</span><span class="n">beforeTextChanged</span><span class="o">(</span><span class="n">saveTextStatus</span><span class="o">())</span>
</pre></div>

<p>is equivalent to:</p>

<div class="highlight highlight-scala"><pre><span class="n">inputField</span><span class="o">.</span><span class="n">addTextChangedListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">TextWatcher</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">beforeTextChanged</span><span class="o">(</span><span class="n">s</span><span class="k">:</span> <span class="kt">CharSequence</span><span class="o">,</span> <span class="n">start</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">before</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">count</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">saveTextStatus</span><span class="o">()</span>
  <span class="o">}</span>

  <span class="k">def</span> <span class="n">onTextChanged</span><span class="o">(</span><span class="n">p1</span><span class="k">:</span> <span class="kt">CharSequence</span><span class="o">,</span> <span class="n">p2</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">p3</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">p4</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{}</span>

  <span class="k">def</span> <span class="n">afterTextChanged</span><span class="o">(</span><span class="n">p1</span><span class="k">:</span> <span class="kt">Editable</span><span class="o">)</span> <span class="o">{}</span>
<span class="o">})</span>
</pre></div>

<p>Also, we override <code>beforeTextChanged()</code> with full parameters defined in the original listener:</p>

<div class="highlight highlight-scala"><pre><span class="n">inputField</span><span class="o">.</span><span class="n">beforeTextChanged</span><span class="o">((</span><span class="n">s</span><span class="k">:</span><span class="kt">CharSequence</span><span class="o">,</span> <span class="k">_:</span><span class="kt">Int</span><span class="o">,</span> <span class="k">_:</span><span class="kt">Int</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="n">saveText</span><span class="o">(</span><span class="n">s</span><span class="o">))</span>
</pre></div>

<p>Other listeners in Android API can also be accessed in this way.</p>

<h2>
<a name="user-content-layout-context" class="anchor" href="#layout-context" aria-hidden="true"><span class="octicon octicon-link"></span></a>Layout context</h2>

<p>In Android API, layout information is stored into a <code>View</code> object via the method <code>View.setLayoutParams(ViewGroup.LayoutParams)</code>. A specific type of parameter passing into that method is determined by a the type of <code>...Layout</code> object which contains the <code>View</code> object. For example, let us see some Java code shown below:</p>

<div class="highlight highlight-java"><pre><span class="n">LinearLayout</span> <span class="n">layout</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">LinearLayout</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">Button</span> <span class="n">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">Button</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
<span class="n">button</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="s">"Click"</span><span class="o">);</span>
<span class="n">LinearLayout</span><span class="o">.</span><span class="na">LayoutParams</span> <span class="n">params</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearLayout</span><span class="o">.</span><span class="na">LayoutParams</span><span class="o">();</span>
<span class="n">params</span><span class="o">.</span><span class="na">weight</span> <span class="o">=</span> <span class="mf">1.0f</span><span class="o">;</span>  <span class="c1">// sets some value</span>
<span class="n">button</span><span class="o">.</span><span class="na">setLayoutParams</span><span class="o">(</span><span class="n">params</span><span class="o">);</span>
<span class="n">layout</span><span class="o">.</span><span class="na">addView</span><span class="o">(</span><span class="n">button</span><span class="o">);</span>
</pre></div>

<p>Because the button is appended into the <code>LinearLayout</code>, the layout parameter must be <code>LinearLayout.LayoutParams</code>, otherwise a <strong><em>runtime error</em></strong> might be occurred. Meanwhile, Scaloid eliminate this burden, while still preserving rigorous typing of <code>LayoutParams</code>. The code shown below is equivalent to the previous Java code:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">layout</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="nc">Weight</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">).&gt;&gt;</span>
<span class="o">}</span>
</pre></div>

<p>In the anonymous constructor of 'SLinearLayout', Scaloid provides an implicit function called "layout context". This affects a return type of the method <code>&lt;&lt;</code> defined in the class <code>SButton</code>. 
If we use <code>SFrameLayout</code> as a layout context, the method <code>&lt;&lt;</code> returns <code>FrameLayout.LayoutParams</code>, which does not have <code>Weight</code> method. Therefore, the code below results a <strong><em>syntax error</em></strong>.</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">layout</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SFrameLayout</span> <span class="o">{</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="nc">Weight</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">).&gt;&gt;</span>   <span class="c1">// Syntax error on Weight()</span>
<span class="o">}</span>
</pre></div>

<p>Compared with XML layout description, Scaloid layout is simple and type-safe.</p>

<p>The method <code>&lt;&lt;</code> is overloaded with parameters <code>&lt;&lt;(width:Int, height:Int)</code> which assigns the size of the view component. For example:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;(</span><span class="mi">40</span> <span class="n">dip</span><span class="o">,</span> <span class="nc">WRAP_CONTENT</span><span class="o">)</span>
</pre></div>

<h4>
<a name="user-content-operator-new-and-method-apply" class="anchor" href="#operator-new-and-method-apply" aria-hidden="true"><span class="octicon octicon-link"></span></a>Operator <code>new</code> and method <code>apply</code>
</h4>

<p>Usually, <code>View</code> components are referenced multiple times in an <code>Activity</code>. For example:</p>

<div class="highlight highlight-scala"><pre><span class="k">var</span> <span class="n">button</span><span class="k">:</span> <span class="kt">SButton</span> <span class="o">=</span> <span class="kc">null</span>
<span class="k">override</span> <span class="k">def</span> <span class="n">onCreate</span><span class="o">(</span><span class="n">savedInstanceState</span><span class="k">:</span> <span class="kt">Bundle</span><span class="o">)</span> <span class="o">{</span>
  <span class="c1">// ...</span>
  <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
    <span class="n">button</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SButton</span><span class="o">()</span> <span class="n">text</span> <span class="s">"Click"</span>
    <span class="k">this</span> <span class="o">+=</span> <span class="n">button</span>
  <span class="o">}</span>
  <span class="c1">// ...</span>
<span class="o">}</span>
<span class="c1">// ... uses the button somewhere in other methods (e.g. changing text or adding listeners)</span>
</pre></div>

<p><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-prefixed-classes">Prefixed classes</a> in Scaloid (e.g. <code>SButton</code>) have a companion object that implements <code>apply</code> methods that create a new component. These methods also append the component to the layout context that enclose the component. 
Therefore, the code block from the above example:</p>

<div class="highlight highlight-scala"><pre><span class="n">button</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SButton</span><span class="o">()</span> <span class="n">text</span> <span class="s">"Click"</span>
<span class="k">this</span> <span class="o">+=</span> <span class="n">button</span>
</pre></div>

<p>is equivalent to:</p>

<div class="highlight highlight-scala"><pre><span class="n">button</span> <span class="k">=</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">)</span>
</pre></div>

<p>Because the <code>apply</code> methods access to the layout context, it cannot be called outside of the layout context. 
In this case, use the <code>new</code> operator instead.</p>

<h4>
<a name="user-content-method-" class="anchor" href="#method-" aria-hidden="true"><span class="octicon octicon-link"></span></a>Method <code>&gt;&gt;</code>
</h4>

<p>As we noted, the method <code>&lt;&lt;</code> returns an object which is a type of <code>ViewGroup.LayoutParams</code>:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">params</span> <span class="k">=</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;</span>   <span class="c1">// type LayoutParams</span>
</pre></div>

<p>This class provides some setters for chaining:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">params</span> <span class="k">=</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="n">marginBottom</span><span class="o">(</span><span class="mi">100</span><span class="o">).</span><span class="n">marginLeft</span><span class="o">(</span><span class="mi">10</span><span class="o">)</span>   <span class="c1">// type LayoutParams</span>
</pre></div>

<p>if we want use the <code>SButton</code> object again, Scaloid provides <code>&gt;&gt;</code> method returning back to the object:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">button</span> <span class="k">=</span> <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="n">marginBottom</span><span class="o">(</span><span class="mi">100</span><span class="o">).</span><span class="n">marginLeft</span><span class="o">(</span><span class="mi">10</span><span class="o">).&gt;&gt;</span>   <span class="c1">// type SButton</span>
</pre></div>

<h4>
<a name="user-content-nested-layout-context" class="anchor" href="#nested-layout-context" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nested layout context</h4>

<p>When the layout context is nested, inner-most layout's context is applied:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">layout</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">SFrameLayout</span> <span class="o">{</span>
  <span class="k">this</span> <span class="o">+=</span> <span class="k">new</span> <span class="nc">SLinearLayout</span> <span class="o">{</span>
    <span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="nc">Weight</span><span class="o">(</span><span class="mf">1.0f</span><span class="o">).&gt;&gt;</span>   <span class="c1">// in context of SLinearLayout</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h4>
<a name="user-content-methods-fill-wrap-wf-and-fw" class="anchor" href="#methods-fill-wrap-wf-and-fw" aria-hidden="true"><span class="octicon octicon-link"></span></a>Methods <code>fill</code>, <code>wrap</code>, <code>wf</code> and <code>fw</code>
</h4>

<p>When we get a <code>LayoutParams</code> from <code>&lt;&lt;</code>, the default values of <code>width</code> and <code>height</code> properties are <code>width = FILL_PARENT</code> and <code>height = WRAP_CONTENT</code>. You can override this when you need it:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;(</span><span class="nc">FILL_PARENT</span><span class="o">,</span> <span class="nc">FILL_PARENT</span><span class="o">)</span>
</pre></div>

<p>This is a very frequently used idiom. Therefore we provide further shorthand:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="n">fill</span>
</pre></div>

<p>If you want the <code>View</code> element to be wrapped,</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;(</span><span class="nc">WRAP_CONTENT</span><span class="o">,</span> <span class="nc">WRAP_CONTENT</span><span class="o">)</span>
</pre></div>

<p>This is also shortened as:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).&lt;&lt;.</span><span class="n">wrap</span>
</pre></div>

<p>Similarly, <code>&lt;&lt;(WRAP_CONTENT, FILL_PARENT)</code> and <code>&lt;&lt;(FILL_PARENT, WRAP_CONTENT)</code> can also be shortend as <code>&lt;&lt;.wf</code> and <code>&lt;&lt;.fw</code> respectively.</p>

<p>Because there are so many occurences <code>&lt;&lt;.wrap.&gt;&gt;</code> pattern in actual Android code, it is allowed to remove <code>.&lt;&lt;</code> and <code>.&gt;&gt;</code> in this case:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"Click"</span><span class="o">).</span><span class="n">wrap</span>    <span class="c1">// returns SButton type</span>
</pre></div>

<p>This pattern also usable for <code>.fill</code>, <code>.fw</code> and <code>.wf</code> methods.</p>

<h2>
<a name="user-content-styles-for-programmers" class="anchor" href="#styles-for-programmers" aria-hidden="true"><span class="octicon octicon-link"></span></a>Styles for programmers</h2>

<h4>
<a name="user-content-naming-conventions" class="anchor" href="#naming-conventions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Naming conventions</h4>

<p>Scaloid follows the naming conventions of XML attributes in the Android API with some improvements.</p>

<p>For XML attributes, layout related properties are prefixed with <code>layout_</code> and as you might have guessed, Scaloid does not need it. 
For boolean attributes, the default is <code>false</code>. However, Scaloid flags it as <code>true</code> when the attribute is declared explicitly without any parameter. 
For example:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">SRelativeLayout</span> <span class="o">{</span>
  <span class="nc">STextView</span><span class="o">(</span><span class="s">"hello"</span><span class="o">).&lt;&lt;.</span><span class="n">centerHorizontal</span><span class="o">.</span><span class="n">alignParentBottom</span><span class="o">.&gt;&gt;</span>
<span class="o">}</span>
</pre></div>

<p>Scaloid omits unnecessary <code>="true"</code> for the attribute <code>centerHorizontal</code>. Equivalent XML layout description for <code>TextView</code> is:</p>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;TextView</span>
    <span class="na">android:id=</span><span class="s">"@+id/helloText"</span>
    <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:layout_centerHorizontal=</span><span class="s">"true"</span>
    <span class="na">android:layout_alignParentBottom=</span><span class="s">"true"</span>
    <span class="na">android:text=</span><span class="s">"hello"</span><span class="nt">/&gt;</span>
</pre></div>

<p>For layout methods named with four directions (e.g. <code>...Top</code>, <code>...Right</code>, <code>...Bottom</code> and <code>...Left</code>), Scaloid provides additional methods that specifies all properties at once. For example, Because Android XML layout defines <code>margin...</code> properties(<code>marginTop(v:Int)</code>, <code>marginRight(v:Int)</code>, <code>marginBottom(v:Int)</code> and <code>marginLeft(v:Int)</code>), Scaloid provides additional <code>margin(top:Int, right:Int, bottom:Int, left:Int)</code> and <code>margin(amount:Int)</code> methods that can be used as:</p>

<div class="highlight highlight-scala"><pre><span class="nc">STextView</span><span class="o">(</span><span class="s">"hello"</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">,</span> <span class="mi">10</span> <span class="n">dip</span><span class="o">,</span> <span class="mi">5</span> <span class="n">dip</span><span class="o">,</span> <span class="mi">10</span> <span class="n">dip</span><span class="o">)</span>
</pre></div>

<p>or</p>

<div class="highlight highlight-scala"><pre><span class="nc">STextView</span><span class="o">(</span><span class="s">"hello"</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">10</span> <span class="n">sp</span><span class="o">)</span>  <span class="c1">// assigns the same value for all directions</span>
</pre></div>

<p>Android SDK introduced <a href="http://developer.android.com/guide/topics/ui/themes.html">styles</a> to reuse common properties on XML layout.
We repeatedly pointed out that XML is verbose.
To apply styles in Scaloid, you do not need to learn any syntax or API library, because Scaloid layout is an ordinary Scala code. Just write a code that work as styles.</p>

<h4>
<a name="user-content-basic-assign-it-individually" class="anchor" href="#basic-assign-it-individually" aria-hidden="true"><span class="octicon octicon-link"></span></a>Basic: Assign it individually</h4>

<p>Suppose the following code that repeats some properties:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SButton</span><span class="o">(</span><span class="s">"first"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"prev"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"next"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"last"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
</pre></div>

<p>Then we can define a function that applies these properties:</p>

<div class="highlight highlight-scala"><pre><span class="k">def</span> <span class="n">myStyle</span> <span class="k">=</span> <span class="o">(</span><span class="k">_:</span> <span class="kt">SButton</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="n">myStyle</span><span class="o">(</span><span class="nc">SButton</span><span class="o">(</span><span class="s">"first"</span><span class="o">))</span>
<span class="n">myStyle</span><span class="o">(</span><span class="nc">SButton</span><span class="o">(</span><span class="s">"prev"</span><span class="o">))</span>
<span class="n">myStyle</span><span class="o">(</span><span class="nc">SButton</span><span class="o">(</span><span class="s">"next"</span><span class="o">))</span>
<span class="n">myStyle</span><span class="o">(</span><span class="nc">SButton</span><span class="o">(</span><span class="s">"last"</span><span class="o">))</span>
</pre></div>

<p>Still not satisfying? Here we have a shorter one:</p>

<div class="highlight highlight-scala"><pre><span class="k">def</span> <span class="n">myStyle</span> <span class="k">=</span> <span class="o">(</span><span class="k">_:</span> <span class="kt">SButton</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="nc">List</span><span class="o">(</span><span class="s">"first"</span><span class="o">,</span> <span class="s">"prev"</span><span class="o">,</span> <span class="s">"next"</span><span class="o">,</span> <span class="s">"last"</span><span class="o">).</span><span class="n">foreach</span><span class="o">(</span><span class="n">title</span> <span class="k">=&gt;</span> <span class="n">myStyle</span><span class="o">(</span><span class="nc">SButton</span><span class="o">(</span><span class="n">title</span><span class="o">)))</span>
</pre></div>

<h4>
<a name="user-content-advanced-css-like-stylesheet" class="anchor" href="#advanced-css-like-stylesheet" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced: CSS-like stylesheet</h4>

<p>Scaloid provides <code>SViewGroup.style(View =&gt; View)</code> method to provide more generic component styling. 
The parameter is a function which receives a view requested for styling, and returns a view which is finished applying the style.
Then the example in the previous subsection becomes:</p>

<div class="highlight highlight-scala"><pre><span class="n">style</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">b</span><span class="k">:</span> <span class="kt">SButton</span> <span class="o">=&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">textSize</span><span class="o">(</span><span class="mi">20</span> <span class="n">dip</span><span class="o">).&lt;&lt;.</span><span class="n">margin</span><span class="o">(</span><span class="mi">5</span> <span class="n">dip</span><span class="o">).&gt;&gt;</span>
<span class="o">}</span>

<span class="nc">SButton</span><span class="o">(</span><span class="s">"first"</span><span class="o">)</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"prev"</span><span class="o">)</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"next"</span><span class="o">)</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"last"</span><span class="o">)</span>
</pre></div>

<p>Note that individually applying <code>myStyle</code> is reduced. Let us see another example:</p>

<div class="highlight highlight-scala"><pre><span class="n">style</span> <span class="o">{</span>
  <span class="k">case</span> <span class="n">b</span><span class="k">:</span> <span class="kt">SButton</span> <span class="o">=&gt;</span> <span class="n">b</span><span class="o">.</span><span class="n">textColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="nc">RED</span><span class="o">).</span><span class="n">onClick</span><span class="o">(</span><span class="n">toast</span><span class="o">(</span><span class="s">"Bang!"</span><span class="o">))</span>
  <span class="k">case</span> <span class="n">t</span><span class="k">:</span> <span class="kt">STextView</span> <span class="o">=&gt;</span> <span class="n">t</span><span class="o">.</span><span class="n">textSize</span><span class="o">(</span><span class="mi">10</span> <span class="n">dip</span><span class="o">)</span>
  <span class="k">case</span> <span class="n">v</span> <span class="k">=&gt;</span> <span class="n">v</span><span class="o">.</span><span class="n">backgroundColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="nc">YELLOW</span><span class="o">)</span>
<span class="o">}</span>

<span class="nc">STextView</span><span class="o">(</span><span class="s">"I am 10 dip tall"</span><span class="o">)</span>
<span class="nc">STextView</span><span class="o">(</span><span class="s">"Me too"</span><span class="o">)</span>
<span class="nc">STextView</span><span class="o">(</span><span class="s">"I am taller than you"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">15</span> <span class="n">dip</span><span class="o">)</span> <span class="c1">// overriding</span>
<span class="nc">SEditText</span><span class="o">(</span><span class="s">"Yellow input field"</span><span class="o">)</span>
<span class="nc">SButton</span><span class="o">(</span><span class="s">"Red alert!"</span><span class="o">)</span>
</pre></div>

<p>Similar to CSS, you can assign different styles for each classes using Scala pattern matching. 
Unlike Android XML styles or even CSS, Scaloid can assign some actions to the component (see <code>onclick(toast(...))</code>), or can do anything that you imagine. 
Also, you can easily override the property individually, as shown in the example above.</p>

<p>Last thing that you may missed: These are type-safe. If you made a mistake, compiler will check it for you.</p>

<p><strong>Further readings:</strong></p>

<ul class="task-list">
<li><a href="http://blog.scaloid.org/2013/04/accessing-widgets-in-view-classes.html">Accessing widgets in view class</a></li>
<li><a href="http://blog.scaloid.org/2013/01/a-css-like-styling-on-android.html">In-depth tutorial on styles</a></li>
</ul><h2>
<a name="user-content-traits" class="anchor" href="#traits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Traits</h2>

<h3>
<a name="user-content-trait-unregisterreceiver" class="anchor" href="#trait-unregisterreceiver" aria-hidden="true"><span class="octicon octicon-link"></span></a>Trait <code>UnregisterReceiver</code>
</h3>

<p>When you register <code>BroadcastReceiver</code> with <code>Context.registerReceiver()</code> you have to unregister it to prevent memory leak. Trait <code>UnregisterReceiver</code> handles these chores for you. All you need to do is append the trait to your class.</p>

<div class="highlight highlight-scala"><pre><span class="k">class</span> <span class="nc">MyService</span> <span class="k">extends</span> <span class="nc">SService</span> <span class="k">with</span> <span class="nc">UnregisterReceiver</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">func</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// ...</span>
    <span class="n">registerReceiver</span><span class="o">(</span><span class="n">receiver</span><span class="o">,</span> <span class="n">intentFilter</span><span class="o">)</span>
    <span class="c1">// Done! automatically unregistered at UnregisterReceiverService.onDestroy()</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<h3>
<a name="user-content-trait-scontext" class="anchor" href="#trait-scontext" aria-hidden="true"><span class="octicon octicon-link"></span></a>Trait <code>SContext</code>
</h3>

<p>Trait <code>SContext</code> includes several shortcuts for frequently used android idioms, and inherits <code>TagUtil</code>.</p>

<h5>
<a name="user-content-starting-activity" class="anchor" href="#starting-activity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Starting activity</h5>

<div class="highlight highlight-scala"><pre><span class="n">startActivity</span><span class="o">(</span><span class="k">new</span> <span class="nc">Intent</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">classOf</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">]))</span>
</pre></div>

<p>is reduced to:</p>

<div class="highlight highlight-scala"><pre><span class="n">startActivity</span><span class="o">[</span><span class="kt">MyActivity</span><span class="o">]</span>
</pre></div>

<h3>
<a name="user-content-trait-sactivity" class="anchor" href="#trait-sactivity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Trait <code>SActivity</code>
</h3>

<p>Instead of</p>

<div class="highlight highlight-scala"><pre><span class="n">findViewById</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">login</span><span class="o">).</span><span class="n">asInstanceOf</span><span class="o">[</span><span class="kt">Button</span><span class="o">]</span>
</pre></div>

<p>use a shorthand:</p>

<div class="highlight highlight-scala"><pre><span class="n">find</span><span class="o">[</span><span class="kt">Button</span><span class="o">](</span><span class="n">R</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">login</span><span class="o">)</span>
</pre></div>

<p>Although we provide this shorthand, Scaloid recommends <a href="https://github.com/pocorall/scaloid/wiki/UI-Layout-without-XML">programmatically laying out UI, not with XML</a>.</p>

<h2>
<a name="user-content-activity-as-an-implicit-parameter" class="anchor" href="#activity-as-an-implicit-parameter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Activity as an implicit parameter</h2>

<p>Similar to the <a href="#context-as-an-implicit-parameter">implicit context</a>, an <code>Activity</code> typed implicit parameter is also required for some methods. Therefore, you have to define an activity as an implicit value:</p>

<div class="highlight highlight-scala"><pre><span class="k">implicit</span> <span class="k">val</span> <span class="n">ctx</span><span class="k">:</span> <span class="kt">Activity</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>

<p>Because the class <code>Activity</code> is a subclass of <code>Context</code>, it can also be an implicit context.
When you extend <code>SActivity</code>, object <code>this</code> is assigned as the implicit activity by default.</p>

<p>Here we show some example cases of using the implicit activity:</p>

<h4>
<a name="user-content-automatically-allocate-a-unique-view-id" class="anchor" href="#automatically-allocate-a-unique-view-id" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automatically allocate a unique <code>View</code> ID</h4>

<p>Often, <code>Views</code> are required to have an ID value. Although Android API document specifies that the ID need not be unique, allocating unique ID is virtually mandatory in practice. Scaloid provides a package scope function <code>getUniqueId</code>, which returns <code>Int</code> type ID that is not allocated by any existing <code>View</code> components for given implicit activity.</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">newUniqueIdForCurrentActivity</span> <span class="k">=</span> <span class="n">getUniqueId</span>
</pre></div>

<p>Using this, Scaloid also extended <code>View</code> class to add a method <code>uniqueId</code>, that assigns a new unique ID if it is not already allocated. </p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">uniqueIdOfMyView</span> <span class="k">=</span> <span class="n">myView</span><span class="o">.</span><span class="n">uniqueId</span>
</pre></div>

<p>One of the good use case of <code>uniqueId</code> is <code>SRelativeLayout</code>. Some of the methods in this layout context, such as <code>below</code>, <code>above</code>, <code>leftOf</code> and <code>rightOf</code>, takes another <code>View</code> object as an anchor:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">SRelativeLayout</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">btn</span> <span class="k">=</span> <span class="nc">SButton</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">hi</span><span class="o">)</span>
  <span class="nc">SButton</span><span class="o">(</span><span class="s">"There"</span><span class="o">).&lt;&lt;.</span><span class="n">below</span><span class="o">(</span><span class="n">btn</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p>Here we show the implementation of the <code>below</code> function:</p>

<div class="highlight highlight-scala"><pre><span class="k">def</span> <span class="n">below</span><span class="o">(</span><span class="n">anchor</span><span class="k">:</span> <span class="kt">View</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">activity</span><span class="k">:</span> <span class="kt">Activity</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
  <span class="n">addRule</span><span class="o">(</span><span class="nc">RelativeLayout</span><span class="o">.</span><span class="nc">BELOW</span><span class="o">,</span> <span class="n">anchor</span><span class="o">.</span><span class="n">uniqueId</span><span class="o">)</span>
  <span class="k">this</span>
<span class="o">}</span>
</pre></div>

<p>A new unique ID is assigned to the <code>anchor</code> if it is not assigned already, and passes it to <code>addRule</code> function. </p>

<h2>
<a name="user-content-logging" class="anchor" href="#logging" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logging</h2>

<p>Unlike other logging frameworks, Android Logging API requires a <code>String</code> tag for every log call. We eliminate this by introducing an implicit parameter. Define an implicit value type of <code>LoggerTag</code> as shown:</p>

<div class="highlight highlight-scala"><pre><span class="k">implicit</span> <span class="k">val</span> <span class="n">loggerTag</span> <span class="k">=</span> <span class="nc">LoggerTag</span><span class="o">(</span><span class="s">"MyAppTag"</span><span class="o">)</span>
</pre></div>

<p>or, extend trait <code>TagUtil</code> or <code>SContext</code> which defines the tag by default. Then you can simply log like this:</p>

<div class="highlight highlight-scala"><pre><span class="n">warn</span><span class="o">(</span><span class="s">"Something happened!"</span><span class="o">)</span>
</pre></div>

<p>Other functions for every log level (<code>verbose()</code>, <code>debug()</code>, <code>info()</code>, <code>warn()</code>, <code>error()</code> and <code>wtf()</code>) are available.</p>

<div class="highlight highlight-scala"><pre><span class="n">info</span><span class="o">(</span><span class="s">"hello "</span> <span class="o">+</span> <span class="n">world</span><span class="o">)</span>
</pre></div>

<p>A <code>String</code> parameter passed with <code>info()</code> is a by-name parameter, so it is evaluated only if the logging is possible. Therefore, the example shown above is equivalent to:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">tag</span> <span class="k">=</span> <span class="s">"MyAppTag"</span>
<span class="k">if</span><span class="o">(</span><span class="nc">Log</span><span class="o">.</span><span class="n">isLoggable</span><span class="o">(</span><span class="n">tag</span><span class="o">,</span> <span class="nc">Log</span><span class="o">.</span><span class="nc">INFO</span><span class="o">))</span> <span class="nc">Log</span><span class="o">.</span><span class="n">i</span><span class="o">(</span><span class="n">tag</span><span class="o">,</span> <span class="s">"hello "</span> <span class="o">+</span> <span class="n">world</span><span class="o">)</span>
</pre></div>

<h2>
<a name="user-content-scala-getters-and-setters" class="anchor" href="#scala-getters-and-setters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scala getters and setters</h2>

<p>You can use any of the setters listed below:</p>

<ul class="task-list">
<li>
<code>obj.setText("Hello")</code> Java bean style</li>
<li>
<code>obj.text = "Hello"</code> Assignment style</li>
<li>
<code>obj text "Hello"</code> DSL style</li>
<li>
<code>obj.text("Hello")</code> Method calling style</li>
</ul><p>Compared to Java style getters and setters, for example:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">TextView</span><span class="o">(</span><span class="n">context</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">setText</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span>
  <span class="n">setTextSize</span><span class="o">(</span><span class="mi">15</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>

<p>that of Scala style clearly reveals the nature of the operations as shown below:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">STextView</span> <span class="o">{</span>
  <span class="n">text</span> <span class="k">=</span> <span class="s">"Hello"</span>
  <span class="n">textSize</span> <span class="k">=</span> <span class="mi">15</span>
<span class="o">}</span>
</pre></div>

<p>Or, you can also chain the setters:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">STextView</span> <span class="n">text</span> <span class="s">"Hello"</span> <span class="n">textSize</span> <span class="mi">15</span>
</pre></div>

<p>which is a syntactic sugar for:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">STextView</span><span class="o">.</span><span class="n">text</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">).</span><span class="n">textSize</span><span class="o">(</span><span class="mi">15</span><span class="o">)</span>
</pre></div>

<p>We recommend "assignment style" and "DSL style". Use assignment style when you emphasize that you are assigning something, or use DSL style when the code length of the assignee is short and needs to be chained.</p>

<p>Note: Using <code>.apply(String)</code> method on object <code>STextView</code>, you can further reduce the code above like this:</p>

<div class="highlight highlight-scala"><pre><span class="nc">STextView</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">)</span> <span class="n">textSize</span> <span class="mi">15</span>
</pre></div>

<p><strong>Further readings:</strong></p>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-return-value-of-setters">Return value of setters</a></li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-prefixed-classes">Prefixed classes</a></li>
<li><a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-sweet-little-sugar">Sweet-little sugar</a></li>
</ul><h2>
<a name="user-content-classes" class="anchor" href="#classes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Classes</h2>

<h3>
<a name="user-content-class-alertdialogbuilder" class="anchor" href="#class-alertdialogbuilder" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class <code>AlertDialogBuilder</code>
</h3>

<p>A Scala-style builder for AlertDialog.</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">AlertDialogBuilder</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">title</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">message</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">neutralButton</span><span class="o">()</span>
<span class="o">}.</span><span class="n">show</span><span class="o">()</span>
</pre></div>

<p>This displays an alert dialog with given string resources. We provide an equivalent shortcut:</p>

<div class="highlight highlight-scala"><pre><span class="n">alert</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">title</span><span class="o">,</span> <span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">message</span><span class="o">)</span>
</pre></div>

<p>Also you can build a more complex dialog:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">AlertDialogBuilder</span><span class="o">(</span><span class="s">"Exit the app"</span><span class="o">,</span> <span class="s">"Do you really want to exit?"</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">positiveButton</span><span class="o">(</span><span class="s">"Exit"</span><span class="o">,</span> <span class="n">finishTheApplication</span><span class="o">())</span>
  <span class="n">negativeButton</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">cancel</span><span class="o">)</span>
<span class="o">}.</span><span class="n">show</span><span class="o">()</span>
</pre></div>

<p>The code above is equivalent to:</p>

<div class="highlight highlight-scala"><pre><span class="k">new</span> <span class="nc">AlertDialog</span><span class="o">.</span><span class="nc">Builder</span><span class="o">(</span><span class="n">context</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setTitle</span><span class="o">(</span><span class="s">"Exit the app"</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setMessage</span><span class="o">(</span><span class="s">"Do you really want to exit?"</span><span class="o">)</span>
  <span class="o">.</span><span class="n">setPositiveButton</span><span class="o">(</span><span class="s">"Exit"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">DialogInterface</span><span class="o">.</span><span class="nc">OnClickListener</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">onClick</span><span class="o">(</span><span class="n">dialog</span><span class="k">:</span> <span class="kt">DialogInterface</span><span class="o">,</span> <span class="n">which</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">finishTheApplication</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">})</span>
  <span class="o">.</span><span class="n">setNegativeButton</span><span class="o">(</span><span class="n">android</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">string</span><span class="o">.</span><span class="n">cancel</span><span class="o">,</span> <span class="k">new</span> <span class="nc">DialogInterface</span><span class="o">.</span><span class="nc">OnClickListener</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">onClick</span><span class="o">(</span><span class="n">dialog</span><span class="k">:</span> <span class="kt">DialogInterface</span><span class="o">,</span> <span class="n">which</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">dialog</span><span class="o">.</span><span class="n">cancel</span><span class="o">()</span>
    <span class="o">}</span>
  <span class="o">}).</span><span class="n">show</span><span class="o">()</span>
</pre></div>

<p>When you call <code>show()</code> or <code>alert</code> from non-UI thread, you <a href="https://github.com/pocorall/scaloid/wiki/Basics#wiki-asynchronous-task-processing">don't have to mind about threading</a>.</p>

<h3>
<a name="user-content-class-sarrayadapter" class="anchor" href="#class-sarrayadapter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class <code>SArrayAdapter</code>
</h3>

<p>Suppose you want to let the user selects a string from spinner, and larger font should be displayed in the dropdown list.
Then the plain-old Android code is consisted of a chunk of XML and its wiring:</p>

<div class="highlight highlight-XML"><pre><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;TextView</span> <span class="na">xmlns:android=</span><span class="s">"http://schemas.android.com/apk/res/android"</span>
    <span class="na">style=</span><span class="s">"?android:attr/spinnerDropDownItemStyle"</span>
    <span class="na">android:id=</span><span class="s">"@+id/spinner_textview"</span>
    <span class="na">android:layout_width=</span><span class="s">"fill_parent"</span>
    <span class="na">android:layout_height=</span><span class="s">"wrap_content"</span>
    <span class="na">android:textSize=</span><span class="s">"25 dip"</span> <span class="nt">/&gt;</span>
</pre></div>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">adapter</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">ArrayAdapter</span><span class="o">(</span><span class="n">context</span><span class="o">,</span> <span class="n">android</span><span class="o">.</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">simple_spinner_item</span><span class="o">,</span> <span class="nc">Array</span><span class="o">(</span><span class="s">"One"</span><span class="o">,</span> <span class="s">"Two"</span><span class="o">,</span> <span class="s">"Three"</span><span class="o">))</span>
<span class="n">adapter</span><span class="o">.</span><span class="n">setDropDownViewResource</span><span class="o">(</span><span class="n">R</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">spinner_dropdown</span><span class="o">)</span>
</pre></div>

<p>In Scaloid, a directly equivalent code is:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SArrayAdapter</span><span class="o">(</span><span class="s">"One"</span><span class="o">,</span> <span class="s">"Two"</span><span class="o">,</span> <span class="s">"Three"</span><span class="o">).</span><span class="n">dropDownStyle</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">textSize</span><span class="o">(</span><span class="mi">25</span> <span class="n">dip</span><span class="o">))</span>
</pre></div>

<p>If you want to let the text color in the spinner be blue, use the <code>style</code> method:</p>

<div class="highlight highlight-scala"><pre><span class="nc">SArrayAdapter</span><span class="o">(</span><span class="s">"Quick"</span><span class="o">,</span> <span class="s">"Brown"</span><span class="o">,</span> <span class="s">"Fox"</span><span class="o">).</span><span class="n">style</span><span class="o">(</span><span class="k">_</span><span class="o">.</span><span class="n">textColor</span><span class="o">(</span><span class="nc">Color</span><span class="o">.</span><span class="nc">BLUE</span><span class="o">))</span>
</pre></div>

<p>Can it be simpler?</p>

<h3>
<a name="user-content-class-localservice" class="anchor" href="#class-localservice" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class <code>LocalService</code>
</h3>

<p><a href="http://developer.android.com/guide/components/bound-services.html">Android Developer Guide on service binding</a> says that we have to write more than 60 lines of code to define and bind an in-process service. 
With Scaloid, you can concisely define and access local service as shown below:</p>

<div class="highlight highlight-scala"><pre><span class="k">class</span> <span class="nc">MyService</span> <span class="k">extends</span> <span class="nc">LocalService</span> <span class="o">{</span>
  <span class="k">private</span> <span class="k">val</span> <span class="n">generator</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Random</span><span class="o">()</span>

  <span class="k">def</span> <span class="n">getRandomNumber</span><span class="o">()</span> <span class="k">=</span> <span class="n">generator</span><span class="o">.</span><span class="n">nextInt</span><span class="o">(</span><span class="mi">100</span><span class="o">)</span>
<span class="o">}</span>

<span class="k">class</span> <span class="nc">Activity</span> <span class="k">extends</span> <span class="nc">SActivity</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">random</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">LocalServiceConnection</span><span class="o">[</span><span class="kt">MyService</span><span class="o">]</span>

  <span class="k">def</span> <span class="n">onButtonClick</span><span class="o">(</span><span class="n">v</span><span class="k">:</span><span class="kt">View</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">random</span><span class="o">(</span> <span class="n">s</span> <span class="k">=&gt;</span> <span class="n">toast</span><span class="o">(</span><span class="s">"number: "</span> <span class="o">+</span> <span class="n">s</span><span class="o">.</span><span class="n">getRandomNumber</span><span class="o">()))</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>

<p><strong>Further reading:</strong> Refer to <a href="http://blog.scaloid.org/2013/03/introducing-localservice.html">this blog post</a> to see why this is awesome in compared with the existing method.</p>

<h3>
<a name="user-content-class-preferences" class="anchor" href="#class-preferences" aria-hidden="true"><span class="octicon octicon-link"></span></a>Class <code>Preferences</code>
</h3>

<p>Instead of accesing SharedPreference directly:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">ec</span> <span class="k">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">getInt</span><span class="o">(</span><span class="s">"executionCount"</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span>
<span class="k">val</span> <span class="n">editor</span> <span class="k">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">edit</span><span class="o">()</span>
<span class="n">editor</span><span class="o">.</span><span class="n">putInt</span><span class="o">(</span><span class="s">"executionCount"</span><span class="o">,</span> <span class="n">ec</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span>
<span class="n">editor</span><span class="o">.</span><span class="n">commit</span><span class="o">()</span>
</pre></div>

<p>You can rewrite it as shown below:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">ec</span> <span class="k">=</span> <span class="n">pref</span><span class="o">.</span><span class="n">executionCount</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span>
<span class="n">pref</span><span class="o">.</span><span class="n">executionCount</span> <span class="k">=</span> <span class="n">ec</span> <span class="o">+</span> <span class="mi">1</span>
</pre></div>

<p>If you are confortable with <code>Option</code>, access like this:</p>

<div class="highlight highlight-scala"><pre><span class="k">val</span> <span class="n">ec</span><span class="k">:</span><span class="kt">Option</span><span class="o">[</span><span class="kt">Int</span><span class="o">]</span> <span class="k">=</span> <span class="n">pref</span><span class="o">.</span><span class="nc">Int</span><span class="o">.</span><span class="n">executionCount</span>
</pre></div>

<p><strong>Further reading:</strong></p>

<ul class="task-list">
<li><a href="http://blog.scaloid.org/2013/03/dynamicly-accessing-sharedpreferences.html">In-depth look at Scaloid Preferences</a></li>
<li><a href="http://blog.scaloid.org/2013/03/prompt-user-to-rate-your-android-app.html">A simple example: Prompt user to rate your app</a></li>
</ul><h2>
<a name="user-content-extending-view-class" class="anchor" href="#extending-view-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extending View class</h2>

<p>Often we need to define a custom view widget for a specific requirement.
To do this, we define a class that inherits <code>android.widget.View</code> class or its subclass (e.g. <code>TextView</code> and <code>Button</code>).
To enable Scaloid extensions for this custom widget, you can define a class as follows:</p>

<div class="highlight highlight-scala"><pre><span class="k">class</span> <span class="nc">MyView</span><span class="o">(</span><span class="k">implicit</span> <span class="n">ctx</span><span class="k">:</span> <span class="kt">Context</span><span class="o">)</span> <span class="k">extends</span> <span class="nc">View</span><span class="o">(</span><span class="n">ctx</span><span class="o">)</span> <span class="k">with</span> <span class="nc">TraitView</span><span class="o">[</span><span class="kt">MyView</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">basis</span> <span class="k">=</span> <span class="k">this</span>

  <span class="c1">// custom code for MyView here</span>
<span class="o">}</span>
</pre></div>

<h2>
<a name="user-content-static-fields-on-protected-interfaces" class="anchor" href="#static-fields-on-protected-interfaces" aria-hidden="true"><span class="octicon octicon-link"></span></a>Static fields on protected interfaces</h2>

<p>Android API has some protected interfaces which has static fields, and inherited it in public classes. For example <code>android.provider.ContactsContract.Contacts</code> inherits a protected interface <code>android.provider.ContactsContract.ContactsColumns</code>, which defines a static field <code>ContactsColumns.DISPLAY_NAME</code>. In Java code, you can access to it with <code>Contacts.DISPLAY_NAME</code>. However, Scala does not support accessing in this way (please refer <a href="https://issues.scala-lang.org/browse/SI-1806">this</a> and <a href="http://www.scala-lang.org/faq/4">this</a>). It is bad news for an Android-Scala programmer. So we provide a workaround implementation for this problem. Declare <code>import org.scaloid.Workarounds._</code>. Then you can use the interfaces publicly which is originally defined as protected.</p>

<h2>
<a name="user-content-lets-make-it-together" class="anchor" href="#lets-make-it-together" aria-hidden="true"><span class="octicon octicon-link"></span></a>Let's make it together!</h2>

<p>Scaloid is an Apache licensed project. 
If you have any idea to improve Scaloid, feel free to open issues or post patches.
If you want look into inside of Scaloid, this document would be helpful:</p>

<ul class="task-list">
<li><a href="https://github.com/pocorall/scaloid/wiki/Inside-Scaloid">Inside Scaloid</a></li>
</ul><h3>
<a name="user-content-list-of-projects-using-scaloid" class="anchor" href="#list-of-projects-using-scaloid" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://github.com/pocorall/scaloid/wiki/Appendix#wiki-list-of-projects-using-scaloid">List of projects using Scaloid</a>
</h3>

<h3>
<a name="user-content-we-are-hiring" class="anchor" href="#we-are-hiring" aria-hidden="true"><span class="octicon octicon-link"></span></a>We are hiring!</h3>

<p>The company behind Scaloid, onsquare is hiring Scala developers.
We are building <a href="https://play.google.com/store/apps/details?id=com.soundcorset.client.android">a music app</a> and other amazing products.
We extensively uses Scaloid in our product, and probably it is the best reference of Scaloid application.
For more information about our company, please refer to our website <a href="http://o-n2.com">http://o-n2.com</a> .
Please send us your CV via email if you are interested in working at onsqure.
We are located at Incheon, Korea.
<a href="mailto:pocorall@gmail.com">pocorall@gmail.com</a></p></article></div>
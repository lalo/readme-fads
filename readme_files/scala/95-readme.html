<div class="announce instapaper_body rst" data-path="README.rst" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-scalariform" class="anchor" href="#scalariform" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scalariform</h1>
<p>Scalariform is a code formatter for Scala. It's available as a
library, a stand-alone command line tool, or via integrations with
various editors and build tools (listed below).</p>
<p>The plan is to add preferences and features as and when people ask for
them, so please do raise a Github issue if it doesn't format your code
the way you'd like it, and I'll see what I can do.</p>
<p>Scalariform is licenced under <a href="http://www.opensource.org/licenses/mit-license.php">The MIT Licence</a>.</p>
<h2>
<a name="user-content-integration-with-eclipse" class="anchor" href="#integration-with-eclipse" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with Eclipse</h2>
<p>Scala IDE for Eclipse uses Scalariform for code formatting:</p>
<ul>
<li>Right click in the editor -&gt; Source -&gt; Format</li>
<li>Press Ctrl-Shift-F</li>
</ul><p>If you select some lines, only those will be formatted.</p>
<p>You can also configure formatting to be run as a save action (Window -&gt; Preferences -&gt; Java -&gt; Editor -&gt; Save Actions).</p>
<p>To set preferences, go to Window -&gt; Preferences -&gt; Scala -&gt; Formatter</p>
<h2>
<a name="user-content-integration-with-emacsensime" class="anchor" href="#integration-with-emacsensime" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with Emacs/ENSIME</h2>
<p>"<a href="http://github.com/aemoncannon/ensime">ENSIME</a> uses the Scalariform library to format Scala sources. Type C-c C-v f to format the current buffer."</p>
<blockquote>
<a href="http://aemon.com/file_dump/ensime_manual.html#tth_sEc4.8">http://aemon.com/file_dump/ensime_manual.html#tth_sEc4.8</a>
</blockquote>
<h2>
<a name="user-content-integration-with-jedit" class="anchor" href="#integration-with-jedit" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with jEdit</h2>
<p>See <a href="http://github.com/StefanE/ScalaSidekick">ScalaSidekick</a> by Stefan Ettrup:</p>
<p>Run Plugins -&gt; scalaSidekickPlugin -&gt; Format Scala File</p>
<h2>
<a name="user-content-integration-with-maven" class="anchor" href="#integration-with-maven" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with Maven</h2>
<p>There is a Maven plugin to run Scalariform contributed by <a href="https://github.com/jadamcrain">Adam
Crain</a> on scala-tools.</p>
<p>Usage:</p>
<pre>
&lt;plugin&gt;
  &lt;groupId&gt;org.scalariform&lt;/groupId&gt;
  &lt;artifactId&gt;scalariform-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;0.1.4&lt;/version&gt;
  &lt;executions&gt;
    &lt;execution&gt;
      &lt;phase&gt;process-sources&lt;/phase&gt;
      &lt;goals&gt;
        &lt;goal&gt;format&lt;/goal&gt;
      &lt;/goals&gt;
      &lt;configuration&gt;
        &lt;rewriteArrowSymbols&gt;true&lt;/rewriteArrowSymbols&gt;
      &lt;/configuration&gt;
    &lt;/execution&gt;
  &lt;/executions&gt;
&lt;/plugin&gt;
</pre>
<h2>
<a name="user-content-integration-with-sbt" class="anchor" href="#integration-with-sbt" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with sbt</h2>
<p><a href="http://github.com/olim7t/sbt-scalariform">sbt-scalariform</a>, written by Olivier Michallat, provides an sbt plugin contributing formatting actions for sbt 0.7.x.</p>
<p>A version for sbt 0.10.x has been written by Peter Vlugter: <a href="https://github.com/typesafehub/sbt-scalariform">https://github.com/typesafehub/sbt-scalariform</a></p>
<h2>
<a name="user-content-integration-with-textmate" class="anchor" href="#integration-with-textmate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration with TextMate</h2>
<p>See Mads Jensen's Scala TextMate bundle:</p>
<blockquote>
<a href="http://github.com/mads379/scala.tmbundle">http://github.com/mads379/scala.tmbundle</a>
</blockquote>
<p>Reformat using Ctrl-Shift-H.</p>
<h2>
<a name="user-content-use-with-vim" class="anchor" href="#use-with-vim" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use with Vim</h2>
<p>While there is no specific Vim integration at present, you can use
Scalariform as an external formatter for the <tt>gq</tt> command by adding
the following to <tt>.vimrc</tt></p>
<pre>
au BufEnter *.scala setl formatprg=/path/to/scalariform.jar\ --stdin\ --stdout
</pre>
<p>The executable scalariform.jar can be downloaded from:</p>
<blockquote>
<a href="https://s3.amazonaws.com/scalariform/scalariform.jar">https://s3.amazonaws.com/scalariform/scalariform.jar</a>
</blockquote>
<h2>
<a name="user-content-command-line-tool" class="anchor" href="#command-line-tool" aria-hidden="true"><span class="octicon octicon-link"></span></a>Command line tool</h2>
<blockquote>
<a href="https://github.com/mdr/scalariform/wiki/Command-line-tool">https://github.com/mdr/scalariform/wiki/Command-line-tool</a>
</blockquote>
<h2>
<a name="user-content-library" class="anchor" href="#library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Library</h2>
<blockquote>
<a href="https://github.com/mdr/scalariform/wiki/Library">https://github.com/mdr/scalariform/wiki/Library</a>
</blockquote>
<h2>
<a name="user-content-preferences" class="anchor" href="#preferences" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preferences</h2>
<h3>
<a name="user-content-alignparameters" class="anchor" href="#alignparameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>alignParameters</h3>
<p>Default: <tt>false</tt></p>
<p>Align class/function parameters in the same column. For example, if <tt>false</tt>, then:</p>
<pre>
class Person(name: String,
  age: Int,
  birthdate: Date,
  astrologicalSign: String,
  shoeSize: Int,
  favoriteColor: java.awt.Color)
</pre>
<p>If <tt>true</tt>, then:</p>
<pre>
class Person(name: String,
             age: Int,
             birthdate: Date,
             astrologicalSign: String,
             shoeSize: Int,
             favoriteColor: java.awt.Color)
</pre>
<p>This option is disabled if <tt>indentWithTabs</tt> is <tt>true</tt>.</p>
<h3>
<a name="user-content-alignsinglelinecasestatements" class="anchor" href="#alignsinglelinecasestatements" aria-hidden="true"><span class="octicon octicon-link"></span></a>alignSingleLineCaseStatements</h3>
<p>Default: <tt>false</tt></p>
<p>Align the arrows of consecutive single-line case statements. For example, if <tt>true</tt>, then:</p>
<pre>
a match {
  case b =&gt; 1
  case ccc =&gt; 2
  case dd =&gt; 3
}
</pre>
<p>Is reformatted as:</p>
<pre>
a match {
  case b   =&gt; 1
  case ccc =&gt; 2
  case dd  =&gt; 3
}
</pre>
<p>This option is disabled if <tt>indentWithTabs</tt> is <tt>true</tt>.</p>
<h3>
<a name="user-content-alignsinglelinecasestatementsmaxarrowindent" class="anchor" href="#alignsinglelinecasestatementsmaxarrowindent" aria-hidden="true"><span class="octicon octicon-link"></span></a>alignSingleLineCaseStatements.maxArrowIndent</h3>
<p>Default: <tt>40</tt></p>
<p>When <tt>alignSingleLineCaseStatements</tt> is <tt>true</tt>, this is a limit on
the number of spaces that can be inserted before an arrow to align it
with other case statements. This can be used to avoid very large gaps,
e.g.:</p>
<pre>
a match {
  case Some(wibble, wobble) if wibble + wibble &gt; wobble * wibble =&gt; 1
  case ccc                                                       =&gt; 2
}
</pre>
<h3>
<a name="user-content-compactcontrolreadability" class="anchor" href="#compactcontrolreadability" aria-hidden="true"><span class="octicon octicon-link"></span></a>compactControlReadability</h3>
<p>Default: <tt>false</tt></p>
<p>When <tt>compactControlReadability</tt> is <tt>true</tt>, <tt>if</tt>/<tt>else</tt> and
<tt>try</tt>/<tt>catch</tt>/<tt>finally</tt> control structures will be formatted
using <a href="http://en.wikipedia.org/wiki/Indent_style#Compact_Control_Readability_style">Compact Control Readability</a> style:</p>
<blockquote>
<dl>
<dt>if (x == y) {</dt>
<dd>foo()</dd>
</dl>
<p>}
else if (y == z) {</p>
<blockquote>
bar()</blockquote>
<p>}
else {</p>
<blockquote>
baz()</blockquote>
<p>}</p>
<dl>
<dt>try {</dt>
<dd>foo()</dd>
</dl>
<p>}
catch {</p>
<blockquote>
case _ =&gt; bar()</blockquote>
<p>}
finally {</p>
<blockquote>
baz()</blockquote>
<p>}</p>
</blockquote>
<h3>
<a name="user-content-compactstringconcatenation" class="anchor" href="#compactstringconcatenation" aria-hidden="true"><span class="octicon octicon-link"></span></a>compactStringConcatenation</h3>
<p>Default: <tt>false</tt></p>
<p>Omit spaces when formatting a '+' operator on String literals. For example, If <tt>false</tt>, then:</p>
<pre>
"Hello " + name + "!"
</pre>
<p>If <tt>true</tt>, then:</p>
<pre>
"Hello "+name+"!"
</pre>
<p>The Scala Style Guide <a href="http://davetron5000.github.com/scala-style/method_invocation/operators.html">recommends</a> that operators, "should always be
invoked using infix notation with spaces separated the target".</p>
<h3>
<a name="user-content-doubleindentclassdeclaration" class="anchor" href="#doubleindentclassdeclaration" aria-hidden="true"><span class="octicon octicon-link"></span></a>doubleIndentClassDeclaration</h3>
<p>Default: <tt>false</tt></p>
<p>With this set to <tt>true</tt>, class (and trait / object) declarations
will be formatted as recommended by the <a href="http://davetron5000.github.com/scala-style/">Scala Style Guide</a>. That is,
if the declaration section spans multiple lines, it will be formatted
so that either the parameter section or the inheritance section is
doubly indented. This provides a visual distinction from the members
of the class. For example:</p>
<pre>
class Person(
  name: String,
  age: Int,
  birthdate: Date,
  astrologicalSign: String,
  shoeSize: Int,
  favoriteColor: java.awt.Color)
    extends Entity
    with Logging
    with Identifiable
    with Serializable {
  def firstMethod = ...
}
</pre>
<p>Or:</p>
<pre>
class Person(
    name: String,
    age: Int,
    birthdate: Date,
    astrologicalSign: String,
    shoeSize: Int,
    favoriteColor: java.awt.Color) {
  def firstMethod = ...
}
</pre>
<h3>
<a name="user-content-formatxml" class="anchor" href="#formatxml" aria-hidden="true"><span class="octicon octicon-link"></span></a>formatXml</h3>
<p>Default: <tt>true</tt></p>
<p>Format embedded XML literals; if <tt>false</tt> they will be left untouched.</p>
<h3>
<a name="user-content-indentlocaldefs" class="anchor" href="#indentlocaldefs" aria-hidden="true"><span class="octicon octicon-link"></span></a>indentLocalDefs</h3>
<p>Default: <tt>false</tt></p>
<p>If <tt>true</tt>, indent local methods an extra level, with the intention of distinguishing them from other statements. For example,:</p>
<pre>
class A {
  def find(...) = {
    val x = ...
      def find0() = {
        ...
      }
    find0(...)
  }
}
</pre>
<h3>
<a name="user-content-indentpackageblocks" class="anchor" href="#indentpackageblocks" aria-hidden="true"><span class="octicon octicon-link"></span></a>indentPackageBlocks</h3>
<p>Default: <tt>true</tt></p>
<p>Whether to indent package blocks. For example, if <tt>true</tt>:</p>
<pre>
package foo {
  package bar {
    class Baz
  }
}
</pre>
<p>Else if <tt>false</tt>:</p>
<pre>
package foo {
package bar {
class Baz
}
}
</pre>
<h3>
<a name="user-content-indentspaces" class="anchor" href="#indentspaces" aria-hidden="true"><span class="octicon octicon-link"></span></a>indentSpaces</h3>
<p>Default: <tt>2</tt></p>
<p>The number of spaces to use for each level of indentation.</p>
<p>This option is ignored if <tt>indentWithTabs</tt> is <tt>true</tt>.</p>
<h3>
<a name="user-content-indentwithtabs" class="anchor" href="#indentwithtabs" aria-hidden="true"><span class="octicon octicon-link"></span></a>indentWithTabs</h3>
<p>Default: <tt>false</tt></p>
<p>Use a tab for each level of indentation. When set to <tt>true</tt>, this
ignores any setting given for <tt>indentSpaces</tt>. In addition, for the
moment, <tt>alignSingleLineCaseStatements</tt> and <tt>alignParameters</tt>
options are not supported when indenting with tabs, and XML
indentation is handled differently.</p>
<h3>
<a name="user-content-multilinescaladoccommentsstartonfirstline" class="anchor" href="#multilinescaladoccommentsstartonfirstline" aria-hidden="true"><span class="octicon octicon-link"></span></a>multilineScaladocCommentsStartOnFirstLine</h3>
<p>Default: <tt>false</tt></p>
<p>If <tt>true</tt>, start a multi-line Scaladoc comment body on same line as the opening comment delimiter:</p>
<pre>
/** This method applies f to each
 *  element of the given list.
 */
</pre>
<p>If <tt>false</tt>, start the comment body on a separate line below the opening delimiter:</p>
<pre>
/**
 * This method applies f to each
 * element of the given list.
 */
</pre>
<h3>
<a name="user-content-preservedanglingcloseparenthesis" class="anchor" href="#preservedanglingcloseparenthesis" aria-hidden="true"><span class="octicon octicon-link"></span></a>preserveDanglingCloseParenthesis</h3>
<p>Default: <tt>false</tt></p>
<p>If <tt>true</tt>, it will keep a newline before a close parenthesis ')' in an
argument expression. For example:</p>
<pre>
val book = Book(
  name = "Name",
  author = "Author",
  rating = 5
)
</pre>
<p>If <tt>false</tt>, the parenthesis will be joined to the end of the argument list:</p>
<pre>
val book = Book(
  name = "Name",
  author = "Author",
  rating = 5)
</pre>
<h3>
<a name="user-content-placescaladocasterisksbeneathsecondasterisk" class="anchor" href="#placescaladocasterisksbeneathsecondasterisk" aria-hidden="true"><span class="octicon octicon-link"></span></a>placeScaladocAsterisksBeneathSecondAsterisk</h3>
<p>Default: <tt>false</tt></p>
<p>If <tt>true</tt>, Scaladoc asterisks will be placed beneath the second asterisk:</p>
<pre>
/** Wibble
  * wobble
  */
class A
</pre>
<p>Otherwise, if <tt>false</tt>, beneath the first asterisk:</p>
<pre>
/** Wibble
 *  wobble
 */
class A
</pre>
<h3>
<a name="user-content-preservespacebeforearguments" class="anchor" href="#preservespacebeforearguments" aria-hidden="true"><span class="octicon octicon-link"></span></a>preserveSpaceBeforeArguments</h3>
<p>Default: <tt>false</tt></p>
<p>If <tt>true</tt>, the formatter will keep an existing space before a parenthesis argument. For example:</p>
<pre>
stack.pop() should equal (2)
</pre>
<p>Otherwise, if <tt>false</tt>, spaces before arguments will always be removed.</p>
<h3>
<a name="user-content-rewritearrowsymbols" class="anchor" href="#rewritearrowsymbols" aria-hidden="true"><span class="octicon octicon-link"></span></a>rewriteArrowSymbols</h3>
<p>Default: <tt>false</tt></p>
<p>Replace arrow tokens with their unicode equivalents: <tt>=&gt;</tt> with <tt>⇒</tt>, and <tt>&lt;-</tt> with <tt>←</tt>. For example:</p>
<pre>
for (n &lt;- 1 to 10) n % 2 match {
  case 0 =&gt; println("even")
  case 1 =&gt; println("odd")
}
</pre>
<p>is formatted as:</p>
<pre>
for (n ← 1 to 10) n % 2 match {
  case 0 ⇒ println("even")
  case 1 ⇒ println("odd")
}
</pre>
<h3>
<a name="user-content-spacebeforecolon" class="anchor" href="#spacebeforecolon" aria-hidden="true"><span class="octicon octicon-link"></span></a>spaceBeforeColon</h3>
<p>Default: <tt>false</tt></p>
<p>Whether to ensure a space before colon. For example, If <tt>false</tt>, then:</p>
<pre>
def add(a: Int, b: Int): Int = a + b
</pre>
<p>If <tt>true</tt>, then:</p>
<pre>
def add(a : Int, b : Int) : Int = a + b
</pre>
<h3>
<a name="user-content-spaceinsidebrackets" class="anchor" href="#spaceinsidebrackets" aria-hidden="true"><span class="octicon octicon-link"></span></a>spaceInsideBrackets</h3>
<p>Default: <tt>false</tt></p>
<p>Whether to use a space inside type brackets. For example, if <tt>true</tt>, then:</p>
<pre>
Array[ String ]
</pre>
<p>If <tt>false</tt>, then:</p>
<pre>
Array[String]
</pre>
<h3>
<a name="user-content-spaceinsideparentheses" class="anchor" href="#spaceinsideparentheses" aria-hidden="true"><span class="octicon octicon-link"></span></a>spaceInsideParentheses</h3>
<p>Default: <tt>false</tt></p>
<p>Whether to use a space inside non-empty parentheses. For example, if <tt>true</tt>, then:</p>
<pre>
def main( args : Array[String] )
</pre>
<p>If <tt>false</tt>, then:</p>
<pre>
def main(args : Array[String])
</pre>
<h3>
<a name="user-content-spaceswithinpatternbinders" class="anchor" href="#spaceswithinpatternbinders" aria-hidden="true"><span class="octicon octicon-link"></span></a>spacesWithinPatternBinders</h3>
<p>Default: <tt>true</tt></p>
<p>Whether to add a space around the @ token in pattern binders. For example, if <tt>true</tt>,:</p>
<pre>
case elem @ Multi(values @ _*) =&gt;
</pre>
<p>If <tt>false</tt>,:</p>
<pre>
case elem@Multi(values@_*) =&gt;
</pre>
<h3>
<a name="user-content-scala-style-guide" class="anchor" href="#scala-style-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Scala Style Guide</h3>
<p>Scalariform is compatible with the <a href="http://davetron5000.github.com/scala-style/">Scala Style Guide</a> in the sense
that, given the right preference settings, source code that is
initially compiliant with the Style Guide will not become uncompliant
after formatting. In a number of cases, running the formatter will
make uncompliant source more compliant.</p>
<h2>
<a name="user-content-source-directives" class="anchor" href="#source-directives" aria-hidden="true"><span class="octicon octicon-link"></span></a>Source directives</h2>
<p>As well as global preferences, formatting can be tweaked at the source level through comments.</p>
<h3>
<a name="user-content-format-onoff" class="anchor" href="#format-onoff" aria-hidden="true"><span class="octicon octicon-link"></span></a>format: [ON|OFF]</h3>
<p>Disables the formatter for selective portions of a source file:</p>
<pre>
// format: OFF    &lt;-- this directive disables formatting from this point
class AsciiDSL {
  n ¦- "1" -+ { n: Node =&gt;
          n ¦- "i"
          n ¦- "ii"
          n ¦- "iii"
          n ¦- "iv"
          n ¦- "v"
  }
  n ¦- "2"
  n ¦- "3" -+ { n: Node =&gt;
          n ¦- "i"
          n ¦- "ii" -+ { n: Node =&gt;
                   n ¦- "a"
                   n ¦- "b"
                   n ¦- "c"
          }
          n ¦- "iii"
          n ¦- "iv"
          n ¦- "v"
  }
  // format: ON   &lt;-- formatter resumes from this point
  ...
}
// (see: http://dev.day.com/microsling/content/blogs/main/scalajcr2.html)
</pre>
<h3>
<a name="user-content-format--preferencename" class="anchor" href="#format--preferencename" aria-hidden="true"><span class="octicon octicon-link"></span></a>format: [+|-]&lt;preferenceName&gt;</h3>
<p>Sets a preference for the entire of the source file, overriding the global formatting settings:</p>
<pre>
// format: +preserveSpaceBeforeArguments
class StackSpec extends FlatSpec with ShouldMatchers {
  // ...
  stack.pop() should equal (2)
}
</pre></article></div>
<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><a href="https://github.com/zhongl/HouseMD/wiki/UserGuideCN">中文使用指南</a></p>

<p>HouseMD is a interactive command-line tool for dianosing Java process in runtime.
It's inspiration came from <a href="http://kenai.com/projects/btrace">BTrace</a>, but more easier to use and more safer.</p>

<h1>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h1>

<ul class="task-list">
<li>Display loaded classes information

<ul class="task-list">
<li>name</li>
<li>source file(.class or .jar)</li>
<li>classloaders</li>
</ul>
</li>
<li>Display invocation trace summary

<ul class="task-list">
<li>method full name and sign</li>
<li>class loader of method declaring class</li>
<li>total invoked times</li>
<li>avg elapse millis</li>
<li>self instance</li>
</ul>
</li>
<li>Output invocation detail

<ul class="task-list">
<li>timestamp</li>
<li>elapse millis</li>
<li>call thread</li>
<li>this object</li>
<li>class name</li>
<li>method name</li>
<li>arguments</li>
<li>result or exception</li>
</ul>
</li>
<li>Output invocation stack trace</li>
<li>Display object field value</li>
<li>Display enviroment variable</li>
<li>Auto-completion by typing <code>Tab</code>
</li>
<li>navigate command history by up and down, and support <code>Ctrl + R</code> for searching</li>
<li>Awesome features you can provide by forking me</li>
</ul><p><a href="https://github.com/zhongl/HouseMD/blob/master/src/test/scala/com/github/zhongl/housemd">Test cases</a> would show more specification details.</p>

<h1>
<a name="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started</h1>

<h2>
<a name="user-content-pre-requirement" class="anchor" href="#pre-requirement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pre-requirement</h2>

<ul class="task-list">
<li>JDK 6 </li>
<li><a href="https://github.com/harrah/xsbt">sbt</a></li>
</ul><h2>
<a name="user-content-install-from-jenv" class="anchor" href="#install-from-jenv" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from <a href="https://github.com/linux-china/jenv">jenv</a>
</h2>

<ul class="task-list">
<li>install <a href="https://github.com/linux-china/jenv">jenv</a>
</li>
<li>execute command line: <code>$ jenv install housemd</code>
</li>
</ul><blockquote>
<p>Caution: Windows are not supported yet.</p>
</blockquote>

<h1>
<a name="user-content-how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h1>

<pre><code>&gt; housemd -h
</code></pre>

<p>A help infomation shows up like:</p>

<pre><code>Usage: housemd [OPTIONS] pid
    a runtime diagnosis tool of JVM.
Options:
    -h, --help
        show help infomation of this command.
    -p, --port=[INT]
        set console local socket server port number.
        default: 54321
Parameters:
    pid
        id of process to be diagnosing.
</code></pre>

<p>Suppost your target pid is <code>1234</code> (you can use <code>jps</code> or <code>ps</code> get it), and then input:</p>

<pre><code>&gt; ./housemd 1234
</code></pre>

<p>After seen prompt <code>housemd&gt;</code>, input <code>help</code> then you get help infomation like this:</p>

<pre><code>housemd&gt; help

quit      terminate the process.
help      display this infomation.
trace     display or output infomation of method invocaton.
loaded    display loaded classes information.
env        display system env.
inspect    display fields of a class.
</code></pre>

<p>You can also input <code>help loaded</code> and get help infomation of <code>loaded</code> as blow:</p>

<pre><code>housemd&gt; help loaded
Usage: loaded [OPTIONS] name
    display loaded classes information.
Options:
    -h, --classloader-hierarchies
        display classloader hierarchies of loaded class.
Parameters:
    name
        class name without package name.
</code></pre>

<h1>
<a name="user-content-more-about-commands" class="anchor" href="#more-about-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>More about commands</h1>

<p><a href="https://github.com/zhongl/housemd/wiki/usecases">Click here</a> to see the use cases.</p>

<h1>
<a name="user-content-build-from-code" class="anchor" href="#build-from-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build from code</h1>

<pre><code>$ git clone https://github.com/zhongl/HouseMD.git housemd
$ cd housemd
$ sbt proguard
</code></pre>

<p>A runnable jar named <code>housemd_x.x.x-x.x.x.min.jar</code> should be generated blow <code>target/scala-x.x.x/</code></p>

<h2>
<a name="user-content-run-it" class="anchor" href="#run-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run it</h2>

<pre><code>$ java -Xbootclasspath/a:$JAVA_HOME/lib/tools.jar -jar housemd_x.x.x-x.x.x.min.jar [OPTIONS] &lt;pid&gt;
</code></pre>

<blockquote>
<p>Caution: In Mac OSX, the <code>-Xbootclasspath</code> is no needed.
You can created launch script as a shortcut.</p>
</blockquote>

<p>Having fun!</p></article></div>
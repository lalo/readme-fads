<div class="announce instapaper_body md" data-path="Readme.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><p>This project adds <a href="http://coffeescript.org/">CoffeeScript</a> support to vim. It covers syntax, indenting,
compiling, and more.</p>

<p><a href="https://camo.githubusercontent.com/46b7a3e121fd0f9032af3f0e7ee34f7ad5f5e22a/687474703a2f2f692e696d6775722e636f6d2f6a314268705a512e706e67" target="_blank"><img src="https://camo.githubusercontent.com/46b7a3e121fd0f9032af3f0e7ee34f7ad5f5e22a/687474703a2f2f692e696d6775722e636f6d2f6a314268705a512e706e67" alt="Screenshot" data-canonical-src="http://i.imgur.com/j1BhpZQ.png" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of Contents</h2>

<ul class="task-list">
<li>Installation

<ul class="task-list">
<li><a href="#requirements">Requirements</a></li>
<li><a href="#install-using-pathogen">Install using Pathogen</a></li>
<li><a href="#install-using-vundle">Install using Vundle</a></li>
<li><a href="#install-from-a-zip-file">Install from a Zip File</a></li>
</ul>
</li>
<li>Coffee Commands

<ul class="task-list">
<li><a href="#compile-to-javascript">Compile to JavaScript</a></li>
<li><a href="#coffeecompile-compile-coffeescript-snippets">Compile CoffeeScript Snippets</a></li>
<li><a href="#coffeewatch-live-preview-compiling">Live Preview Compiling</a></li>
<li><a href="#coffeerun-run-coffeescript-snippets">Run CoffeeScript Snippets</a></li>
<li><a href="#coffeelint-lint-your-coffeescript">Lint your CoffeeScript</a></li>
</ul>
</li>
<li>Extras

<ul class="task-list">
<li><a href="#literate-coffeescript">Literate CoffeeScript</a></li>
<li><a href="#coffeescript-in-html">CoffeeScript in HTML</a></li>
<li><a href="#coffeescript-in-haml">CoffeeScript in Haml</a></li>
</ul>
</li>
<li>Configuration

<ul class="task-list">
<li><a href="#custom-autocmds">Custom Autocmds</a></li>
<li><a href="#configuration-variables">Configuration Variables</a></li>
<li><a href="#configure-syntax-highlighting">Configure Syntax Highlighting</a></li>
<li><a href="#tune-vim-for-coffeescript">Tune Vim for CoffeeScript</a></li>
</ul>
</li>
</ul><h2>
<a name="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<ul class="task-list">
<li>vim 7.4 or later</li>
<li>coffee 1.2.0 or later</li>
</ul><h2>
<a name="user-content-install-using-pathogen" class="anchor" href="#install-using-pathogen" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install using Pathogen</h2>

<p>This project uses rolling releases based on git commits, so pathogen is a
natural fit for it. If you're already using pathogen, you can skip to step 4.</p>

<ol class="task-list">
<li><p>Install <a href="http://www.vim.org/scripts/script.php?script_id=2332">pathogen.vim</a> into <code>~/.vim/autoload/</code> (see <a href="https://github.com/tpope/vim-pathogen#installation">pathogen's
readme</a> for more information.)</p></li>
<li>
<p>Enable pathogen in your vimrc. Here's a bare-minimum vimrc that enables
all the features of <code>vim-coffee-script</code>:</p>

<div class="highlight highlight-vim"><pre><span class="k">call</span> pathogen#infect<span class="p">()</span>
<span class="nb">syntax</span> enable
<span class="k">filetype</span> plugin indent <span class="k">on</span>
</pre></div>

<p>If you already have a vimrc built up, just make sure it contains these calls,
in this order.</p>
</li>
<li>
<p>Create the directory <code>~/.vim/bundle/</code>:</p>

<pre><code>mkdir ~/.vim/bundle
</code></pre>
</li>
<li>
<p>Clone the <code>vim-coffee-script</code> repo into <code>~/.vim/bundle/</code>:</p>

<pre><code>git clone https://github.com/kchmck/vim-coffee-script.git ~/.vim/bundle/vim-coffee-script/
</code></pre>
</li>
</ol><p>Updating takes two steps:</p>

<ol class="task-list">
<li>
<p>Change into <code>~/.vim/bundle/vim-coffee-script/</code>:</p>

<pre><code>cd ~/.vim/bundle/vim-coffee-script
</code></pre>
</li>
<li>
<p>Pull in the latest changes:</p>

<pre><code>git pull
</code></pre>
</li>
</ol><h2>
<a name="user-content-install-using-vundle" class="anchor" href="#install-using-vundle" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install using Vundle</h2>

<ol class="task-list">
<li><p><a href="https://github.com/gmarik/vundle#quick-start">Install Vundle</a> into <code>~/.vim/bundle/</code>.</p></li>
<li>
<p>Configure your vimrc for Vundle. Here's a bare-minimum vimrc that enables all
the features of <code>vim-coffee-script</code>:</p>

<div class="highlight highlight-vim"><pre><span class="k">set</span> <span class="nb">nocompatible</span>
<span class="k">filetype</span> off

<span class="k">set</span> <span class="nb">rtp</span><span class="p">+=~</span><span class="sr">/.vim/</span>bundle<span class="sr">/vundle/</span>
<span class="k">call</span> vundle#rc<span class="p">()</span>

Bundle <span class="s1">'kchmck/vim-coffee-script'</span>

<span class="nb">syntax</span> enable
<span class="k">filetype</span> plugin indent <span class="k">on</span>
</pre></div>

<p>If you're adding Vundle to a built-up vimrc, just make sure all these calls
are in there and that they occur in this order.</p>
</li>
<li><p>Open vim and run <code>:BundleInstall</code>.</p></li>
</ol><p>To update, open vim and run <code>:BundleInstall!</code> (notice the bang!)</p>

<h2>
<a name="user-content-install-from-a-zip-file" class="anchor" href="#install-from-a-zip-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install from a Zip File</h2>

<ol class="task-list">
<li><p>Download the latest zip file from <a href="http://www.vim.org/scripts/script.php?script_id=3590">vim.org</a>.</p></li>
<li>
<p>Extract the archive into <code>~/.vim/</code>:</p>

<pre><code>unzip -od ~/.vim/ ARCHIVE.zip
</code></pre>

<p>This should create the files <code>~/.vim/autoload/coffee.vim</code>,
<code>~/.vim/compiler/coffee.vim</code>, etc.</p>
</li>
</ol><p>You can update the plugin using the same steps.</p>

<h2>
<a name="user-content-compile-to-javascript" class="anchor" href="#compile-to-javascript" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compile to JavaScript</h2>

<p>A <code>coffee</code> wrapper for use with <code>:make</code> is enabled automatically for coffee
files if no other compiler is loaded. To enable it manually, run</p>

<pre><code>:compiler coffee
</code></pre>

<p>The <code>:make</code> command is then configured to use the <code>coffee</code> compiler and
recognize its errors. I've included a quick reference here but be sure to check
out <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#:make_makeprg"><code>:help :make</code></a> for a full reference of the command.</p>

<p><a href="https://camo.githubusercontent.com/cd0657845a242df9980f711c5e2893f274279750/687474703a2f2f692e696d6775722e636f6d2f736355586d78522e706e67" target="_blank"><img src="https://camo.githubusercontent.com/cd0657845a242df9980f711c5e2893f274279750/687474703a2f2f692e696d6775722e636f6d2f736355586d78522e706e67" alt="make" data-canonical-src="http://i.imgur.com/scUXmxR.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/1285aaa3bca76535c7c3f9bacea681d4ad43f763/687474703a2f2f692e696d6775722e636f6d2f6547496a45646e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/1285aaa3bca76535c7c3f9bacea681d4ad43f763/687474703a2f2f692e696d6775722e636f6d2f6547496a45646e2e706e67" alt="make Result" data-canonical-src="http://i.imgur.com/eGIjEdn.png" style="max-width:100%;"></a></p>

<p>Consider the full signature of a <code>:make</code> call as</p>

<pre><code>:[silent] make[!] [COFFEE-OPTIONS]...
</code></pre>

<p>By default <code>:make</code> shows all compiler output and jumps to the first line
reported as an error. Compiler output can be hidden with a leading <code>:silent</code>:</p>

<pre><code>:silent make
</code></pre>

<p>Line-jumping can be turned off by adding a bang:</p>

<pre><code>:make!
</code></pre>

<p><code>COFFEE-OPTIONS</code> given to <code>:make</code> are passed along to <code>coffee</code> (see also
<a href="#coffee_make_options"><code>coffee_make_options</code></a>):</p>

<pre><code>:make --bare --output /some/dir
</code></pre>

<p>See the <a href="http://coffeescript.org/#usage">full table of options</a> for a
list of all the options that <code>coffee</code> recognizes.</p>

<p><em>Configuration</em>: <a href="#coffee_compiler"><code>coffee_compiler</code></a>,
<a href="#coffee_make_options"><code>coffee_make_options</code></a></p>

<h4>
<a name="user-content-the-quickfix-window" class="anchor" href="#the-quickfix-window" aria-hidden="true"><span class="octicon octicon-link"></span></a>The quickfix window</h4>

<p>Compiler errors are added to the <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#quickfix">quickfix</a> list by <code>:make</code>, but the quickfix
window isn't automatically shown. The <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#:cwindow"><code>:cwindow</code></a> command will pop up
the quickfix window if there are any errors:</p>

<pre><code>:make
:cwindow
</code></pre>

<p>This is usually the desired behavior, so you may want to add an autocmd to your
vimrc to do this automatically:</p>

<pre><code>autocmd QuickFixCmdPost * nested cwindow | redraw!
</code></pre>

<p>The <code>redraw!</code> command is needed to fix a redrawing quirk in terminal vim, but
can removed for gVim.</p>

<h4>
<a name="user-content-recompile-on-write" class="anchor" href="#recompile-on-write" aria-hidden="true"><span class="octicon octicon-link"></span></a>Recompile on write</h4>

<p>To recompile a file when it's written, add a <code>BufWritePost</code> autocmd to your
vimrc:</p>

<pre><code>autocmd BufWritePost *.coffee silent make!
</code></pre>

<h4>
<a name="user-content-cake-and-cakefiles" class="anchor" href="#cake-and-cakefiles" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cake and Cakefiles</h4>

<p>A <code>cake</code> compiler is also available with the call</p>

<pre><code>:compiler cake
</code></pre>

<p>You can then use <code>:make</code> as above to run your Cakefile and capture any <code>coffee</code>
errors:</p>

<pre><code>:silent make build
</code></pre>

<p>It runs within the current directory, so make sure you're in the directory of
your Cakefile before calling it.</p>

<p><em>Configuration</em>: <a href="#coffee_cake"><code>coffee_cake</code></a>,
<a href="#coffee_cake_options"><code>coffee_cake_options</code></a></p>

<h2>
<a name="user-content-coffeecompile-compile-coffeescript-snippets" class="anchor" href="#coffeecompile-compile-coffeescript-snippets" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeCompile: Compile CoffeeScript Snippets</h2>

<p>CoffeeCompile shows how the current file or a snippet of CoffeeScript is
compiled to JavaScript.</p>

<pre><code>:[RANGE] CoffeeCompile [vert[ical]] [WINDOW-SIZE]
</code></pre>

<p>Calling <code>:CoffeeCompile</code> without a range compiles the whole file:</p>

<p><a href="https://camo.githubusercontent.com/bdd3fc3aefecc8f9c60d57eb957cdd149afe7ac4/687474703a2f2f692e696d6775722e636f6d2f307a4647306c302e706e67" target="_blank"><img src="https://camo.githubusercontent.com/bdd3fc3aefecc8f9c60d57eb957cdd149afe7ac4/687474703a2f2f692e696d6775722e636f6d2f307a4647306c302e706e67" alt="CoffeeCompile" data-canonical-src="http://i.imgur.com/0zFG0l0.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/691e42c565d0df70d60335eaa213a8732ccd689d/687474703a2f2f692e696d6775722e636f6d2f627069417861612e706e67" target="_blank"><img src="https://camo.githubusercontent.com/691e42c565d0df70d60335eaa213a8732ccd689d/687474703a2f2f692e696d6775722e636f6d2f627069417861612e706e67" alt="CoffeeCompile Result" data-canonical-src="http://i.imgur.com/bpiAxaa.png" style="max-width:100%;"></a></p>

<p>Calling it with a range, like in visual mode, compiles only the selected snippet
of CoffeeScript:</p>

<p><a href="https://camo.githubusercontent.com/dbae1c4e1e43b2976fd4d08be94888502cd4a749/687474703a2f2f692e696d6775722e636f6d2f78334f543341792e706e67" target="_blank"><img src="https://camo.githubusercontent.com/dbae1c4e1e43b2976fd4d08be94888502cd4a749/687474703a2f2f692e696d6775722e636f6d2f78334f543341792e706e67" alt="CoffeeCompile Snippet" data-canonical-src="http://i.imgur.com/x3OT3Ay.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/b90ee5c8e52fdd15f79726cea77b90e5a88500ca/687474703a2f2f692e696d6775722e636f6d2f4a30326a3454382e706e67" target="_blank"><img src="https://camo.githubusercontent.com/b90ee5c8e52fdd15f79726cea77b90e5a88500ca/687474703a2f2f692e696d6775722e636f6d2f4a30326a3454382e706e67" alt="Compiled Snippet" data-canonical-src="http://i.imgur.com/J02j4T8.png" style="max-width:100%;"></a></p>

<p>Each file gets its own CoffeeCompile buffer, and the same buffer is used for all
future calls of <code>:CoffeeCompile</code> on that file. It can be quickly closed by
hitting <code>q</code> in normal mode.</p>

<p>Using <code>vert</code> opens the CoffeeCompile buffer vertically instead of horizontally
(see also <a href="#coffee_compile_vert"><code>coffee_compile_vert</code></a>):</p>

<pre><code>:CoffeeCompile vert
</code></pre>

<p>By default the CoffeeCompile buffer splits the source buffer in half, but this
can be overridden by passing in a <code>WINDOW-SIZE</code>:</p>

<pre><code>:CoffeeCompile 4
</code></pre>

<p><em>Configuration</em>: <a href="#coffee_compiler%60"><code>coffee_compiler</code></a>,
<a href="#coffee_compile_vert"><code>coffee_compile_vert</code></a></p>

<h4>
<a name="user-content-quick-syntax-checking" class="anchor" href="#quick-syntax-checking" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick syntax checking</h4>

<p>If compiling a snippet results in a compiler error, CoffeeCompile adds that
error to the <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#quickfix">quickfix</a> list.</p>

<p><a href="https://camo.githubusercontent.com/9942bc88f8273b42995fb778ee8cfbf75012ea8c/687474703a2f2f692e696d6775722e636f6d2f524338616363462e706e67" target="_blank"><img src="https://camo.githubusercontent.com/9942bc88f8273b42995fb778ee8cfbf75012ea8c/687474703a2f2f692e696d6775722e636f6d2f524338616363462e706e67" alt="Syntax Checking" data-canonical-src="http://i.imgur.com/RC8accF.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/85110382b666bc0deecf1a3314ea34c78dfbaaee/687474703a2f2f692e696d6775722e636f6d2f6769314f4e37352e706e67" target="_blank"><img src="https://camo.githubusercontent.com/85110382b666bc0deecf1a3314ea34c78dfbaaee/687474703a2f2f692e696d6775722e636f6d2f6769314f4e37352e706e67" alt="Syntax Checking Result" data-canonical-src="http://i.imgur.com/gi1ON75.png" style="max-width:100%;"></a></p>

<p>You can use this to quickly check the syntax of a snippet.</p>

<h2>
<a name="user-content-coffeewatch-live-preview-compiling" class="anchor" href="#coffeewatch-live-preview-compiling" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeWatch: Live Preview Compiling</h2>

<p>CoffeeWatch emulates using the Try CoffeeScript preview box on the <a href="http://coffeescript.org/">CoffeeScript
homepage</a>.</p>

<p><a href="https://camo.githubusercontent.com/fc7cf2530a492efdaa7629fec2f780aa891be381/687474703a2f2f692e696d6775722e636f6d2f54524864494d472e706e67" target="_blank"><img src="https://camo.githubusercontent.com/fc7cf2530a492efdaa7629fec2f780aa891be381/687474703a2f2f692e696d6775722e636f6d2f54524864494d472e706e67" alt="CoffeeWatch" data-canonical-src="http://i.imgur.com/TRHdIMG.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/f395f9f54b0ad689a39270a19e2ade87f4fdb1f0/687474703a2f2f692e696d6775722e636f6d2f724a624f6565532e706e67" target="_blank"><img src="https://camo.githubusercontent.com/f395f9f54b0ad689a39270a19e2ade87f4fdb1f0/687474703a2f2f692e696d6775722e636f6d2f724a624f6565532e706e67" alt="CoffeeWatch Result" data-canonical-src="http://i.imgur.com/rJbOeeS.png" style="max-width:100%;"></a></p>

<p>CoffeeWatch takes the same options as CoffeeCompile:</p>

<pre><code>:CoffeeWatch [vert[ical]] [WINDOW-SIZE]
</code></pre>

<p>After a source buffer is watched, leaving insert mode or saving the file fires
off a recompile of the CoffeeScript:</p>

<p><a href="https://camo.githubusercontent.com/335feb671c4617b546954142d17e922f6b6491a8/687474703a2f2f692e696d6775722e636f6d2f5342566366346b2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/335feb671c4617b546954142d17e922f6b6491a8/687474703a2f2f692e696d6775722e636f6d2f5342566366346b2e706e67" alt="Insert Mode" data-canonical-src="http://i.imgur.com/SBVcf4k.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/26ddf71ca022376cf7e37fc597e08680e8230fd8/687474703a2f2f692e696d6775722e636f6d2f7062504d6f67372e706e67" target="_blank"><img src="https://camo.githubusercontent.com/26ddf71ca022376cf7e37fc597e08680e8230fd8/687474703a2f2f692e696d6775722e636f6d2f7062504d6f67372e706e67" alt="Recompile" data-canonical-src="http://i.imgur.com/pbPMog7.png" style="max-width:100%;"></a></p>

<p>You can force recompilation by calling <code>:CoffeeWatch</code>.</p>

<p>To get synchronized scrolling of the source buffer and CoffeeWatch buffer, set
<a href="http://vimdoc.sourceforge.net/htmldoc/options.html#'scrollbind'"><code>'scrollbind'</code></a>
on each:</p>

<pre><code>:setl scrollbind
</code></pre>

<p><em>Configuration</em>: <a href="#coffee_compiler"><code>coffee_compiler</code></a>,
<a href="#coffee_watch_vert"><code>coffee_watch_vert</code></a></p>

<h2>
<a name="user-content-coffeerun-run-coffeescript-snippets" class="anchor" href="#coffeerun-run-coffeescript-snippets" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeRun: Run CoffeeScript Snippets</h2>

<p>CoffeeRun compiles the current file or selected snippet and runs the resulting
JavaScript.</p>

<p><a href="https://camo.githubusercontent.com/1d1a0b7074abba083ceeb7bed54f5e34b43db89b/687474703a2f2f692e696d6775722e636f6d2f59536b485575512e706e67" target="_blank"><img src="https://camo.githubusercontent.com/1d1a0b7074abba083ceeb7bed54f5e34b43db89b/687474703a2f2f692e696d6775722e636f6d2f59536b485575512e706e67" alt="CoffeeRun" data-canonical-src="http://i.imgur.com/YSkHUuQ.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/39629f5667bfd45efa83a1963e7878301d62dc8a/687474703a2f2f692e696d6775722e636f6d2f775a516267674e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/39629f5667bfd45efa83a1963e7878301d62dc8a/687474703a2f2f692e696d6775722e636f6d2f775a516267674e2e706e67" alt="CoffeeRun Output" data-canonical-src="http://i.imgur.com/wZQbggN.png" style="max-width:100%;"></a></p>

<p>The command has two forms:</p>

<pre><code>:CoffeeRun [PROGRAM-OPTIONS]...
</code></pre>

<p>This form applies when no <code>RANGE</code> is given or when the given range is <code>1,$</code>
(first line to last line). It allows passing <code>PROGRAM-OPTIONS</code> to your compiled
program. The filename is passed directly to <code>coffee</code> so you must save the file
for your changes to take effect.</p>

<pre><code>:RANGE CoffeeRun [COFFEE-OPTIONS]...
</code></pre>

<p>This form applies with all other ranges. It compiles and runs the lines within
the given <code>RANGE</code> and any extra <code>COFFEE-OPTIONS</code> are passed to <code>coffee</code>.</p>

<p><em>Configuration</em>: <a href="#coffee_compiler"><code>coffee_compiler</code></a>,
<a href="#coffee_run_vert"><code>coffee_run_vert</code></a></p>

<h2>
<a name="user-content-coffeelint-lint-your-coffeescript" class="anchor" href="#coffeelint-lint-your-coffeescript" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeLint: Lint your CoffeeScript</h2>

<p>CoffeeLint runs <a href="http://www.coffeelint.org/">coffeelint</a> (version 0.5.7 or later
required) on the current file and adds any issues to the <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#quickfix">quickfix</a> list.</p>

<p><a href="https://camo.githubusercontent.com/aff0ab07e3ef5a377c4145d926f36c5448cce24c/687474703a2f2f692e696d6775722e636f6d2f554e384e72354e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/aff0ab07e3ef5a377c4145d926f36c5448cce24c/687474703a2f2f692e696d6775722e636f6d2f554e384e72354e2e706e67" alt="CoffeeLint" data-canonical-src="http://i.imgur.com/UN8Nr5N.png" style="max-width:100%;"></a></p>

<p><a href="https://camo.githubusercontent.com/06ec71d14a7915b28c0c7545b0dda2b13b879293/687474703a2f2f692e696d6775722e636f6d2f396853496a33572e706e67" target="_blank"><img src="https://camo.githubusercontent.com/06ec71d14a7915b28c0c7545b0dda2b13b879293/687474703a2f2f692e696d6775722e636f6d2f396853496a33572e706e67" alt="CoffeeLint Result" data-canonical-src="http://i.imgur.com/9hSIj3W.png" style="max-width:100%;"></a></p>

<pre><code>:[RANGE] CoffeeLint[!] [COFFEELINT-OPTIONS]... [ | cwindow]
</code></pre>

<p>If a <code>RANGE</code> is given, only those lines are piped to <code>coffeelint</code>. Options given
in <code>COFFEELINT-OPTIONS</code> are passed to <code>coffeelint</code> (see also
<a href="#coffee_lint_options"><code>coffee_lint_options</code></a>):</p>

<pre><code>:CoffeeLint -f lint.json
</code></pre>

<p>It behaves very similar to <code>:make</code>, described <a href="#compile-to-javascript">above</a>.</p>

<pre><code>:CoffeeLint! | cwindow
</code></pre>

<p><em>Configuration</em>: <a href="#coffee_linter"><code>coffee_linter</code></a>,
<a href="#coffee_lint_options"><code>coffee_lint_options</code></a></p>

<h2>
<a name="user-content-literate-coffeescript" class="anchor" href="#literate-coffeescript" aria-hidden="true"><span class="octicon octicon-link"></span></a>Literate CoffeeScript</h2>

<p>Literate CoffeeScript syntax and indent support is provided by
<a href="https://github.com/mintplant/vim-literate-coffeescript">vim-literate-coffeescript</a>. The <code>Coffee</code> commands detect when they're running
on a litcoffee file and pass the <code>--literate</code> flag to their respective tools,
but at this time the commands are not automatically loaded when a litcoffee file
is opened.</p>

<p>To load them, run</p>

<pre><code>runtime ftplugin/coffee.vim
</code></pre>

<p>while inside a litcoffee buffer. To do this automatically, add</p>

<pre><code>autocmd FileType litcoffee runtime ftplugin/coffee.vim
</code></pre>

<p>to your vimrc.</p>

<h2>
<a name="user-content-coffeescript-in-html" class="anchor" href="#coffeescript-in-html" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeScript in HTML</h2>

<p>CoffeeScript is highlighted and indented within</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/coffeescript"</span><span class="nt">&gt;</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>

<p>blocks in html files.</p>

<h2>
<a name="user-content-coffeescript-in-haml" class="anchor" href="#coffeescript-in-haml" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeScript in Haml</h2>

<p>CoffeeScript is highlighted within the <code>:coffeescript</code> filter in haml files:</p>

<div class="highlight highlight-haml"><pre><span class="nd">:coffeescript</span>
  <span class="nd">console.log "hullo"</span>
</pre></div>

<p>At this time, coffee indenting doesn't work in these blocks.</p>

<h2>
<a name="user-content-custom-autocmds" class="anchor" href="#custom-autocmds" aria-hidden="true"><span class="octicon octicon-link"></span></a>Custom Autocmds</h2>

<p>You can <a href="http://vimdoc.sourceforge.net/htmldoc/usr_40.html#40.3">define commands</a> to be ran automatically on these
custom events.</p>

<p>In all cases, the name of the command running the event (<code>CoffeeCompile</code>,
<code>CoffeeWatch</code>, or <code>CoffeeRun</code>) is matched by the <a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#:autocmd"><code>{pat}</code></a> argument.
You can match all commands with a <code>*</code> or only specific commands by separating
them with a comma: <code>CoffeeCompile,CoffeeWatch</code>.</p>

<h4>
<a name="user-content-coffeebufnew" class="anchor" href="#coffeebufnew" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeBufNew</h4>

<p>CoffeeBufNew is ran when a new scratch buffer is created. It's called from the
new buffer, so it can be used to do additional set up.</p>

<div class="highlight highlight-vim"><pre>augroup CoffeeBufNew
  <span class="k">autocmd</span> <span class="nb">User</span> * <span class="k">set</span> <span class="nb">wrap</span>
augroup END
</pre></div>

<p><em>Used By</em>: CoffeeCompile, CoffeeWatch, CoffeeRun</p>

<h4>
<a name="user-content-coffeebufupdate" class="anchor" href="#coffeebufupdate" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeBufUpdate</h4>

<p>CoffeeBufUpdate is ran when a scratch buffer is updated with output from
<code>coffee</code>. It's called from the scratch buffer, so it can be used to alter the
compiled output.</p>

<div class="highlight highlight-vim"><pre><span class="c">" Switch back to the source buffer after updating.</span>
augroup CoffeeBufUpdate
  <span class="k">autocmd</span> <span class="nb">User</span> CoffeeCompile<span class="p">,</span>CoffeeRun exec bufwinnr<span class="p">(</span><span class="k">b</span>:coffee_src_buf<span class="p">)</span> <span class="s1">'wincmd w'</span>
augroup END
</pre></div>

<p>For example, to strip off the "Generated by" comment on the first line, put this
in your vimrc:</p>

<div class="highlight highlight-vim"><pre><span class="k">function</span><span class="p">!</span> <span class="k">s</span>:RemoveGeneratedBy<span class="p">()</span>
<span class="c">  " If there was an error compiling, there's no comment to remove.</span>
  <span class="k">if</span> <span class="k">v</span>:shell_error
    <span class="k">return</span>
  <span class="k">endif</span>

<span class="c">  " Save cursor position.</span>
  <span class="k">let</span> pos <span class="p">=</span> getpos<span class="p">(</span><span class="s1">'.'</span><span class="p">)</span>

<span class="c">  " Remove first line.</span>
  <span class="k">set</span> <span class="nb">modifiable</span>
  <span class="m">1</span> delete _
  <span class="k">set</span> <span class="nb">nomodifiable</span>

<span class="c">  " Restore cursor position.</span>
  <span class="k">call</span> setpos<span class="p">(</span><span class="s1">'.'</span><span class="p">,</span> pos<span class="p">)</span>
<span class="k">endfunction</span>

augroup CoffeeBufUpdate
  <span class="k">autocmd</span> <span class="nb">User</span> CoffeeCompile<span class="p">,</span>CoffeeWatch <span class="k">call</span> <span class="k">s</span>:RemoveGeneratedBy<span class="p">()</span>
augroup END
</pre></div>

<p><em>Used By</em>: CoffeeCompile, CoffeeWatch, CoffeeRun</p>

<h2>
<a name="user-content-configuration-variables" class="anchor" href="#configuration-variables" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration Variables</h2>

<p>This is the full list of configuration variables available, with example
settings and default values. Use these in your vimrc to control the default
behavior.</p>

<h4>
<a name="user-content-coffee_indent_keep_current" class="anchor" href="#coffee_indent_keep_current" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_indent_keep_current</h4>

<p>By default, the indent function matches the indent of the previous line if it
doesn't find a reason to indent or outdent. To change this behavior so it
instead keeps the <a href="https://github.com/kchmck/vim-coffee-script/pull/98">current indent of the cursor</a>, use</p>

<pre><code>let coffee_indent_keep_current = 1
</code></pre>

<p><em>Default</em>: <code>unlet coffee_indent_keep_current</code></p>

<p>Note that if you change this after a coffee file has been loaded, you'll have to
reload the indent script for the change to take effect:</p>

<pre><code>unlet b:did_indent | runtime indent/coffee.vim
</code></pre>

<h4>
<a name="user-content-coffee_compiler" class="anchor" href="#coffee_compiler" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_compiler</h4>

<p>Path to the <code>coffee</code> executable used by the <code>Coffee</code> commands:</p>

<pre><code>let coffee_compiler = '/usr/bin/coffee'
</code></pre>

<p><em>Default</em>: <code>'coffee'</code> (search <code>$PATH</code> for executable)</p>

<h4>
<a name="user-content-coffee_make_options" class="anchor" href="#coffee_make_options" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_make_options</h4>

<p>Options to pass to <code>coffee</code> with <code>:make</code>:</p>

<pre><code>let coffee_make_options = '--bare'
</code></pre>

<p><em>Default</em>: <code>''</code> (nothing)</p>

<p>Note that <code>coffee_make_options</code> is embedded into <code>'makeprg'</code>, so <code>:compiler
coffee</code> must be ran after changing <code>coffee_make_options</code> for the changes to take
effect.</p>

<h4>
<a name="user-content-coffee_cake" class="anchor" href="#coffee_cake" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_cake</h4>

<p>Path to the <code>cake</code> executable:</p>

<pre><code>let coffee_cake = '/opt/bin/cake'
</code></pre>

<p><em>Default</em>: <code>'cake'</code> (search <code>$PATH</code> for executable)</p>

<h4>
<a name="user-content-coffee_cake_options" class="anchor" href="#coffee_cake_options" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_cake_options</h4>

<p>Options to pass to <code>cake</code> with <code>:make</code>:</p>

<pre><code>let coffee_cake_options = 'build'
</code></pre>

<p><em>Default</em>: <code>''</code> (nothing)</p>

<h4>
<a name="user-content-coffee_linter" class="anchor" href="#coffee_linter" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_linter</h4>

<p>Path to the <code>coffeelint</code> executable:</p>

<pre><code>let coffee_linter = '/opt/bin/coffeelint'
</code></pre>

<p><em>Default</em>: <code>'coffeelint'</code> (search <code>$PATH</code> for executable)</p>

<h4>
<a name="user-content-coffee_lint_options" class="anchor" href="#coffee_lint_options" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_lint_options</h4>

<p>Options to pass to <code>coffeelint</code>:</p>

<pre><code>let coffee_lint_options = '-f lint.json'
</code></pre>

<p><em>Default</em>: <code>''</code> (nothing)</p>

<h4>
<a name="user-content-coffee_compile_vert" class="anchor" href="#coffee_compile_vert" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_compile_vert</h4>

<p>Open the CoffeeCompile buffer with a vertical split instead of a horizontal
one:</p>

<pre><code>let coffee_compile_vert = 1
</code></pre>

<p><em>Default</em>: <code>unlet coffee_compile_vert</code></p>

<h4>
<a name="user-content-coffee_watch_vert" class="anchor" href="#coffee_watch_vert" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_watch_vert</h4>

<p>Open the CoffeeWatch buffer with a vertical split instead of a horizontal
one:</p>

<pre><code>let coffee_watch_vert = 1
</code></pre>

<p><em>Default</em>: <code>unlet coffee_watch_vert</code></p>

<h4>
<a name="user-content-coffee_run_vert" class="anchor" href="#coffee_run_vert" aria-hidden="true"><span class="octicon octicon-link"></span></a>coffee_run_vert</h4>

<p>Open the CoffeeRun buffer with a vertical split instead of a horizontal
one:</p>

<pre><code>let coffee_run_vert = 1
</code></pre>

<p><em>Default</em>: <code>unlet coffee_run_vert</code></p>

<h2>
<a name="user-content-configure-syntax-highlighting" class="anchor" href="#configure-syntax-highlighting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure Syntax Highlighting</h2>

<p>Add these lines to your vimrc to disable the relevant syntax group.</p>

<h4>
<a name="user-content-disable-trailing-whitespace-error" class="anchor" href="#disable-trailing-whitespace-error" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disable trailing whitespace error</h4>

<p>Trailing whitespace is highlighted as an error by default. This can be disabled
with:</p>

<pre><code>hi link coffeeSpaceError NONE
</code></pre>

<h4>
<a name="user-content-disable-trailing-semicolon-error" class="anchor" href="#disable-trailing-semicolon-error" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disable trailing semicolon error</h4>

<p>Trailing semicolons are considered an error (for help transitioning from
JavaScript.) This can be disabled with:</p>

<pre><code>hi link coffeeSemicolonError NONE
</code></pre>

<h4>
<a name="user-content-disable-reserved-words-error" class="anchor" href="#disable-reserved-words-error" aria-hidden="true"><span class="octicon octicon-link"></span></a>Disable reserved words error</h4>

<p>Reserved words like <code>function</code> and <code>var</code> are highlighted as an error where
they're not allowed in CoffeeScript. This can be disabled with:</p>

<pre><code>hi link coffeeReservedError NONE
</code></pre>

<h2>
<a name="user-content-tune-vim-for-coffeescript" class="anchor" href="#tune-vim-for-coffeescript" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tune Vim for CoffeeScript</h2>

<p>Changing these core settings can make vim more CoffeeScript friendly.</p>

<h4>
<a name="user-content-fold-by-indentation" class="anchor" href="#fold-by-indentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Fold by indentation</h4>

<p>Folding by indentation works well for CoffeeScript functions and classes:</p>

<p><a href="https://camo.githubusercontent.com/888426f93c0ab4a04c3284c9df62b215dacd64a5/687474703a2f2f692e696d6775722e636f6d2f6744675542644f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/888426f93c0ab4a04c3284c9df62b215dacd64a5/687474703a2f2f692e696d6775722e636f6d2f6744675542644f2e706e67" alt="Folding" data-canonical-src="http://i.imgur.com/gDgUBdO.png" style="max-width:100%;"></a></p>

<p>To fold by indentation in CoffeeScript files, add this line to your vimrc:</p>

<pre><code>autocmd BufNewFile,BufReadPost *.coffee setl foldmethod=indent nofoldenable
</code></pre>

<p>With this, folding is disabled by default but can be quickly toggled per-file
by hitting <code>zi</code>. To enable folding by default, remove <code>nofoldenable</code>:</p>

<pre><code>autocmd BufNewFile,BufReadPost *.coffee setl foldmethod=indent
</code></pre>

<h4>
<a name="user-content-two-space-indentation" class="anchor" href="#two-space-indentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Two-space indentation</h4>

<p>To get standard two-space indentation in CoffeeScript files, add this line to
your vimrc:</p>

<pre><code>autocmd BufNewFile,BufReadPost *.coffee setl shiftwidth=2 expandtab
</code></pre></article></div>
<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-extended-session-management-for-vim" class="anchor" href="#extended-session-management-for-vim" aria-hidden="true"><span class="octicon octicon-link"></span></a>Extended session management for Vim</h1>

<p>The vim-session plug-in improves upon <a href="http://www.vim.org/">Vim</a>'s built-in <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command by enabling you to easily and (if you want) automatically persist and restore your Vim editing sessions. It works by generating a <a href="http://vimdoc.sourceforge.net/htmldoc/usr_41.html#script">Vim script</a> that restores your current settings and the arrangement of tab pages and/or split windows and the files they contain.</p>

<p>To persist your current editing session you can execute the <code>:SaveSession</code> command. If you don't provide a name for the session 'default' is used (you can change this name with an option). You're free to use whatever characters you like in session names. When you want to restore your session simply execute <code>:OpenSession</code>. Again the name 'default' is used if you don't provide one. When a session is active, has been changed and you quit Vim you'll be prompted whether you want to save the open session before quitting Vim:</p>

<p><a href="https://camo.githubusercontent.com/1222fc234138167772c8f5ddf77f16da42dd907d/687474703a2f2f70657465726f6464696e672e636f6d2f636f64652f76696d2f73657373696f6e2f6175746f736176652e706e67" target="_blank"><img src="https://camo.githubusercontent.com/1222fc234138167772c8f5ddf77f16da42dd907d/687474703a2f2f70657465726f6464696e672e636f6d2f636f64652f76696d2f73657373696f6e2f6175746f736176652e706e67" alt="Screenshot of auto-save prompt" data-canonical-src="http://peterodding.com/code/vim/session/autosave.png" style="max-width:100%;"></a></p>

<p>If you want, the plug-in can also automatically save your session every few minutes (see the <code>g:session_autosave_periodic</code> option). When you start Vim without editing any files and the default session exists, you'll be prompted whether you want to restore the default session:</p>

<p><a href="https://camo.githubusercontent.com/be95bf40ab1227d7d166121fbb7b40a7facc0ed2/687474703a2f2f70657465726f6464696e672e636f6d2f636f64652f76696d2f73657373696f6e2f6175746f6f70656e2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/be95bf40ab1227d7d166121fbb7b40a7facc0ed2/687474703a2f2f70657465726f6464696e672e636f6d2f636f64652f76696d2f73657373696f6e2f6175746f6f70656e2e706e67" alt="Screenshot of auto-open prompt" data-canonical-src="http://peterodding.com/code/vim/session/autoopen.png" style="max-width:100%;"></a></p>

<p>When you start Vim with a custom <a href="http://vimdoc.sourceforge.net/htmldoc/remote.html#--servername">server name</a> that matches one of the existing session names then the matching session will be automatically restored. For example I use several sessions to quickly edit my Vim plug-ins:</p>

<pre><code>$ gvim --servername easytags-plugin
$ gvim --servername session-plugin
$ # etc.
</code></pre>

<p>The session scripts created by this plug-in are stored in the directory <code>~/.vim/sessions</code> (on UNIX) or <code>~\vimfiles\sessions</code> (on Windows) but you can change the location by setting <code>g:session_directory</code>. If you're curious what the session scripts generated by vim-session look like see the <a href="http://peterodding.com/code/vim/session/#sample_session_script">sample below</a>.</p>

<p>If you're still getting to know the plug-in, the "Sessions" menu may help: It contains menu items for most commands defined by the plug-in.</p>

<h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p><em>Please note that the vim-session plug-in requires my vim-misc plug-in which is separately distributed.</em></p>

<p>Unzip the most recent ZIP archives of the <a href="http://peterodding.com/code/vim/downloads/session.zip">vim-session</a> and <a href="http://peterodding.com/code/vim/downloads/misc.zip">vim-misc</a> plug-ins inside your Vim profile directory (usually this is <code>~/.vim</code> on UNIX and <code>%USERPROFILE%\vimfiles</code> on Windows), restart Vim and execute the command <code>:helptags ~/.vim/doc</code> (use <code>:helptags ~\vimfiles\doc</code> instead on Windows). To get started execute <code>:Note</code> or <code>:edit note:</code>, this will start a new note that contains instructions on how to continue from there (and how to use the plug-in in general).</p>

<p>If you prefer you can also use <a href="http://www.vim.org/scripts/script.php?script_id=2332">Pathogen</a>, <a href="https://github.com/gmarik/vundle">Vundle</a> or a similar tool to install &amp; update the <a href="http://github.com/xolox/vim-session">vim-session</a> and <a href="http://github.com/xolox/vim-misc">vim-misc</a> plug-ins using a local clone of the git repository.</p>

<p>After you've installed the plug-in and restarted Vim, the following commands will be available to you:</p>

<h2>
<a name="user-content-commands" class="anchor" href="#commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Commands</h2>

<p>Note that environment variables inside command arguments are expanded by the plug-in.</p>

<h3>
<a name="user-content-the-savesession-command" class="anchor" href="#the-savesession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:SaveSession</code> command</h3>

<p>This command saves your current editing session just like Vim's built-in <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command does. The difference is that you don't pass a full pathname as argument but just a name, any name really. Press <code>&lt;Tab&gt;</code> to get completion of existing session names. If you don't provide an argument the default session name is used, unless an existing session is open in which case the name of that session will be used.</p>

<p>If the session you're trying to save is already active in another Vim instance you'll get a warning and nothing happens. You can use a bang (!) as in <code>:SaveSession! ...</code> to ignore the warning and save the session anyway.</p>

<p>Your session script will be saved in the directory pointed to by the <code>g:session_directory</code> option.</p>

<h3>
<a name="user-content-the-opensession-command" class="anchor" href="#the-opensession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:OpenSession</code> command</h3>

<p>This command is basically <a href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#:source">:source</a> in disguise, but it supports tab completion of session names and it executes <code>:CloseSession</code> before opening the session. When you don't provide a session name and only a single session exists then that session is opened, otherwise the plug-in will ask you to select one from a list:</p>

<pre><code>Please select the session to restore:

 1. vim-profile
 2. session-plugin
 3. etc.

Type number and &lt;Enter&gt; or click with mouse (empty cancels):
</code></pre>

<p>If the session you're trying to open is already active in another Vim instance you'll get a warning and nothing happens. You can use a bang (!) as in <code>:OpenSession! ...</code> to ignore the warning and open the session anyway.</p>

<p>Note also that when you use a bang (!) right after the command name existing tab pages and windows are closed, discarding any changes in the files you were editing!</p>

<h3>
<a name="user-content-the-restartvim-command" class="anchor" href="#the-restartvim-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:RestartVim</code> command</h3>

<p>This command saves your current editing session, restarts Vim and restores your editing session. This can come in handy when you're debugging Vim scripts which can't be easily/safely <a href="http://peterodding.com/code/vim/reload/">reloaded using a more lightweight approach</a>. It should work fine on Windows and UNIX alike but because of technical limitations it only works in graphical Vim.</p>

<p>Any commands following the <code>:RestartVim</code> command are intercepted and executed after Vim is restarted and your session has been restored. This makes it easy to perform manual tests which involve restarting Vim, e.g. <code>:RestartVim | edit /path/to/file | call MyTest()</code>.</p>

<h3>
<a name="user-content-the-closesession-command" class="anchor" href="#the-closesession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:CloseSession</code> command</h3>

<p>This command closes all but the current tab page and window and then edits a new, empty buffer. If a session is loaded when you execute this command the plug-in will first ask you whether you want to save that session.</p>

<p>Note that when you use a bang (!) right after the command name existing tab pages and windows are closed, discarding any changes in the files you were editing!</p>

<h3>
<a name="user-content-the-deletesession-command" class="anchor" href="#the-deletesession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:DeleteSession</code> command</h3>

<p>Using this command you can delete any of the sessions created by this plug-in. If the session you are trying to delete is currently active in another Vim instance you'll get a warning and nothing happens. You can use a bang (!) as in <code>:DeleteSession! ...</code> to ignore the warning and delete the session anyway.</p>

<p>Note that this command only deletes the session script, it leaves your open tab pages and windows exactly as they were.</p>

<h3>
<a name="user-content-the-viewsession-command" class="anchor" href="#the-viewsession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:ViewSession</code> command</h3>

<p>Execute this command to view the Vim script generated for a session. This command is useful when you need to review the generated Vim script repeatedly, for example while debugging or modifying the vim-session plug-in.</p>

<h3>
<a name="user-content-tab-scoped-sessions" class="anchor" href="#tab-scoped-sessions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tab scoped sessions</h3>

<p>When <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">'sessionoptions'</a> contains 'tabpages' (this is the default) session scripts will persist and restore all windows in all tab pages. When you remove 'tabpages' from <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">'sessionoptions'</a> you get a sort of light-weight sessions: They are constrained to a single tab page. Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command and the vim-session plug-in both fully support this.</p>

<p>You can change <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">'sessionoptions'</a> in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a> but then you can never save a session including tab pages. To decide on the spot whether you want a global or tab scoped session, the vim-session plug-in defines the three commands documented below.</p>

<p>Note that tab scoped sessions are regular session scripts, so when you load a tab scoped session using <code>:OpenSession</code> instead of <code>:OpenTabSession</code> the vim-session plug-in <em>assumes</em> it is a global session and will close all active tab pages before opening the tab scoped session.</p>

<h4>
<a name="user-content-the-opentabsession-command" class="anchor" href="#the-opentabsession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:OpenTabSession</code> command</h4>

<p>Just like <code>:OpenSession</code> but applies only to the current tab page.</p>

<h4>
<a name="user-content-the-savetabsession-command" class="anchor" href="#the-savetabsession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:SaveTabSession</code> command</h4>

<p>Just like <code>:SaveSession</code> but applies only to the current tab page.</p>

<h4>
<a name="user-content-the-appendtabsession-command" class="anchor" href="#the-appendtabsession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:AppendTabSession</code> command</h4>

<p>This command opens a new tab page and loads the given tab scoped session in that tab page. You can give this command a count just like <a href="http://vimdoc.sourceforge.net/htmldoc/tabpage.html#:tabnew">:tabnew</a>.</p>

<h4>
<a name="user-content-the-closetabsession-command" class="anchor" href="#the-closetabsession-command" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>:CloseTabSession</code> command</h4>

<p>Just like <code>:CloseSession</code> but applies only to the current tab page.</p>

<h2>
<a name="user-content-options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h2>

<p>The following Vim options and plug-in options (global variables) can be used to configure the plug-in to your preferences.</p>

<h3>
<a name="user-content-the-sessionoptions-setting" class="anchor" href="#the-sessionoptions-setting" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>sessionoptions</code> setting</h3>

<p>Because the vim-session plug-in uses Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command you can change how it works by setting <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">'sessionoptions'</a> in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>, for example:</p>

<pre><code>" If you only want to save the current tab page:
set sessionoptions-=tabpages

" If you don't want help windows to be restored:
set sessionoptions-=help
</code></pre>

<p>Note that the vim-session plug-in automatically and unconditionally executes the following change just before saving a session:</p>

<pre><code>" Don't persist options and mappings because it can corrupt sessions.
set sessionoptions-=options
</code></pre>

<h3>
<a name="user-content-the-gsession_directory-option" class="anchor" href="#the-gsession_directory-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_directory</code> option</h3>

<p>This option controls the location of your session scripts. Its default value is <code>~/.vim/sessions</code> (on UNIX) or <code>~\vimfiles\sessions</code> (on Windows). If you don't mind the default you don't have to do anything; the directory will be created for you. Note that a leading <code>~</code> is expanded to your current home directory (<code>$HOME</code> on UNIX, <code>%USERPROFILE%</code> on Windows).</p>

<h3>
<a name="user-content-the-gsession_default_name-option" class="anchor" href="#the-gsession_default_name-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_default_name</code> option</h3>

<p>The name of the default session without directory or filename extension (you'll never guess what the default is).</p>

<h3>
<a name="user-content-the-gsession_default_overwrite-option" class="anchor" href="#the-gsession_default_overwrite-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_default_overwrite</code> option</h3>

<p>If you set this to true (1), every Vim instance without an explicit session loaded will overwrite the default session (the last Vim instance wins).</p>

<h3>
<a name="user-content-the-gsession_extension-option" class="anchor" href="#the-gsession_extension-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_extension</code> option</h3>

<p>The filename extension of session scripts. This should include the dot that separates the basename from the extension. Defaults to '.vim'.</p>

<h3>
<a name="user-content-the-gsession_autoload-option" class="anchor" href="#the-gsession_autoload-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_autoload</code> option</h3>

<p>By default this option is set to <code>'prompt'</code>. This means that when you start Vim without opening any files and the default session script exists, the session plug-in will ask whether you want to restore your default session. When you set this option to <code>'yes'</code> and you start Vim without opening any files the default session will be restored without a prompt. To completely disable automatic loading you can set this option to <code>'no'</code>.</p>

<h3>
<a name="user-content-the-gsession_autosave-option" class="anchor" href="#the-gsession_autosave-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_autosave</code> option</h3>

<p>By default this option is set to <code>'prompt'</code>. When you've opened a session and you quit Vim, the session plug-in will ask whether you want to save the changes to your session. Set this option to <code>'yes'</code> to always automatically save open sessions when you quit Vim. To completely disable automatic saving you can set this option to <code>'no'</code>.</p>

<h3>
<a name="user-content-the-gsession_autosave_periodic-option" class="anchor" href="#the-gsession_autosave_periodic-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_autosave_periodic</code> option</h3>

<p>This option sets the interval in minutes for automatic, periodic saving of active sessions. The default is zero which disables the feature.</p>

<p>Note that when the plug-in automatically saves a session (because you enabled this feature) the plug-in will not prompt for your permission.</p>

<h3>
<a name="user-content-the-gsession_verbose_messages-option" class="anchor" href="#the-gsession_verbose_messages-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_verbose_messages</code> option</h3>

<p>The session load/save prompts are quite verbose by default because they explain how to disable the prompts. If you find the additional explanation distracting you can lower the verbosity by setting this option to 0 (false) in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>.</p>

<h3>
<a name="user-content-the-gsession_default_to_last-option" class="anchor" href="#the-gsession_default_to_last-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_default_to_last</code> option</h3>

<p>By default this option is set to false (0). When you set this option to true (1) and you start Vim, the session plug-in will open your last used session instead of the default session. Note that the session plug-in will still show you the dialog asking whether you want to restore the last used session. To get rid of the dialog you have to set <code>g:session_autoload</code> to <code>'yes'</code>.</p>

<h3>
<a name="user-content-the-gsession_persist_colors-option" class="anchor" href="#the-gsession_persist_colors-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_persist_colors</code> option</h3>

<p>By default the plug-in will save the color scheme and the <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#'background'">'background' option</a> with the session to be reused the next time that session is loaded, this can be disabled by adding the following line to your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>:</p>

<pre><code>:let g:session_persist_colors = 0
</code></pre>

<h3>
<a name="user-content-the-gsession_persist_globals-option" class="anchor" href="#the-gsession_persist_globals-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_persist_globals</code> option</h3>

<p>The vim-session plug-in uses Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command but it changes <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">'sessionoptions'</a> so that Vim options and mappings are not persisted. The plug-in does this because persistence of options and mappings can break loading of sessions, in other words it's fragile (in my opinion).</p>

<p>If you want the plug-in to persist specific global variables or options you can add their names to the list <code>g:session_persist_globals</code> in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>:</p>

<pre><code>" Persist the value of the global option 'makeprg'.
let g:session_persist_globals = ['&amp;makeprg']
</code></pre>

<p>Because the <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a> is loaded before the plug-in you have to define the list yourself. To persist multiple values:</p>

<pre><code>" Persist all options related to :make.
let g:session_persist_globals = ['&amp;makeprg', '&amp;makeef']
</code></pre>

<p>Here's how you persist global variables: (in this case the variables of the session plug-in itself :-)</p>

<pre><code>" Persist the options of the session plug-in using the session plug-in...
let g:session_persist_globals = ['&amp;sessionoptions']
call add(g:session_persist_globals, 'g:session_autoload')
call add(g:session_persist_globals, 'g:session_autosave')
call add(g:session_persist_globals, 'g:session_default_to_last')
call add(g:session_persist_globals, 'g:session_persist_globals')
</code></pre>

<p>The example above doesn't persist the <code>g:session_directory</code> variable because this variable is used before loading a session script so persisting it inside the session script is pointless.</p>

<h3>
<a name="user-content-the-gsession_restart_environment-option" class="anchor" href="#the-gsession_restart_environment-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_restart_environment</code> option</h3>

<p>This option is a list of environment variable names (without the dollar signs) that the <code>:RestartVim</code> command will pass on to the new instance of Vim. This option is only useful on UNIX. By default the three environment variables <code>$TERM</code>, <code>$VIM</code> and <code>$VIMRUNTIME</code> are included in this list.</p>

<h3>
<a name="user-content-the-gsession_command_aliases-option" class="anchor" href="#the-gsession_command_aliases-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_command_aliases</code> option</h3>

<p>The names of the commands defined by the session plug-in start with the action they perform, followed by the string 'Session'. Some people prefer it the other way around because they find it easier to remember and you can type <code>:Session&lt;Tab&gt;</code> to get completion of all available commands (actually this works with the other style as well if you type <code>:*Session&lt;Tab&gt;</code> but I digress). If you are one of those people you can enable this option in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a> like this:</p>

<pre><code>:let g:session_command_aliases = 1
</code></pre>

<p>When this option is enabled the session plug-in will define the following command aliases:</p>

<ul class="task-list">
<li>
<code>SessionOpen</code> is an alias for <code>OpenSession</code>
</li>
<li>
<code>SessionView</code> is an alias for <code>ViewSession</code>
</li>
<li>
<code>SessionSave</code> is an alias for <code>SaveSession</code>
</li>
<li>
<code>SessionDelete</code> is an alias for <code>DeleteSession</code>
</li>
<li>
<code>SessionClose</code> is an alias for <code>CloseSession</code>
</li>
</ul><p>Then there are the command aliases for tab scoped sessions:</p>

<ul class="task-list">
<li>
<code>SessionTabOpen</code> is an alias for <code>OpenTabSession</code>
</li>
<li>
<code>SessionTabSave</code> is an alias for <code>SaveTabSession</code>
</li>
<li>
<code>SessionTabAppend</code> is an alias for <code>AppendTabSession</code>
</li>
<li>
<code>SessionTabClose</code> is an alias for <code>CloseTabSession</code>
</li>
</ul><p>The aliases support tab completion just like the real commands; they're exactly the same except for the names.</p>

<p>When you enable the aliases, the default command names will still be available. If you really don't like them, feel free to delete them using <a href="http://vimdoc.sourceforge.net/htmldoc/map.html#:delcommand">:delcommand</a>.</p>

<h3>
<a name="user-content-the-gsession_menu-option" class="anchor" href="#the-gsession_menu-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_menu</code> option</h3>

<p>By default the plug-in installs a top level menu. If you don't like this you can disable it by adding the following line to your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>:</p>

<pre><code>:let g:session_menu = 0
</code></pre>

<h3>
<a name="user-content-the-gsession_name_suggestion_function-option" class="anchor" href="#the-gsession_name_suggestion_function-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:session_name_suggestion_function</code> option</h3>

<p>The default completion of the <code>:SaveSession</code> command is based on the names of the existing sessions. You can add your own suggestions using this option by setting the option to the name of a Vim script function. By default this option is set to an example function that suggests the name of the current git or Mercurial feature branch (when you're working in a version control repository).</p>

<h3>
<a name="user-content-the-gloaded_session-option" class="anchor" href="#the-gloaded_session-option" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>g:loaded_session</code> option</h3>

<p>This variable isn't really an option but if you want to avoid loading the vim-session plug-in you can set this variable to any value in your <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#vimrc">vimrc script</a>:</p>

<pre><code>:let g:loaded_session = 1
</code></pre>

<h2>
<a name="user-content-compatibility-with-other-plug-ins" class="anchor" href="#compatibility-with-other-plug-ins" aria-hidden="true"><span class="octicon octicon-link"></span></a>Compatibility with other plug-ins</h2>

<p>Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command isn't really compatible with plug-ins that create buffers with generated content and because of this the vim-session plug-in includes specific workarounds for a couple of popular plug-ins:</p>

<ul class="task-list">
<li>
<a href="http://www.vim.org/scripts/script.php?script_id=42">BufExplorer</a>, <a href="http://www.vim.org/scripts/script.php?script_id=2771">Conque Shell</a>, <a href="http://www.vim.org/scripts/script.php?script_id=1658">NERD tree</a>, <a href="http://www.vim.org/scripts/script.php?script_id=69">Project</a> and <a href="http://www.vim.org/scripts/script.php?script_id=273">taglist</a> windows are supported;</li>
<li>When <a href="http://peterodding.com/code/vim/shell/">shell.vim</a> is installed Vim's full-screen state is persisted;</li>
<li>The <a href="http://vimdoc.sourceforge.net/htmldoc/pi_netrw.html#netrw-start">netrw</a> plug-in supports sessions out of the box.</li>
</ul><p>If your favorite plug-in doesn't work with the vim-session plug-in drop me a mail and I'll see what I can do. Please include a link to the plug-in in your e-mail so that I can install and test the plug-in.</p>

<h2>
<a name="user-content-known-issues" class="anchor" href="#known-issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known issues</h2>

<p>Recently this plug-in switched from reimplementing <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> to actually using it because this was the only way to support complex split window layouts. Only after making this change did I realize <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> doesn't support <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#quickfix">quickfix</a> and <a href="http://vimdoc.sourceforge.net/htmldoc/quickfix.html#location-list">location list</a> windows and of course it turns out that bolting on support for these after the fact is going to complicate the plug-in significantly (in other words, I'm working on it but it might take a while...)</p>

<h2>
<a name="user-content-function-reference" class="anchor" href="#function-reference" aria-hidden="true"><span class="octicon octicon-link"></span></a>Function reference</h2>



<p>The documentation of the 37 functions below was extracted from
2 Vim scripts on July 30, 2014 at 22:23.</p>

<h3>
<a name="user-content-public-api-for-the-vim-session-plug-in" class="anchor" href="#public-api-for-the-vim-session-plug-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Public API for the vim-session plug-in</h3>

<h4>
<a name="user-content-the-xoloxsessionsave_session-function" class="anchor" href="#the-xoloxsessionsave_session-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_session()</code> function</h4>

<p>Save the current Vim editing session to a Vim script using the
<a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command and some additional Vim magic provided by the
vim-session plug-in. When the generated session script is later sourced
using the <a href="http://vimdoc.sourceforge.net/htmldoc/repeat.html#:source">:source</a> command (possibly in another process or even on
another machine) it will restore the editing session to its previous state
(provided all of the files involved in the session are still there at
their original locations).</p>

<p>The first argument is expected to be a list, it will be extended with the
lines to be added to the session script. The second argument is expected
to be the filename under which the script will later be saved (it's
embedded in a comment at the top of the script).</p>

<h4>
<a name="user-content-the-xoloxsessionsave_globals-function" class="anchor" href="#the-xoloxsessionsave_globals-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_globals()</code> function</h4>

<p>Serialize the values of the global variables configured by the user with
the <code>g:session_persist_globals</code> option. The first argument is expected to
be a list, it will be extended with the lines to be added to the session
script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_features-function" class="anchor" href="#the-xoloxsessionsave_features-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_features()</code> function</h4>

<p>Save the current state of the following Vim features:</p>

<ul class="task-list">
<li>Whether syntax highlighting is enabled (<code>:syntax on</code>)</li>
<li>Whether file type detection is enabled (<code>:filetype on</code>)</li>
<li>Whether file type plug-ins are enabled (<code>:filetype plugin on</code>)</li>
<li>Whether file type indent plug-ins are enabled (<code>:filetype indent on</code>)</li>
</ul><p>The first argument is expected to be a list, it will be extended with the
lines to be added to the session script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_colors-function" class="anchor" href="#the-xoloxsessionsave_colors-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_colors()</code> function</h4>

<p>Save the current color scheme and background color. The first argument is
expected to be a list, it will be extended with the lines to be added to
the session script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_fullscreen-function" class="anchor" href="#the-xoloxsessionsave_fullscreen-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_fullscreen()</code> function</h4>

<p>Save the full screen state of Vim. This function provides integration
between my <a href="http://peterodding.com/code/vim/session">vim-session</a> and <a href="http://peterodding.com/code/vim/shell">vim-shell</a> plug-ins. The first
argument is expected to be a list, it will be extended with the lines to
be added to the session script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_qflist-function" class="anchor" href="#the-xoloxsessionsave_qflist-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_qflist()</code> function</h4>

<p>Save the contents of the quick-fix list. The first argument is expected to
be a list, it will be extended with the lines to be added to the session
script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_state-function" class="anchor" href="#the-xoloxsessionsave_state-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_state()</code> function</h4>

<p>Wrapper for the <a href="http://vimdoc.sourceforge.net/htmldoc/starting.html#:mksession">:mksession</a> command that slightly massages the
generated Vim script to get rid of some strange quirks in the way Vim
generates sessions. Also implements support for buffers with content that
was generated by other Vim plug-ins. The first argument is expected to
be a list, it will be extended with the lines to be added to the session
script.</p>

<h4>
<a name="user-content-the-xoloxsessionsave_special_windows-function" class="anchor" href="#the-xoloxsessionsave_special_windows-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#save_special_windows()</code> function</h4>

<p>Implements support for buffers with content that was generated by other
Vim plug-ins. The first argument is expected to be a list, it will be
extended with the lines to be added to the session script.</p>

<h4>
<a name="user-content-the-xoloxsessionauto_load-function" class="anchor" href="#the-xoloxsessionauto_load-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#auto_load()</code> function</h4>

<p>Automatically load the default or last used session when Vim starts.
Normally called by the <a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#VimEnter">VimEnter</a> automatic command event.</p>

<h4>
<a name="user-content-the-xoloxsessionauto_save-function" class="anchor" href="#the-xoloxsessionauto_save-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#auto_save()</code> function</h4>

<p>Automatically save the current editing session when Vim is closed.
Normally called by the <a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#VimLeavePre">VimLeavePre</a> automatic command event.</p>

<h4>
<a name="user-content-the-xoloxsessionauto_save_periodic-function" class="anchor" href="#the-xoloxsessionauto_save_periodic-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#auto_save_periodic()</code> function</h4>

<p>Automatically saves the current editing session every few minutes.
Normally called by the <a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#CursorHold">CursorHold</a> and <a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#CursorHoldI">CursorHoldI</a> automatic
command events.</p>

<h4>
<a name="user-content-the-xoloxsessionauto_unlock-function" class="anchor" href="#the-xoloxsessionauto_unlock-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#auto_unlock()</code> function</h4>

<p>Automatically unlock all sessions when Vim quits. Normally called by the
<a href="http://vimdoc.sourceforge.net/htmldoc/autocmd.html#VimLeavePre">VimLeavePre</a> automatic command event.</p>

<h4>
<a name="user-content-the-xoloxsessionprompt_for_name-function" class="anchor" href="#the-xoloxsessionprompt_for_name-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#prompt_for_name()</code> function</h4>

<p>Prompt the user to select one of the existing sessions. The first argument
is expected to be a string describing what will be done to the session
once it's been selected. Returns the name of the selected session as a
string. If no session is selected an empty string is returned. Here's
an example of what the prompt looks like:</p>

<pre><code>:call xolox#session#prompt_for_name('trash')

Please select the session to trash:

 1. first-session
 2. second-session
 3. third-session

Type number and &lt;Enter&gt; or click with mouse (empty cancels):
</code></pre>

<p>If only a single session exists there's nothing to choose from so the name
of that session will be returned directly, without prompting the user.</p>

<h4>
<a name="user-content-the-xoloxsessionname_to_path-function" class="anchor" href="#the-xoloxsessionname_to_path-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#name_to_path()</code> function</h4>

<p>Convert the name of a session (the first argument, expected to be a
string) to an absolute pathname. Any special characters in the session
name will be encoded using URL encoding. This means you're free to use
whatever naming conventions you like (regardless of special characters
like slashes). Returns a string.</p>

<h4>
<a name="user-content-the-xoloxsessionpath_to_name-function" class="anchor" href="#the-xoloxsessionpath_to_name-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#path_to_name()</code> function</h4>

<p>Convert the absolute pathname of a session script (the first argument,
expected to be a string) to a session name. This function assumes the
absolute pathname refers to the configured session directory, but it does
not check for it nor does it require it (it simple takes the base name
of the absolute pathname of the session script and decodes it). Returns a
string.</p>

<h4>
<a name="user-content-the-xoloxsessionget_names-function" class="anchor" href="#the-xoloxsessionget_names-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#get_names()</code> function</h4>

<p>Get the names of all available sessions. This scans the directory
configured with <code>g:session_directory</code> for files that end with the suffix
configured with <code>g:session_extension</code>, takes the base name of each file
and decodes any URL encoded characters. Returns a list of strings.</p>

<p>If the first argument is true (1) then the user defined function
configured with <code>g:session_name_suggestion_function</code> is called to find
suggested session names, which are prefixed to the list of available
sessions, otherwise the argument should be false (0).</p>

<h4>
<a name="user-content-the-xoloxsessioncomplete_names-function" class="anchor" href="#the-xoloxsessioncomplete_names-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#complete_names()</code> function</h4>

<p>Completion function for user defined Vim commands. Used by commands like
<code>:OpenSession</code> and <code>:DeleteSession</code>  (but not <code>:SaveSession</code>) to support
user friendly completion.</p>

<h4>
<a name="user-content-the-xoloxsessioncomplete_names_with_suggestions-function" class="anchor" href="#the-xoloxsessioncomplete_names_with_suggestions-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#complete_names_with_suggestions()</code> function</h4>

<p>Completion function for the Vim command <code>:SaveSession</code>.</p>

<h4>
<a name="user-content-the-xoloxsessionis_tab_scoped-function" class="anchor" href="#the-xoloxsessionis_tab_scoped-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#is_tab_scoped()</code> function</h4>

<p>Determine whether the current session is tab scoped or global. Returns 1
(true) when the session is tab scoped, 0 (false) otherwise.</p>

<h4>
<a name="user-content-the-xoloxsessionfind_current_session-function" class="anchor" href="#the-xoloxsessionfind_current_session-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#find_current_session()</code> function</h4>

<p>Find the name of the current tab scoped or global session. Returns a
string. If no session is active an empty string is returned.</p>

<h4>
<a name="user-content-the-xoloxsessionget_label-function" class="anchor" href="#the-xoloxsessionget_label-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#get_label()</code> function</h4>

<p>Get a human readable label based on the scope (tab scoped or global) and
name of a session. The first argument is the name (a string) and the
second argument is a boolean indicating the scope of the session; 1 (true)
means tab scoped and 0 (false) means global scope. Returns a string.</p>

<h4>
<a name="user-content-the-xoloxsessionoptions_include-function" class="anchor" href="#the-xoloxsessionoptions_include-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#options_include()</code> function</h4>

<p>Check whether Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">sessionoptions</a> option includes the keyword given
as the first argument (expected to be a string). Returns 1 (true) when it
does, 0 (false) otherwise.</p>

<h4>
<a name="user-content-the-xoloxsessioninclude_tabs-function" class="anchor" href="#the-xoloxsessioninclude_tabs-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#include_tabs()</code> function</h4>

<p>Check whether Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">sessionoptions</a> option includes the <code>tabpages</code>
keyword. Returns 1 (true) when it does, 0 (false) otherwise.</p>

<h4>
<a name="user-content-the-xoloxsessionchange_tab_options-function" class="anchor" href="#the-xoloxsessionchange_tab_options-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#change_tab_options()</code> function</h4>

<p>Temporarily change Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">sessionoptions</a> option so we can save a tab
scoped session. Saves a copy of the original value to be restored later.</p>

<h4>
<a name="user-content-the-xoloxsessionrestore_tab_options-function" class="anchor" href="#the-xoloxsessionrestore_tab_options-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#restore_tab_options()</code> function</h4>

<p>Restore the original value of Vim's <a href="http://vimdoc.sourceforge.net/htmldoc/options.html#%27sessionoptions%27">sessionoptions</a> option.</p>

<h3>
<a name="user-content-example-function-for-session-name-suggestions" class="anchor" href="#example-function-for-session-name-suggestions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example function for session name suggestions</h3>

<h4>
<a name="user-content-the-xoloxsessionsuggestionsvcs_feature_branch-function" class="anchor" href="#the-xoloxsessionsuggestionsvcs_feature_branch-function" aria-hidden="true"><span class="octicon octicon-link"></span></a>The <code>xolox#session#suggestions#vcs_feature_branch()</code> function</h4>

<p>This function implements an example of a function that can be used with
the <code>g:session_name_suggestion_function</code> option. It finds the name of the
current git or Mercurial feature branch (if any) and suggests this name as
the name for the session that is being saved with :SaveSession. Returns a
list with one string on success and an empty list on failure.</p>



<h2>
<a name="user-content-contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h2>

<p>If you have questions, bug reports, suggestions, etc. the author can be contacted at <a href="mailto:peter@peterodding.com">peter@peterodding.com</a>. The latest version is available at <a href="http://peterodding.com/code/vim/session/">http://peterodding.com/code/vim/session/</a> and <a href="http://github.com/xolox/vim-session">http://github.com/xolox/vim-session</a>. If you like the script please vote for it on <a href="http://www.vim.org/scripts/script.php?script_id=3150">Vim Online</a>.</p>

<h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>This software is licensed under the <a href="http://en.wikipedia.org/wiki/MIT_License">MIT license</a>.<br>
© 2014 Peter Odding &lt;<a href="mailto:peter@peterodding.com">peter@peterodding.com</a>&gt; and Ingo Karkat.</p>

<p>Thanks go out to everyone who has helped to improve the vim-session plug-in (whether through pull requests, bug reports or personal e-mails).</p>

<h2>
<a name="user-content-sample-session-script" class="anchor" href="#sample-session-script" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sample session script</h2>

<p>Here's an example session script generated by the vim-session plug-in while I was editing the plug-in itself in Vim:</p>

<pre><code>" ~/.vim/sessions/example.vim: Vim session script.
" Created by session.vim on 30 August 2010 at 05:26:28.
" Open this file in Vim and run :source % to restore your session.

set guioptions=aegit
set guifont=Monaco\ 13
if exists('g:syntax_on') != 1 | syntax on | endif
if exists('g:did_load_filetypes') != 1 | filetype on | endif
if exists('g:did_load_ftplugin') != 1 | filetype plugin on | endif
if exists('g:did_indent_on') != 1 | filetype indent on | endif
if !exists('g:colors_name') || g:colors_name != 'slate' | colorscheme slate | endif
call setqflist([])
let SessionLoad = 1
if &amp;cp | set nocp | endif
let s:so_save = &amp;so | let s:siso_save = &amp;siso | set so=0 siso=0
let v:this_session=expand("&lt;sfile&gt;:p")
silent only
cd ~/Development/Vim/vim-session
if expand('%') == '' &amp;&amp; !&amp;modified &amp;&amp; line('$') &lt;= 1 &amp;&amp; getline(1) == ''
  let s:wipebuf = bufnr('%')
endif
set shortmess=aoO
badd +473 ~/Development/Vim/vim-session/autoload.vim
badd +1 ~/Development/Vim/vim-session/README.md
badd +1 ~/Development/Vim/vim-session/session.vim
badd +1 ~/Development/Vim/vim-session/TODO.md
set lines=43 columns=167
edit ~/Development/Vim/vim-session/README.md
set splitbelow splitright
set nosplitbelow
set nosplitright
wincmd t
set winheight=1 winwidth=1
argglobal
let s:l = 28 - ((27 * winheight(0) + 21) / 42)
if s:l &lt; 1 | let s:l = 1 | endif
exe s:l
normal! zt
28
normal! 0
tabedit ~/Development/Vim/vim-session/TODO.md
set splitbelow splitright
set nosplitbelow
set nosplitright
wincmd t
set winheight=1 winwidth=1
argglobal
let s:l = 6 - ((5 * winheight(0) + 21) / 42)
if s:l &lt; 1 | let s:l = 1 | endif
exe s:l
normal! zt
6
normal! 0
tabedit ~/Development/Vim/vim-session/session.vim
set splitbelow splitright
set nosplitbelow
set nosplitright
wincmd t
set winheight=1 winwidth=1
argglobal
let s:l = 17 - ((16 * winheight(0) + 21) / 42)
if s:l &lt; 1 | let s:l = 1 | endif
exe s:l
normal! zt
17
normal! 014l
tabedit ~/Development/Vim/vim-session/autoload.vim
set splitbelow splitright
set nosplitbelow
set nosplitright
wincmd t
set winheight=1 winwidth=1
argglobal
let s:l = 473 - ((41 * winheight(0) + 21) / 42)
if s:l &lt; 1 | let s:l = 1 | endif
exe s:l
normal! zt
473
normal! 018l
tabnext 4
if exists('s:wipebuf')
  silent exe 'bwipe ' . s:wipebuf
endif
unlet! s:wipebuf
set winheight=1 winwidth=1 shortmess=filnxtToO
let s:sx = expand("&lt;sfile&gt;:p:r")."x.vim"
if file_readable(s:sx)
  exe "source " . fnameescape(s:sx)
endif
let &amp;so = s:so_save | let &amp;siso = s:siso_save
doautoall SessionLoadPost
unlet SessionLoad
</code></pre></article></div>
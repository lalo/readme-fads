<div class="announce instapaper_body adoc" data-path="README.adoc" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-babun---a-windows-shell-you-will-love" class="anchor" href="#babun---a-windows-shell-you-will-love" aria-hidden="true"><span class="octicon octicon-link"></span></a>Babun - a windows shell you will love</h1>
<div>
<div>
<div>
<p>Would you like to use a linux-like console on a Windows host without a lot of fuzz? Try out babun!</p>
</div>
<div>
<p>Have a look at a 2 minutes long screencast by <a href="https://twitter.com/tombujok">@tombujok</a>: <a href="http://vimeo.com/95045348">http://vimeo.com/95045348</a></p>
</div>
<div>
<div>

</div>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>
<div>
<p>Just download the <a href="http://projects.reficio.org/babun/babun-dist.zip">dist file</a>, unzip it and run the install.bat script. After a few minutes babun starts automatically.
The application will be installed to the <code>%USER_HOME%\.babun</code> directory. Use the <em>/target</em> option to install babun to a custom directory.</p>
</div>
<div>
<table><tr>
<td>
<div>Note</div>
</td>
<td>
There is no inteference with existing Cygwin installation
</td>
</tr></table>
</div>
<div>
<table><tr>
<td>
<div>Note</div>
</td>
<td>
You may have "whitespace" chars in your username - it is not recommende by Cygwin though <a href="http://cygwin.com/faq.html#faq.setup.name-with-space">FAQ</a>
</td>
</tr></table>
</div>
</div>
<div>
<h3>
<a name="user-content-features-in-10-seconds" class="anchor" href="#features-in-10-seconds" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features in 10 seconds</h3>
<div>
<p>Babun features the following:</p>
</div>
<div>
<ul>
<li>
<p>Pre-configured Cygwin with a lot of addons</p>
</li>
<li>
<p>Silent command-line installer, no admin rights required</p>
</li>
<li>
<p>pact - advanced package manager (like apt-get or yum)</p>
</li>
<li>
<p>xTerm-256 compatible console</p>
</li>
<li>
<p>HTTP(s) proxying support</p>
</li>
<li>
<p>Plugin-oriented architecture</p>
</li>
<li>
<p>Pre-configured git and shell</p>
</li>
<li>
<p>Integrated oh-my-zsh</p>
</li>
<li>
<p>Auto update feature</p>
</li>
</ul>
</div>
<div>
<p>Have a look at a sample screenshot!</p>
</div>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_vim.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_vim.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
<div>
<p>Do you like it? Follow babun on Twitter <a href="https://twitter.com/babunshell">@babunshell</a> or <a href="https://twitter.com/tombujok">@tombujok</a>.</p>
</div>
</div>
<div>
<h3>
<a name="user-content-features-in-3-minutes" class="anchor" href="#features-in-3-minutes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features in 3 minutes</h3>
<div>
<h4>
<a name="user-content-cygwin" class="anchor" href="#cygwin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cygwin</h4>
<div>
<p>The core of Babun consists of a pre-configured Cygwin. Cygwin is a great tool, but there’s a lot of quirks and tricks that makes you lose a lot of time to make it actually <em>usable</em>. Not only does babun solve most of these problems, but also contains a lot of vital packages, so that you can be productive from the very first minute.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-package-manager" class="anchor" href="#package-manager" aria-hidden="true"><span class="octicon octicon-link"></span></a>Package manager</h4>
<div>
<p>Babun provides a package manager called <code>pact</code>. It is similar to <em>apt-get</em> or <em>yum</em>. Pact enables installing/searching/upgrading and deinstalling cygwin packages with no hassle at all. Just invoke <code>pact --help</code> to check how to use it.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-shell" class="anchor" href="#shell" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shell</h4>
<div>
<p>Babun’s shell is tweaked in order to provide the best possible user-experience. There are two shell types that are pre-configured and avaiable right away - bash and zsh (zsh is the default one). Babun’s shell features:</p>
</div>
<div>
<ul>
<li>
<p>syntax highlighting</p>
</li>
<li>
<p>unix tools</p>
</li>
<li>
<p>software development tools</p>
</li>
<li>
<p>git-aware prompt</p>
</li>
<li>
<p>custom scripts and aliases</p>
</li>
<li>
<p>and much more!</p>
</li>
</ul>
</div>
</div>
<div>
<h4>
<a name="user-content-console" class="anchor" href="#console" aria-hidden="true"><span class="octicon octicon-link"></span></a>Console</h4>
<div>
<p>Mintty is the console used in babun. It features an <code>xterm-256</code> mode, nice fonts and simply looks great!</p>
</div>
</div>
<div>
<h4>
<a name="user-content-proxying" class="anchor" href="#proxying" aria-hidden="true"><span class="octicon octicon-link"></span></a>Proxying</h4>
<div>
<p>Babun supports HTTP proxying out of the box. Just add the address and the credentials of your HTTP proxy server to the <code>.babunrc</code> file located in your home folder and execute <code>source .babunrc</code> to enable HTTP proxying. SOCKS proxies are not supported for now.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-developer-tools" class="anchor" href="#developer-tools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developer tools</h4>
<div>
<p>Babun provides many packages, convenience tools and scripts that make your life much easier. The long list of features includes:</p>
</div>
<div>
<ul>
<li>
<p>programming languages (python, perl, etc.)</p>
</li>
<li>
<p>git (with a wide variety of aliases and tweaks)</p>
</li>
<li>
<p>unix tools (grep, wget, curl, etc.)</p>
</li>
<li>
<p>vcs (svn, git)</p>
</li>
<li>
<p>oh-my-zsh</p>
</li>
<li>
<p>custom scripts (pbcopy, pbpaste, babun, etc.)</p>
</li>
</ul>
</div>
</div>
<div>
<h4>
<a name="user-content-plugin-architecture" class="anchor" href="#plugin-architecture" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plugin architecture</h4>
<div>
<p>Babun has a very small microkernel (cygwin, a couple of bash scripts and a bit of a convention) and a plugin architecture on the top of it. It means that almost everything is a plugin in the babun’s world! Not only does it structure babun in a clean way, but also enables others to contribute small chunks of code. Currently, babun comprises six plugins:</p>
</div>
<div>
<ul>
<li>
<p>cacert</p>
</li>
<li>
<p>core</p>
</li>
<li>
<p>git</p>
</li>
<li>
<p>oh-my-zsh</p>
</li>
<li>
<p>pact</p>
</li>
<li>
<p>shell</p>
</li>
</ul>
</div>
</div>
<div>
<h4>
<a name="user-content-auto-update" class="anchor" href="#auto-update" aria-hidden="true"><span class="octicon octicon-link"></span></a>Auto-update</h4>
<div>
<p>Self-update is at the very heart of babun! Many Cygwin tools are simple bash scripts - once you install them there is no chance of getting the newer version in a smooth way. You either delete the older version or overwrite it with the newest one losing all the changes you have made in between.</p>
</div>
<div>
<p>Babun contains an auto-update feature which enables updating both the microkernel and the plugins. Files located in your home folder will not be delted nor overwritten which preserves your local config and customizations.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-installer" class="anchor" href="#installer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installer</h4>
<div>
<p>Babun features an silent command-line installation script that may be executed without admin rights on any Windows hosts.</p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-using-babun" class="anchor" href="#using-babun" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using babun</h3>
<div>
<h4>
<a name="user-content-setting-up-proxy" class="anchor" href="#setting-up-proxy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up proxy</h4>
<div>
<p>To setup proxy uncomment following lines in the <code>.babunrc</code> file <code>(%USER_HOME%\.babun\cygwin\home\USER\.babunrc)</code></p>
</div>
<div>
<div>
<pre># Uncomment this lines to set up your proxy
# export http_proxy=http://user:password@server:port
# export https_proxy=$http_proxy
# export ftp_proxy=$http_proxy
# export no_proxy=localhost</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-setting-up-git" class="anchor" href="#setting-up-git" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setting up git</h4>
<div>
<p>Babun has a pre-configured git. The only thing you should do after the installation is to add your name and email to the git config:</p>
</div>
<div>
<div>
<pre>git config --global user.name "your name"
git config --global user.email "your@email.com"</pre>
</div>
</div>
<div>
<p>There’s a lot of great git aliases provided by the git plugin:</p>
</div>
<div>
<div>
<pre>gitalias['alias.cp']='cherry-pick'
gitalias['alias.st']='status -sb'
gitalias['alias.cl']='clone'
gitalias['alias.ci']='commit'
gitalias['alias.co']='checkout'
gitalias['alias.br']='branch'
gitalias['alias.dc']='diff --cached'
gitalias['alias.lg']="log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %Cblue&lt;%an&gt;%Creset' --abbrev-commit --date=relative --all"
gitalias['alias.last']='log -1 --stat'
gitalias['alias.unstage']='reset HEAD --'</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-installing-and-removing-packages" class="anchor" href="#installing-and-removing-packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installing and removing packages</h4>
<div>
<p>Babun is shipped with <code>pact</code> - a Linux like package manager. It uses the cygwin repository for downloading packages:</p>
</div>
<div>
<div>
<pre>{ ~ } » pact install arj                                                                     ~
Working directory is /setup
Mirror is http://mirrors.kernel.org/sourceware/cygwin/
setup.ini taken from the cache

Installing arj
Found package arj
--2014-03-30 19:34:38--  http://mirrors.kernel.org/sourceware/cygwin//x86/release/arj/arj-3.10.22-1.tar.bz2
Resolving mirrors.kernel.org (mirrors.kernel.org)... 149.20.20.135, 149.20.4.71, 2001:4f8:1:10:0:1994:3:14, ...
Connecting to mirrors.kernel.org (mirrors.kernel.org)|149.20.20.135|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 189944 (185K) [application/x-bzip2]
Saving to: `arj-3.10.22-1.tar.bz2'

100%[==========================================================&gt;] 189,944      193K/s   in 1.0s

2014-03-30 19:34:39 (193 KB/s) - `arj-3.10.22-1.tar.bz2' saved [189944/189944]

Unpacking...
Package arj installed</pre>
</div>
</div>
<div>
<p>Here’s the list of all pact’s features:</p>
</div>
<div>
<div>
<pre>{ ~ }  » pact --help                                                                         ~
pact: Installs and removes Cygwin packages.

Usage:
  "pact install &lt;package names&gt;" to install packages
  "pact remove &lt;package names&gt;" to remove packages
  "pact update" to update setup.ini
  "pact show" to show installed packages
  "pact find &lt;patterns&gt;" to find packages matching patterns
  "pact describe &lt;patterns&gt;" to describe packages matching patterns
  "pact packageof &lt;commands or files&gt;" to locate parent packages
Options:
  --mirror, -m &lt;url&gt; : set mirror
  --update, -u       : force update setup.ini from mirror
  --help
  --version</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-changing-the-default-shell" class="anchor" href="#changing-the-default-shell" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changing the default shell</h4>
<div>
<p>The zsh (with .oh-my-zsh) is the default babun’s shell.</p>
</div>
<div>
<p>Executing the following command will output your default shell:</p>
</div>
<div>
<div>
<pre>{ ~ } » babun shell                                                                          ~
/bin/zsh</pre>
</div>
</div>
<div>
<p>In order to change your default shell execute:</p>
</div>
<div>
<div>
<pre>{ ~ } » babun shell /bin/bash                                                                ~
/bin/zsh
/bin/bash</pre>
</div>
</div>
<div>
<p>The output contains two lines: the previous default shell and the new default shell</p>
</div>
</div>
<div>
<h4>
<a name="user-content-checking-the-configuration" class="anchor" href="#checking-the-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Checking the configuration</h4>
<div>
<p>Execute the following command the check the configuration:</p>
</div>
<div>
<div>
<pre>{ ~ } » babun check                                                                          ~
Executing babun check
Prompt speed      [OK]
Connection check  [OK]
Update check      [OK]</pre>
</div>
</div>
<div>
<p>It will check if there are problems with the speed of the git prompt, if there’s access to the Internet or finally if you are running the newest version of babun.</p>
</div>
<div>
<p>The command will output hints if problems occur:</p>
</div>
<div>
<div>
<pre>{ ~ } » babun check                                                                          ~
Executing babun check
Prompt speed      [SLOW]
Hint: your prompt is very slow. Check the installed 'BLODA' software.
Connection check  [OK]
Update check      [OK]</pre>
</div>
</div>
<div>
<p>On each startup, but only every 24 hours, babun will execute this check automatically. You can disable the automatic check in the ~/.babunrc file.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-tweaking-the-configuration" class="anchor" href="#tweaking-the-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tweaking the configuration</h4>
<div>
<p>You can tweak some config options in the ~/.babunrc file. Here’s the full list of variables that may be modified:</p>
</div>
<div>
<div>
<pre># JVM options
export JAVA_OPTS="-Xms128m -Xmx256m"

# Modify these lines to set your locale
export LANG="en_US.UTF-8"
export LC_CTYPE="en_US.UTF-8"
export LC_ALL="en_US.UTF-8"

# Uncomment these lines to the set your machine's default locale (and comment out the UTF-8 ones)
# export LANG=$(locale -uU)
# export LC_CTYPE=$(locale -uU)
# export LC_ALL=$(locale -uU)

# Uncomment this to disable daily auto-update &amp; proxy checks on startup (not recommended!)
# export DISABLE_CHECK_ON_STARTUP="true"

# Uncomment to increase/decrease the check connection timeout
# export CHECK_TIMEOUT_IN_SECS=4

# Uncomment this lines to set up your proxy
# export http_proxy=http://user:password@server:port
# export https_proxy=$http_proxy
# export ftp_proxy=$http_proxy
# export no_proxy=localhost</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-updating-babun" class="anchor" href="#updating-babun" aria-hidden="true"><span class="octicon octicon-link"></span></a>Updating babun</h4>
<div>
<p>To update babun to the newest version execute:</p>
</div>
<div>
<div>
<pre>babun update</pre>
</div>
</div>
<div>
<p>Please note that your local configuration files will not be overwritten.</p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-screenshots" class="anchor" href="#screenshots" aria-hidden="true"><span class="octicon octicon-link"></span></a>Screenshots</h3>
<div>
<h4>
<a name="user-content-startup-screen" class="anchor" href="#startup-screen" aria-hidden="true"><span class="octicon octicon-link"></span></a>Startup screen</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_welcome.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_welcome.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-pact---package-installation" class="anchor" href="#pact---package-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pact - package installation</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_pact_install.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_pact_install.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-pact---package-installed" class="anchor" href="#pact---package-installed" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pact - package installed</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_pact_installed.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_pact_installed.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-oh-my-zsh---auto-update" class="anchor" href="#babun-oh-my-zsh---auto-update" aria-hidden="true"><span class="octicon octicon-link"></span></a>Babun oh-my-zsh - auto-update</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_zsh_update.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_zsh_update.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-vim-syntax-highlighting" class="anchor" href="#vim-syntax-highlighting" aria-hidden="true"><span class="octicon octicon-link"></span></a>VIM syntax highlighting</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_vim.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_vim.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-nano-syntax-highlighting" class="anchor" href="#nano-syntax-highlighting" aria-hidden="true"><span class="octicon octicon-link"></span></a>Nano syntax highlighting</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_nano.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_nano.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-git-aliases---git-lg" class="anchor" href="#git-aliases---git-lg" aria-hidden="true"><span class="octicon octicon-link"></span></a>Git aliases - git lg</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_git_lg.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_git_lg.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-git-aliases---git-st" class="anchor" href="#git-aliases---git-st" aria-hidden="true"><span class="octicon octicon-link"></span></a>Git aliases - git st</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_git_st.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_git_st.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-shell-prompt" class="anchor" href="#shell-prompt" aria-hidden="true"><span class="octicon octicon-link"></span></a>Shell prompt</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_shell.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_shell.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-update" class="anchor" href="#babun-update" aria-hidden="true"><span class="octicon octicon-link"></span></a>Babun update</h4>
<div>
<div>
<a href="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_update.png" target="_blank"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/screen_update.png" alt="babun - a Windows shell you will love!" style="max-width:100%;"></a>
</div>
</div>
</div>
</div>
<div>
<h2>
<a name="user-content-development" class="anchor" href="#development" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development</h2>
<div>
<div>
<h3>
<a name="user-content-project-structure" class="anchor" href="#project-structure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Project structure</h3>
<div>
<p>The project consists of five modules.</p>
</div>
<div>
<h4>
<a name="user-content-babun-packages" class="anchor" href="#babun-packages" aria-hidden="true"><span class="octicon octicon-link"></span></a>babun-packages</h4>
<div>
<p>The main goal of the <code>babun-packages</code> module is to download the cygwin packages listed in the <code>conf/cygwin.x86.packages</code> file.
The abovementioned packages will be downloaded together with the whole dependency tree. Repositories which the packages are downloaded from are listed in the <code>conf/cygwin.repositories</code> file. At the beginning the first repository is taken, if a package is not available in this repo the second repo is used, etc. The process continues until all packages have been downloaded.</p>
</div>
<div>
<p>All downloaded packages are stored in the <code>target/babun-packages</code> folder.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-cygwin" class="anchor" href="#babun-cygwin" aria-hidden="true"><span class="octicon octicon-link"></span></a>babun-cygwin</h4>
<div>
<p>The main goal of the <code>babun-cygwin</code> module is to download and invoke the native cygwin.exe installer. The packages downloaded by the babun-packages module are used as the input - all of them will be installed in the offline cygwin installation.</p>
</div>
<div>
<p>It is not trivial to install and zip a local instance of Cygwin - there are problems with the symlinks as the symlink-file-flags are lost during the compression process. Babun can work it around though. At first, just after the installaion, the <code>symlinks_find.sh</code> script is invoked in order to store the list of all cygwin’s symlinks. This file is delivered as a part of the the babun’s core. Then, after babun is installed from the zip file on the user’s host the <code>symlinks_repair.sh</code> script is invoked - it will correct all the broken symlinks listed in the abovementioned file.</p>
</div>
<div>
<p>Preinstalled cygwin is located in the <code>target/babun-cygwin</code> folder.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-core" class="anchor" href="#babun-core" aria-hidden="true"><span class="octicon octicon-link"></span></a>babun-core</h4>
<div>
<p>The main goal of the <code>babun-core</code> module is to install babun’s core along with all the plugins and tools. <code>install.sh</code> script is invoked during the creation of the distribution package in order to preinstall the plugins. Whenver babun is installed on the user’s host the <code>install_home.sh</code> script is invoke in order to install the babun-related files to the cygwin-user’s home folder.</p>
</div>
<div>
<p>Preinstalled cygwin with installed babun is located in the <code>target/babun-cygwin</code> folder.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-dist" class="anchor" href="#babun-dist" aria-hidden="true"><span class="octicon octicon-link"></span></a>babun-dist</h4>
<div>
<p>The main goal of the <code>babun-dist</code> module is to zip the ready-made instance of babun, copy some installation scripts and zip the distributrion.</p>
</div>
<div>
<p>Distribution package is located in the <code>target/babun-dist</code> folder.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-babun-doc" class="anchor" href="#babun-doc" aria-hidden="true"><span class="octicon octicon-link"></span></a>babun-doc</h4>
<div>
<p>This module contains documentation written in ASCIIDOC.</p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-building-from-source" class="anchor" href="#building-from-source" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building from source</h3>
<div>
<p>The project is regularly build on Jenkins, on a slave node featurint the Windows Server OS. The Windows OS is required to fully build the distribution package as one of the goals invokes the native <code>cygwin.exe</code> installer. The artifacts created by each module are cached/stored in the target folder after a successful build of each step. This mechanism is not intelligent enough to calculate the diffs so if you would like to fully rebuild the whole dist package make sure to invoke the <code>clean</code> goal before the <code>package</code> goal. For now it’s not possible to invoke a build of a selective modules only.</p>
</div>
<div>
<p>In order to build the dist package invoke:</p>
</div>
<div>
<div>
<pre>groovy build.groovy package</pre>
</div>
</div>
<div>
<p>In order to clean the project target folder invoke:</p>
</div>
<div>
<div>
<pre>groovy build.groovy clean</pre>
</div>
</div>
<div>
<p>In order to publish the release version to bintray invoke:</p>
</div>
<div>
<div>
<pre>groovy build.groovy release</pre>
</div>
</div>
<div>
<p>The release goal expects the following environment variables: <code>bintray_user</code> and <code>bintray_secret</code></p>
</div>
</div>
<div>
<h3>
<a name="user-content-developing-a-plugin" class="anchor" href="#developing-a-plugin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Developing a plugin</h3>
<div>
<p>Every plugin has to consist of three main files:</p>
</div>
<div>
<ul>
<li>
<p>install.sh - a file that will be invoke during the creation of the babun’s distribution</p>
</li>
<li>
<p>install_home.sh - a file that will be invoked during the installation of babun to the user’s home folder</p>
</li>
<li>
<p>plugin.desc - a plugin description that contains the plugin_name and plugin_version variables</p>
</li>
</ul>
</div>
<div>
<p>Have a look at the pact plugin - it’s a perfect example of a relatively small plugin using all the features.</p>
</div>
<div>
<h4>
<a name="user-content-installsh" class="anchor" href="#installsh" aria-hidden="true"><span class="octicon octicon-link"></span></a>install.sh</h4>
<div>
<p>Its main responsibility is to install the plugin - for example to copy the plugin files to, e.g. <code>/usr/local/etc</code> or <code>/usr/local/bin</code> directories. install.sh script is also responsbile for preparing the user’s home folder template. The template files have to be copied to the <code>/usr/local/babun/home/&lt;plugin_name&gt;</code> folder.</p>
</div>
<div>
<p>install.sh will be invoked many times - on every plugin update if the plugin version is higher than the version of the installed plugin - thus it’s logic has to work in an incremental way. This mechanism is invoked automatically though. The plugin does not have to contain the version check.</p>
</div>
<div>
<p>The script has to begin with the following statement:</p>
</div>
<div>
<div>
<pre>#!/bin/bash
set -e -f -o pipefail
source "/usr/local/etc/babun/source/babun-core/tools/script.sh"</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-install_homesh" class="anchor" href="#install_homesh" aria-hidden="true"><span class="octicon octicon-link"></span></a>install_home.sh</h4>
<div>
<p>Its main responsbility is to configure the user’s home folder with the plugin releated stuff, if necessary. For example, it may copy the files from the <code>/usr/local/babun/home/&lt;plugin_name&gt;</code> folder to the user’s home folder.
It is also responsible for any other things that may be necessary during the user’s home configuration process.</p>
</div>
<div>
<p>install_home.sh will be invoked many times - on every plugin update if the plugin version is higher than the version of the installed plugin - thus it’s logic has to work in an incremental way.</p>
</div>
<div>
<p>Both scripts (install.sh and install_home.sh) scripts have to begin with the following statement:</p>
</div>
<div>
<div>
<pre>#!/bin/bash
set -e -f -o pipefail
source "/usr/local/etc/babun/source/babun-core/tools/script.sh"</pre>
</div>
</div>
</div>
<div>
<h4>
<a name="user-content-plugindesc" class="anchor" href="#plugindesc" aria-hidden="true"><span class="octicon octicon-link"></span></a>plugin.desc</h4>
<div>
<p>A plugin descriptor looks like this:</p>
</div>
<div>
<div>
<pre># plugin descriptor
plugin_name=pact
plugin_version=1</pre>
</div>
</div>
<div>
<p>Every time the plugin is changed the version has to be incremented. Otherwise the newest version will not be installed.</p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-branches" class="anchor" href="#branches" aria-hidden="true"><span class="octicon octicon-link"></span></a>Branches</h3>
<div>
<p>The babun’s repository contains three main branches:
* master - development branch
* candidate - release candidate branch, no direct commmits, only fast forwards from the master/other branch
* release - release, no direct commits, only fast forwards from the candidate branch</p>
</div>
<div>
<p>In order to check babun update agains other branch (for example during a development of a plugin), set the babun_branch variable to (master or candidate). External repo’s are not supporter (this mechanism has to be extended to include user’s repos).</p>
</div>
</div>
<div>
<h3>
<a name="user-content-folder-structure-in-cygwin" class="anchor" href="#folder-structure-in-cygwin" aria-hidden="true"><span class="octicon octicon-link"></span></a>Folder structure in Cygwin</h3>
<div>
<p>An instance of babun installed in Cygwin is located in the <code>/usr/local/etc/babun</code> folder.
The folder structure looks like this:</p>
</div>
<div>
<div>
<pre>├── babun
│   ├── external
│   │   └── oh-my-zsh
│   ├── home
│   │   ├── core
│   │   ├── oh-my-zsh
│   │   ├── pact
│   │   └── shell
│   ├── installed
│   │   ├── babun
│   │   ├── cacert
│   │   ├── core
│   │   ├── git
│   │   ├── oh-my-zsh
│   │   ├── pact
│   │   └── shell
│   ├── source
│   │   ├── babun.version
│   │   ├── babun-core
│   │   ├── babun-cygwin
│   │   ├── babun-dist
│   │   ├── babun-doc
│   │   ├── babun-packages
│   │   ├── build.groovy
│   │   └── README.adoc
│   └── stamps
│       ├── check
│       └── welcome
├── babun.bash
├── babun.instance
├── babun.rc
├── babun.start
└── babun.zsh

16 directories, 17 files</pre>
</div>
</div>
<div>
<h4>
<a name="user-content-source" class="anchor" href="#source" aria-hidden="true"><span class="octicon octicon-link"></span></a>source</h4>
<div>
<p>The folder contains the sources of babun checkout from github.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-stamps" class="anchor" href="#stamps" aria-hidden="true"><span class="octicon octicon-link"></span></a>stamps</h4>
<div>
<p>The folder contains files which modification time indicates certain things to babun. For example <code>babun check</code> is execued automatically on babun’s startup every 24 hours. Whenver it’s invoked a file named <code>checked</code> is being modified (the content of the modification does not matter).Whenever the mod_time of this file is not within 24 hours and babun is being started a <code>babun check</code> will be invoked and the file <code>check</code> located in the <code>stamps</code> folder will be modifed again.</p>
</div>
</div>
<div>
<h4>
<a name="user-content-installed" class="anchor" href="#installed" aria-hidden="true"><span class="octicon octicon-link"></span></a>installed</h4>
<div>
<p>The folder contains files that indicated which versions of babun’s plugins and babun itself are installed. Each file cotanis a number - for example: a file named <code>core</code> contains has one line with number <code>2</code> in its content. It means that the pluing <code>core</code> is installed and has version <code>2</code></p>
</div>
</div>
<div>
<h4>
<a name="user-content-external" class="anchor" href="#external" aria-hidden="true"><span class="octicon octicon-link"></span></a>external</h4>
<div>
<p>The folder contains external resources, like cloned repos of other projects (for example oh-my-zsh).</p>
</div>
</div>
<div>
<h4>
<a name="user-content-home" class="anchor" href="#home" aria-hidden="true"><span class="octicon octicon-link"></span></a>home</h4>
<div>
<p>The folder contains folders named like plugins. If a plugin needs to install something to user’s folder this content has to be copied to "home/&lt;plugin_name&gt;" folder. It’s just a store of the user’s home files, so that whenver a new user’s account is created babun can install user’s home related content to the user’s home folder (it’s the plugin install_home.sh script’s responsibility, however, to copy this content to the actual user’s home folder).</p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-licence" class="anchor" href="#licence" aria-hidden="true"><span class="octicon octicon-link"></span></a>Licence</h3>
<div>
<p>The source code located in the babun’s repository is published under the Apache License, Version 2.0, January 2004 if not stated otherwise.</p>
</div>
<div>
<p>Since the distribution (zip) package contains the Cygwin’s DLLs the distribution package is licensed under the GPLv3+ licence to satisfy the Cygwin’s licensing terms (<a href="http://cygwin.com/licensing.html">http://cygwin.com/licensing.html</a>).</p>
</div>
</div>
<div>
<h3>
<a name="user-content-supporters" class="anchor" href="#supporters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supporters</h3>
<div>
<p>Special thanks go to companies who provided free hosting!</p>
</div>
<div>
<h5>
<a name="user-content-xcloud" class="anchor" href="#xcloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>XCLOUD</h5>
<div>
<p><a href="http://xcloud.me/">XCLOUD.ME</a> provided a free hosted OS X instance (a free Xcloud Mini Server subscription). It works like a charm! Thank you!</p>
</div>
<div>
<div>
<a href="http://xcloud.me/"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/xcloud_logo.png" alt="XCLOUD" style="max-width:100%;"></a>
</div>
</div>
<div>
<p>"Run, manage and scale your virtual dedicated OS X Server in the Cloud."</p>
</div>
<div>
<p><em>XCLOUD is a trademark of AG from Switzerland.</em></p>
</div>
</div>
<div>
<h5>
<a name="user-content-windows-azure" class="anchor" href="#windows-azure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows Azure</h5>
<div>
<p><a href="http://www.azure.microsoft.com">Windows Azure</a> provided a free Windows Hosting (a free, renewable MSDN subscription). Everything was organised by @bureado. Thank you!</p>
</div>
<div>
<div>
<a href="http://www.azure.microsoft.com"><img src="https://raw.githubusercontent.com/babun/babun.github.io/master/images/ms_azure_logo.png" alt="Windows Azure" style="max-width:100%;"></a>
</div>
</div>
<div>
<p><em>Microsoft and Windows are registered trademarks of Microsoft Corporation in the United States of America and other countries. Windows Azure is a trademark of Microsoft Corporation.</em></p>
</div>
</div>
</div>
<div>
<h3>
<a name="user-content-contribute" class="anchor" href="#contribute" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribute</h3>
<div>
<p>Babun is open source and driven by the community. There are many ways to contribute:</p>
</div>
<div>
<ul>
<li>
<p>Use it and tell us what you think</p>
</li>
<li>
<p>Recommend it to your friends</p>
</li>
<li>
<p>Submit a <a href="https://github.com/babun/babun/issues">feature request</a> or a <a href="https://github.com/babun/babun/issues">bug report</a></p>
</li>
<li>
<p>Fork it on <a href="https://github.com/babun/babun">github</a> and submit pull request</p>
</li>
</ul>
</div>
<div>
<p>We are looking for new contributors, so if you fancy bash progamming and if you would like to contribute a patch or a code up a new plugin give us a shout!</p>
</div>
<div>
<p>Visit the <a href="http://babun.github.io/development/">development</a> section to find out how to create plugins and extensions.</p>
</div>
</div>
<div>
<h3>
<a name="user-content-meet-the-team" class="anchor" href="#meet-the-team" aria-hidden="true"><span class="octicon octicon-link"></span></a>Meet the team</h3>
<div>
<p><a href="https://twitter.com/tombujok">https://twitter.com/tombujok</a></p>
</div>
<div>
<p><a href="https://twitter.com/lukaszpielak">https://twitter.com/lukaszpielak</a></p>
</div>
<div>
<div>
<a href="https://bitdeli.com/free"><img src="https://camo.githubusercontent.com/9d4f440b8bf70043029232fd12219a7607fc5d33/68747470733a2f2f64327765637a68766c38323376302e636c6f756466726f6e742e6e65742f7265666963696f2f626162756e2f7472656e642e706e67" alt="Bitdeli Badge" data-canonical-src="https://d2weczhvl823v0.cloudfront.net/reficio/babun/trend.png" style="max-width:100%;"></a>
</div>
</div>
</div>
</div>
</div></article></div>
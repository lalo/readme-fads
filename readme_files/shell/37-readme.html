<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-chruby" class="anchor" href="#chruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>chruby</h1>

<p><a href="https://travis-ci.org/postmodern/chruby"><img src="https://camo.githubusercontent.com/0f46b6c8c17fb145e429f6704b8f939bdfdabdb9/68747470733a2f2f7472617669732d63692e6f72672f706f73746d6f6465726e2f6368727562792e706e67" alt="Build Status" data-canonical-src="https://travis-ci.org/postmodern/chruby.png" style="max-width:100%;"></a></p>

<p>Changes the current Ruby.</p>

<h2>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul class="task-list">
<li>Updates <code>$PATH</code>.

<ul class="task-list">
<li>Also adds RubyGems <code>bin/</code> directories to <code>$PATH</code>.</li>
</ul>
</li>
<li>Correctly sets <code>$GEM_HOME</code> and <code>$GEM_PATH</code>.

<ul class="task-list">
<li>Users: gems are installed into <code>~/.gem/$ruby/$version</code>.</li>
<li>Root: gems are installed directly into <code>/path/to/$ruby/$gemdir</code>.</li>
</ul>
</li>
<li>Additionally sets <code>$RUBY_ROOT</code>, <code>$RUBY_ENGINE</code>, <code>$RUBY_VERSION</code> and
<code>$GEM_ROOT</code>.</li>
<li>Optionally sets <code>$RUBYOPT</code> if second argument is given.</li>
<li>Calls <code>hash -r</code> to clear the command-lookup hash-table.</li>
<li>Fuzzy matching of Rubies by name.</li>
<li>Defaults to the system Ruby.</li>
<li>Optionally supports auto-switching and the <code>.ruby-version</code> file.</li>
<li>Supports <a href="http://www.gnu.org/software/bash/">bash</a> and <a href="http://www.zsh.org/">zsh</a>.</li>
<li>Small (~90 LOC).</li>
<li>Has tests.</li>
</ul><h2>
<a name="user-content-anti-features" class="anchor" href="#anti-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Anti-Features</h2>

<ul class="task-list">
<li>Does not hook <code>cd</code>.</li>
<li>Does not install executable shims.</li>
<li>Does not require Rubies be installed into your home directory.</li>
<li>Does not automatically switch Rubies by default.</li>
<li>Does not require write-access to the Ruby directory in order to install gems.</li>
</ul><h2>
<a name="user-content-install" class="anchor" href="#install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install</h2>

<pre><code>wget -O chruby-0.3.8.tar.gz https://github.com/postmodern/chruby/archive/v0.3.8.tar.gz
tar -xzvf chruby-0.3.8.tar.gz
cd chruby-0.3.8/
sudo make install
</code></pre>

<h3>
<a name="user-content-pgp" class="anchor" href="#pgp" aria-hidden="true"><span class="octicon octicon-link"></span></a>PGP</h3>

<p>All releases are <a href="http://en.wikipedia.org/wiki/Pretty_Good_Privacy">PGP</a> signed for security. Instructions on how to import my
PGP key can be found on my <a href="http://postmodern.github.com/contact.html#pgp">blog</a>. To verify that a release was not tampered 
with:</p>

<pre><code>wget https://raw.github.com/postmodern/chruby/master/pkg/chruby-0.3.8.tar.gz.asc
gpg --verify chruby-0.3.8.tar.gz.asc chruby-0.3.8.tar.gz
</code></pre>

<h3>
<a name="user-content-setupsh" class="anchor" href="#setupsh" aria-hidden="true"><span class="octicon octicon-link"></span></a>setup.sh</h3>

<p>chruby also includes a <code>setup.sh</code> script, which installs chruby and the latest
releases of <a href="http://www.ruby-lang.org/en/">Ruby</a>, <a href="http://jruby.org/">JRuby</a> and <a href="http://rubini.us/">Rubinius</a>. Simply run the script as root or 
via <code>sudo</code>:</p>

<pre><code>sudo ./scripts/setup.sh
</code></pre>

<h3>
<a name="user-content-homebrew" class="anchor" href="#homebrew" aria-hidden="true"><span class="octicon octicon-link"></span></a>Homebrew</h3>

<p>chruby can also be installed with <a href="http://brew.sh/">homebrew</a>:</p>

<pre><code>brew install chruby
</code></pre>

<p>Or the absolute latest chruby can be installed from source:</p>

<pre><code>brew install chruby --HEAD
</code></pre>

<h3>
<a name="user-content-arch-linux" class="anchor" href="#arch-linux" aria-hidden="true"><span class="octicon octicon-link"></span></a>Arch Linux</h3>

<p>chruby is already included in the <a href="https://aur.archlinux.org/packages/chruby/">AUR</a>:</p>

<pre><code>yaourt -S chruby
</code></pre>

<h3>
<a name="user-content-freebsd" class="anchor" href="#freebsd" aria-hidden="true"><span class="octicon octicon-link"></span></a>FreeBSD</h3>

<p>chruby is included in the official <a href="https://www.freshports.org/devel/chruby/">FreeBSD ports collection</a>:</p>

<pre><code>cd /usr/ports/devel/chruby/ &amp;&amp; make install clean
</code></pre>

<h3>
<a name="user-content-rubies" class="anchor" href="#rubies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rubies</h3>

<h4>
<a name="user-content-manually" class="anchor" href="#manually" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manually</h4>

<p>Chruby provides detailed instructions for installing additional Rubies:</p>

<ul class="task-list">
<li><a href="https://github.com/postmodern/chruby/wiki/Ruby">Ruby</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/JRuby">JRuby</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/Rubinius">Rubinius</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/MagLev">MagLev</a></li>
</ul><h4>
<a name="user-content-ruby-install" class="anchor" href="#ruby-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>ruby-install</h4>

<p>You can also use <a href="https://github.com/postmodern/ruby-install#readme">ruby-install</a> to install additional Rubies:</p>

<p>Installing to <code>/opt/rubies</code> or <code>~/.rubies</code>:</p>

<pre><code>ruby-install ruby
ruby-install jruby
ruby-install rubinius
ruby-install maglev
</code></pre>

<h4>
<a name="user-content-ruby-build" class="anchor" href="#ruby-build" aria-hidden="true"><span class="octicon octicon-link"></span></a>ruby-build</h4>

<p>You can also use <a href="https://github.com/sstephenson/ruby-build#readme">ruby-build</a> to install additional Rubies:</p>

<p>Installing to <code>/opt/rubies</code>:</p>

<pre><code>ruby-build 1.9.3-p392 /opt/rubies/ruby-1.9.3-p392
ruby-build jruby-1.7.3 /opt/rubies/jruby-1.7.3
ruby-build rbx-2.0.0-rc1 /opt/rubies/rubinius-2.0.0-rc1
ruby-build maglev-1.0.0 /opt/rubies/maglev-1.0.0
</code></pre>

<h2>
<a name="user-content-configuration" class="anchor" href="#configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration</h2>

<p>Add the following to the <code>~/.bashrc</code> or <code>~/.zshrc</code> file:</p>

<div class="highlight highlight-bash"><pre><span class="nb">source</span> /usr/local/share/chruby/chruby.sh
</pre></div>

<h3>
<a name="user-content-system-wide" class="anchor" href="#system-wide" aria-hidden="true"><span class="octicon octicon-link"></span></a>System Wide</h3>

<p>If you wish to enable chruby system-wide, add the following to
<code>/etc/profile.d/chruby.sh</code>:</p>

<div class="highlight highlight-bash"><pre><span class="k">if</span> <span class="o">[</span> -n <span class="s2">"$BASH_VERSION"</span> <span class="o">]</span> <span class="o">||</span> <span class="o">[</span> -n <span class="s2">"$ZSH_VERSION"</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
  <span class="nb">source</span> /usr/local/share/chruby/chruby.sh
  ...
<span class="k">fi</span>
</pre></div>

<p>This will prevent chruby from accidentally being loaded by <code>/bin/sh</code>, which
is not always the same as <code>/bin/bash</code>.</p>

<h3>
<a name="user-content-rubies-1" class="anchor" href="#rubies-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Rubies</h3>

<p>When chruby is first loaded by the shell, it will auto-detect Rubies installed
in <code>/opt/rubies/</code> and <code>~/.rubies/</code>. After installing new Rubies, you <em>must</em>
restart the shell before chruby can recognize them.</p>

<p>For Rubies installed in non-standard locations, simply append their paths to
the <code>RUBIES</code> variable:</p>

<div class="highlight highlight-bash"><pre><span class="nb">source</span> /usr/local/share/chruby/chruby.sh

<span class="nv">RUBIES</span><span class="o">=(</span>
  /opt/jruby-1.7.0
  <span class="s2">"$HOME/src/rubinius"</span>
<span class="o">)</span>
</pre></div>

<h3>
<a name="user-content-migrating" class="anchor" href="#migrating" aria-hidden="true"><span class="octicon octicon-link"></span></a>Migrating</h3>

<p>If you are migrating from another Ruby manager, set <code>RUBIES</code> accordingly:</p>

<h4>
<a name="user-content-rvm" class="anchor" href="#rvm" aria-hidden="true"><span class="octicon octicon-link"></span></a>RVM</h4>

<div class="highlight highlight-bash"><pre>RUBIES+<span class="o">=(</span>~/.rvm/rubies/*<span class="o">)</span>
</pre></div>

<h4>
<a name="user-content-rbenv" class="anchor" href="#rbenv" aria-hidden="true"><span class="octicon octicon-link"></span></a>rbenv</h4>

<div class="highlight highlight-bash"><pre>RUBIES+<span class="o">=(</span>~/.rbenv/versions/*<span class="o">)</span>
</pre></div>

<h4>
<a name="user-content-rbfu" class="anchor" href="#rbfu" aria-hidden="true"><span class="octicon octicon-link"></span></a>rbfu</h4>

<div class="highlight highlight-bash"><pre>RUBIES+<span class="o">=(</span>~/.rbfu/rubies/*<span class="o">)</span>
</pre></div>

<h3>
<a name="user-content-auto-switching" class="anchor" href="#auto-switching" aria-hidden="true"><span class="octicon octicon-link"></span></a>Auto-Switching</h3>

<p>If you want chruby to auto-switch the current version of Ruby when you <code>cd</code>
between your different projects, simply load <code>auto.sh</code> in <code>~/.bashrc</code> or
<code>~/.zshrc</code>:</p>

<div class="highlight highlight-bash"><pre><span class="nb">source</span> /usr/local/share/chruby/chruby.sh
<span class="nb">source</span> /usr/local/share/chruby/auto.sh
</pre></div>

<p>chruby will check the current and parent directories for a <a href="https://gist.github.com/1912050">.ruby-version</a>
file. Other Ruby switchers also understand this file:
<a href="https://gist.github.com/1912050">https://gist.github.com/1912050</a></p>

<p>If you want to automatically run the version of a gem executable specified in 
your project's Gemfile, try 
<a href="https://github.com/mpapis/rubygems-bundler">rubygems-bundler</a>.</p>

<h3>
<a name="user-content-default-ruby" class="anchor" href="#default-ruby" aria-hidden="true"><span class="octicon octicon-link"></span></a>Default Ruby</h3>

<p>If you wish to set a default Ruby, simply call <code>chruby</code> in <code>~/.bash_profile</code> or
<code>~/.zprofile</code>:</p>

<pre><code>chruby ruby-1.9
</code></pre>

<p>If you have enabled auto-switching, simply create a <code>.ruby-version</code> file:</p>

<pre><code>echo "ruby-1.9" &gt; ~/.ruby-version
</code></pre>

<h3>
<a name="user-content-rubygems" class="anchor" href="#rubygems" aria-hidden="true"><span class="octicon octicon-link"></span></a>RubyGems</h3>

<p>Gems installed as a non-root user via <code>gem install</code> will be installed into
<code>~/.gem/$ruby/X.Y.Z</code>.  By default, RubyGems will use the absolute path to the
currently selected ruby for the shebang of any binstubs it generates.  In some
cases, this path may contain extra version information (e.g.
<code>ruby-2.0.0-p451</code>).  To mitigate potential problems when removing rubies, you
can force RubyGems to generate binstubs with shebangs that will search for
ruby in your <code>$PATH</code> by using <code>gem install --env-shebang</code> (or the equivalent
short option <code>-E</code>).  This parameter can also be added to your gemrc file.</p>

<h3>
<a name="user-content-integration" class="anchor" href="#integration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Integration</h3>

<p>For instructions on using chruby with other tools, please see the <a href="https://github.com/postmodern/chruby/wiki">wiki</a>:</p>

<ul class="task-list">
<li><a href="https://github.com/capistrano/chruby#readme">Capistrano</a></li>
<li><a href="https://github.com/Atalanta/chef-chruby#readme">Chef</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/Cron">Cron</a></li>
<li><a href="https://github.com/arnebrasseur/chruby.el#readme">Emacs</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/Pow">Pow</a></li>
<li><a href="https://github.com/dgoodlad/puppet-chruby#readme">Puppet</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/Sudo">Sudo</a></li>
<li><a href="https://github.com/postmodern/chruby/wiki/Vim">Vim</a></li>
<li><a href="https://github.com/JeanMertz/chruby-fish#readme">Fish</a></li>
</ul><h2>
<a name="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>List available Rubies:</p>

<pre><code>$ chruby
   ruby-1.9.3-p392
   jruby-1.7.0
   rubinius-2.0.0-rc1
</code></pre>

<p>Select a Ruby:</p>

<pre><code>$ chruby 1.9.3
$ chruby
 * ruby-1.9.3-p392
   jruby-1.7.0
   rubinius-2.0.0-rc1
$ echo $PATH
/home/hal/.gem/ruby/1.9.3/bin:/opt/rubies/ruby-1.9.3-p392/lib/ruby/gems/1.9.1/bin:/opt/rubies/ruby-1.9.3-p392/bin:/usr/lib64/qt-3.3/bin:/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/home/hal/bin:/home/hal/bin
$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.23
  - RUBY VERSION: 1.9.3 (2013-02-22 patchlevel 392) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/hal/.gem/ruby/1.9.3
  - RUBY EXECUTABLE: /opt/rubies/ruby-1.9.3-p392/bin/ruby
  - EXECUTABLE DIRECTORY: /home/hal/.gem/ruby/1.9.3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/hal/.gem/ruby/1.9.3
     - /opt/rubies/ruby-1.9.3-p392/lib/ruby/gems/1.9.1
  - GEM CONFIGURATION:
     - :update_sources =&gt; true
     - :verbose =&gt; true
     - :benchmark =&gt; false
     - :backtrace =&gt; false
     - :bulk_threshold =&gt; 1000
     - "gem" =&gt; "--no-rdoc"
  - REMOTE SOURCES:
     - http://rubygems.org/
</code></pre>

<p>Switch to JRuby in 1.9 mode:</p>

<pre><code>$ chruby jruby --1.9
$ ruby -v
jruby 1.7.0 (1.9.3p203) 2012-10-22 ff1ebbe on OpenJDK 64-Bit Server VM 1.7.0_09-icedtea-mockbuild_2012_10_17_15_53-b00 [linux-amd64]
</code></pre>

<p>Switch back to system Ruby:</p>

<pre><code>$ chruby system
$ echo $PATH
/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/hal/bin
</code></pre>

<p>Run a command under a Ruby with <code>chruby-exec</code>:</p>

<pre><code>$ chruby-exec jruby -- gem update
</code></pre>

<p>Switch to an arbitrary Ruby on the fly:</p>

<pre><code>$ chruby_use /path/to/ruby
</code></pre>

<h2>
<a name="user-content-uninstall" class="anchor" href="#uninstall" aria-hidden="true"><span class="octicon octicon-link"></span></a>Uninstall</h2>

<p>After removing the chruby configuration:</p>

<pre><code>$ sudo make uninstall
</code></pre>

<h2>
<a name="user-content-alternatives" class="anchor" href="#alternatives" aria-hidden="true"><span class="octicon octicon-link"></span></a>Alternatives</h2>

<ul class="task-list">
<li><a href="https://rvm.io/">RVM</a></li>
<li><a href="https://github.com/sstephenson/rbenv#readme">rbenv</a></li>
<li>
<a href="https://github.com/hmans/rbfu#readme">rbfu</a>*</li>
<li><a href="https://github.com/jayferd/ry#readme">ry</a></li>
<li>
<a href="https://github.com/wilmoore/ruby-version#readme">ruby-version</a>*</li>
</ul><p>* <em>Deprecated in favor of chruby.</em></p>

<h2>
<a name="user-content-endorsements" class="anchor" href="#endorsements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Endorsements</h2>

<blockquote>
<p>yeah <code>chruby</code> is nice, does the limited thing of switching really good,
the only hope it never grows </p>
</blockquote>

<p>-- <a href="https://twitter.com/mpapis/status/258049391791841280">Michal Papis</a> of <a href="https://rvm.io/">RVM</a></p>

<blockquote>
<p>I just looooove <a href="#readme">chruby</a> For the first time I'm in total control of
all aspects of my Ruby installation. </p>
</blockquote>

<p>-- <a href="https://twitter.com/zmalltalker/status/271192206268829696">Marius Mathiesen</a></p>

<blockquote>
<p>Written by Postmodern, it's basically the simplest possible thing that can
work.</p>
</blockquote>

<p>-- <a href="http://blog.steveklabnik.com/posts/2012-12-13-getting-started-with-chruby">Steve Klabnik</a></p>

<blockquote>
<p>So far, I'm a huge fan. The tool does what it advertises exactly and simply.
The small feature-set is also exactly and only the features I need.</p>
</blockquote>

<p>-- <a href="http://pbrisbin.com/posts/chruby">Patrick Brisbin</a></p>

<blockquote>
<p>I wrote ruby-version; however, chruby is already what ruby-version wanted to
be. I've deprecated ruby-version in favor of chruby.</p>
</blockquote>

<p>-- <a href="https://github.com/wilmoore">Wil Moore III</a></p>

<h2>
<a name="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul class="task-list">
<li>
<a href="https://github.com/mpapis">mpapis</a> for reviewing the code.</li>
<li>
<a href="https://github.com/havenwood">havenwood</a> for handling the homebrew formula.</li>
<li>
<a href="https://github.com/zendeavor">zendeavor</a> for style fixes.</li>
<li>
<code>#bash</code>, <code>#zsh</code>, <code>#machomebrew</code> for answering all my questions.</li>
</ul></article></div>
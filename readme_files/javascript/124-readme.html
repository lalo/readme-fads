<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><p><a href="https://github.com/unitech/pm2/raw/master/pres/pm2-v2.png" target="_blank"><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-v2.png" alt="PM2" style="max-width:100%;"></a></p>

<p>PM2 is a process manager for Node.JS application with a built-in load balancer.</p>

<h3>
<a name="user-content-main-features" class="anchor" href="#main-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Main features</h3>

<ul class="task-list">
<li>Advanced process management</li>
<li>Built-in load balancer (Node.JS)</li>
<li>0s downtime reload (Node.JS)</li>
<li>JSON application declaration</li>
<li>Log management</li>
<li>Programmatic interface with embeddable capabilities</li>
<li>Provisioning and Deployment system</li>
<li>Application resource monitoring (RAM, CPU)</li>
<li>Application daemonization</li>
<li>Assisted startup script creation (SystemV/SystemD/Upstart)</li>
<li>Automatically restart process based on memory limit</li>
<li>Automatically stop unstable process (at launch)</li>
<li>Automatically restart process on file change</li>
</ul><p>Full test suit with more than 300 tests: (<a href="https://travis-ci.org/Unitech/PM2">https://travis-ci.org/Unitech/PM2</a>)
Tested against extreme conditions.</p>

<p><strong>We recommend the Node.js version v0.11.13 for better cluster management</strong></p>

<p>Compatible with CoffeeScript.
Works on Linux &amp; MacOS. Windows upcoming.</p>

<p><a href="http://badge.fury.io/js/pm2"><img src="https://camo.githubusercontent.com/3a9e93a0e9b94ea1984c7e8d280b5fb2886a1e4c/68747470733a2f2f62616467652e667572792e696f2f6a732f706d322e706e67" alt="NPM version" data-canonical-src="https://badge.fury.io/js/pm2.png" style="max-width:100%;"></a>
<a href="http://goo.gl/sdaIwX"><img src="https://camo.githubusercontent.com/52464ffbd3e0f4eb2455331fa0010eef7c10ba5b/687474703a2f2f6772617661636f2e696e2f62303633323761636635616531613263653366303832353465643766333364372e706e67" alt="Donate" data-canonical-src="http://gravaco.in/b06327acf5ae1a2ce3f08254ed7f33d7.png" style="max-width:100%;"></a></p>

<p><a href="https://nodei.co/npm/pm2/"><img src="https://camo.githubusercontent.com/eeae8112c8b7bc408d7434341c01d847dead7d04/68747470733a2f2f6e6f6465692e636f2f6e706d2f706d322e706e673f646f776e6c6f6164733d7472756526646f776e6c6f616452616e6b3d74727565" alt="NPM" data-canonical-src="https://nodei.co/npm/pm2.png?downloads=true&amp;downloadRank=true" style="max-width:100%;"></a></p>

<h3>
<a name="user-content-build-status" class="anchor" href="#build-status" aria-hidden="true"><span class="octicon octicon-link"></span></a>Build Status</h3>

<p>Master: <a href="https://travis-ci.org/Unitech/PM2"><img src="https://camo.githubusercontent.com/886f480025e49e8b18f1a772467544c1b0b614b7/68747470733a2f2f6170692e7472617669732d63692e6f72672f556e69746563682f504d322e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://api.travis-ci.org/Unitech/PM2.png?branch=master" style="max-width:100%;"></a></p>

<p>Development: <a href="https://travis-ci.org/Unitech/PM2"><img src="https://camo.githubusercontent.com/f076ee2e96e8c53770dffd7a1670d5d0aa1f6e81/68747470733a2f2f6170692e7472617669732d63692e6f72672f556e69746563682f504d322e706e673f6272616e63683d646576656c6f706d656e74" alt="Build Status" data-canonical-src="https://api.travis-ci.org/Unitech/PM2.png?branch=development" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-keymetrics---monitor--augment-nodejs" class="anchor" href="#keymetrics---monitor--augment-nodejs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Keymetrics - Monitor &amp; Augment Node.JS</h2>

<p><a href="https://camo.githubusercontent.com/32145fda8087b4ff62ec952853052183d445af8c/687474703a2f2f6c65617066726f6775692e636f6d2f636f6e74726f6c66726f672f696d672f63662d6c61796f75742d312e706e67" target="_blank"><img src="https://camo.githubusercontent.com/32145fda8087b4ff62ec952853052183d445af8c/687474703a2f2f6c65617066726f6775692e636f6d2f636f6e74726f6c66726f672f696d672f63662d6c61796f75742d312e706e67" alt="Dashboard" data-canonical-src="http://leapfrogui.com/controlfrog/img/cf-layout-1.png" style="max-width:100%;"></a></p>

<p>We are developing a product that will offer you to monitor and augment your Node.JS applications, in an innovative way.
Here are some links:</p>

<ul class="task-list">
<li><a href="https://docs.google.com/forms/d/1FuCjIhrGg-ItxInq2nLreoe9GS-gZWJNkNWE0JJajw8/viewform">Pitch + Survey</a></li>
<li>
<a href="http://signup.pm2.io/">Newsletter</a> Subscribe to be kept informed</li>
</ul><p>Thanks in advance and we hope that you like PM2!</p>

<hr><h2>
<a name="user-content-table-of-contents" class="anchor" href="#table-of-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Table of contents</h2>

<h3>
<a name="user-content-quick-start" class="anchor" href="#quick-start" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick start</h3>

<ul class="task-list">
<li><a href="#a1">Installation</a></li>
<li><a href="#a2">Usage</a></li>
<li><a href="#a3">Examples</a></li>
<li><a href="#a667">Different ways to launch a process</a></li>
<li><a href="#a987">Options</a></li>
<li><a href="#update-pm2">How to update PM2?</a></li>
</ul><h3>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h3>

<ul class="task-list">
<li><a href="#a4">Transitional state of apps</a></li>
<li><a href="#a6">Process listing</a></li>
<li><a href="#max-memory-restart">Automatic restart process based on memory</a></li>
<li><a href="#a7">Monitoring CPU/Memory usage</a></li>
<li><a href="#a9">Logs management</a></li>
<li><a href="#a5">Clustering</a></li>
<li><a href="#a890">Watch &amp; Restart</a></li>
<li><a href="#a690">Reloading without downtime</a></li>
<li><a href="#a8">Make PM2 restart on server reboot</a></li>
<li><a href="#a10">JSON app declaration</a></li>
</ul><h3>
<a name="user-content-deployment---ecosystemjson" class="anchor" href="#deployment---ecosystemjson" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment - ecosystem.json</h3>

<ul class="task-list">
<li><a href="#deployment">Getting started with deployment</a></li>
<li><a href="#deployment-help">Deployment options</a></li>
<li><a href="#considerations">Considerations</a></li>
<li><a href="#deployment-contribution">Contributing</a></li>
</ul><h3>
<a name="user-content-using-pm2-programmatically-via-api" class="anchor" href="#using-pm2-programmatically-via-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using PM2 programmatically (via API)</h3>

<ul class="task-list">
<li><a href="#programmatic-example">Simple example</a></li>
<li><a href="#programmatic-api">Programmatic API</a></li>
</ul><h3>
<a name="user-content-specific" class="anchor" href="#specific" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specific</h3>

<ul class="task-list">
<li><a href="#a77">Specific features</a></li>
<li><a href="#a989">Configuration file</a></li>
<li><a href="#a66">Enabling Harmony ES6</a></li>
<li><a href="#a19">CoffeeScript</a></li>
<li><a href="#a149">Testing PM2 on your prod environment</a></li>
<li><a href="#a96">JSON app via pipe</a></li>
</ul><h3>
<a name="user-content-knowledge" class="anchor" href="#knowledge" aria-hidden="true"><span class="octicon octicon-link"></span></a>Knowledge</h3>

<ul class="task-list">
<li><a href="#stateless-apps">Stateless apps ?</a></li>
<li><a href="#a4">Transitional state of apps</a></li>
<li><a href="#a89">Setup PM2 on server: tutorial</a></li>
<li><a href="#a34">Logs and PID files</a></li>
<li><a href="#a23">Execute any script: What is fork mode ?</a></li>
</ul><h3>
<a name="user-content-more" class="anchor" href="#more" aria-hidden="true"><span class="octicon octicon-link"></span></a>More</h3>

<ul class="task-list">
<li><a href="#a27">Contributing/Development mode</a></li>
<li><a href="#a21">Known bugs and workaround</a></li>
<li><a href="#a20">They talk about it</a></li>
<li><a href="#a15">License</a></li>
</ul><hr><h1>
<a name="user-content-quick-start-1" class="anchor" href="#quick-start-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick start</h1>

<p><a name="user-content-a1" aria-hidden="true"></a></p>

<h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>One more time we recommend Node.JS 0.11.13 (manage Node.JS versions easily with <a href="https://github.com/creationix/nvm">https://github.com/creationix/nvm</a>)</p>

<p>The latest PM2 stable version is installable via NPM:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install pm2@latest -g
</pre></div>

<p>If the above fails use:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install git://github.com/Unitech/pm2#master -g
</pre></div>

<p><a name="user-content-a2" aria-hidden="true"></a></p>

<h2>
<a name="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>Hello world:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js
</pre></div>

<p><a name="user-content-a3" aria-hidden="true"></a></p>

<h2>
<a name="user-content-raw-examples" class="anchor" href="#raw-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Raw Examples</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js --name my-api <span class="c"># Name process</span>

<span class="nv">$ </span>pm2 start app.js -i max        <span class="c"># Will start maximum processes with LB depending on available CPUs</span>

<span class="c"># Listing</span>

<span class="nv">$ </span>pm2 list               <span class="c"># Display all processes status</span>
<span class="nv">$ </span>pm2 jlist              <span class="c"># Print process list in raw JSON</span>
<span class="nv">$ </span>pm2 prettylist         <span class="c"># Print process list in beautified JSON</span>

<span class="nv">$ </span>pm2 describe <span class="m">0</span>         <span class="c"># Display all informations about a specific process</span>

<span class="nv">$ </span>pm2 monit              <span class="c"># Monitor all processes</span>

<span class="c"># Logs</span>

<span class="nv">$ </span>pm2 logs               <span class="c"># Display all processes logs in streaming</span>
<span class="nv">$ </span>pm2 ilogs              <span class="c"># Advanced termcaps interface to display logs</span>
<span class="nv">$ </span>pm2 flush              <span class="c"># Empty all log file</span>
<span class="nv">$ </span>pm2 reloadLogs         <span class="c"># Reload all logs</span>

<span class="c"># Actions</span>

<span class="nv">$ </span>pm2 stop all           <span class="c"># Stop all processes</span>
<span class="nv">$ </span>pm2 restart all        <span class="c"># Restart all processes</span>

<span class="nv">$ </span>pm2 reload all         <span class="c"># Will 0s downtime reload (for NETWORKED apps)</span>
<span class="nv">$ </span>pm2 gracefulReload all <span class="c"># Send exit message then reload (for networked apps)</span>

<span class="nv">$ </span>pm2 stop <span class="m">0</span>             <span class="c"># Stop specific process id</span>
<span class="nv">$ </span>pm2 restart <span class="m">0</span>          <span class="c"># Restart specific process id</span>

<span class="nv">$ </span>pm2 delete <span class="m">0</span>           <span class="c"># Will remove process from pm2 list</span>
<span class="nv">$ </span>pm2 delete all         <span class="c"># Will remove all processes from pm2 list</span>

<span class="c"># Misc</span>

<span class="nv">$ </span>pm2 reset &lt;process&gt;    <span class="c"># Reset meta data (restarted time...)</span>
<span class="nv">$ </span>pm2 updatePM2          <span class="c"># Update in memory pm2</span>
<span class="nv">$ </span>pm2 ping               <span class="c"># Ensure pm2 daemon has been launched</span>
<span class="nv">$ </span>pm2 sendSignal SIGUSR2 my-app <span class="c"># Send system signal to script</span>
<span class="nv">$ </span>pm2 start app.js --no-daemon
</pre></div>

<h2>
<a name="user-content-different-ways-to-launch-a-process" class="anchor" href="#different-ways-to-launch-a-process" aria-hidden="true"><span class="octicon octicon-link"></span></a>Different ways to launch a process</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js -i max  <span class="c"># Will start maximum processes depending on available CPUs</span>

<span class="nv">$ </span>pm2 start app.js -i <span class="m">3</span>    <span class="c"># Will start 3 processes</span>

<span class="nv">$ </span>pm2 start app.js -i max -- -a <span class="m">23</span>  <span class="c"># Pass arguments after -- to app.js</span>

<span class="nv">$ </span>pm2 start app.js -x            <span class="c"># Start app.js in fork mode instead of cluster</span>
<span class="nv">$ </span>pm2 start app.js -x -- -a <span class="m">23</span>   <span class="c"># Start app.js in fork mode and pass arguments (-a 23)</span>

<span class="nv">$ </span>pm2 start app.js --log-date-format <span class="s2">"YYYY-MM-DD HH:mm Z"</span>    <span class="c"># Log will be prefixed with custom time format</span>

<span class="nv">$ </span>pm2 start app.js --name serverone <span class="c"># Start a process an name it as server one</span>
                                    <span class="c"># you can now stop the process by doing</span>
                                    <span class="c"># pm2 stop serverone</span>

<span class="nv">$ </span>pm2 start app.json                <span class="c"># Start processes with options declared in app.json</span>
                                    <span class="c"># Go to chapter Multi process JSON declaration for more</span>

<span class="nv">$ </span>pm2 start app.js -i max -e err.log -o out.log  <span class="c"># Will start and generate a configuration file</span>

<span class="nv">$ </span>pm2 start app.js --node-args<span class="o">=</span><span class="s2">"--debug=7001 --trace-deprecation"</span> <span class="c"># --node-args command line option to pass options to node</span>

<span class="nv">$ </span>pm2 --run-as-user foo start app.js  <span class="c"># Start app.js as user foo instead of root (pm2 must be running as root)</span>

<span class="nv">$ </span>pm2 --run-as-user foo --run-as-group bar start app.js  <span class="c"># Start app.js as foo:bar instead of root:root (pm2 must be running as root)</span>
</pre></div>

<p>For scripts in other languages:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start echo.coffee
<span class="nv">$ </span>pm2 start -x echo.php
<span class="nv">$ </span>pm2 start -x echo.py
<span class="nv">$ </span>pm2 start -x echo.sh
<span class="nv">$ </span>pm2 start -x echo.rb
<span class="nv">$ </span>pm2 start -x echo.pl
</pre></div>

<p>Languages other than javascript have to be run in <a href="#a23">fork mode</a>.</p>

<p><a name="user-content-a987" aria-hidden="true"></a></p>

<h2>
<a name="user-content-options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h2>

<pre><code>Options:

    -h, --help                   output usage information
    -V, --version                output the version number
    -v --verbose                 verbose level
    -s --silent                  hide all messages
    -m --mini-list               display a compacted list without formatting
    -f --force                   force actions
    -n --name &lt;name&gt;             set a &lt;name&gt; for script
    -i --instances &lt;number&gt;      launch [number|'max'] (load balanced) instances (for networked app)
    -o --output &lt;path&gt;           specify out log file
    -e --error &lt;path&gt;            specify error log file
    -p --pid &lt;pid&gt;               specify pid file
    -x --execute-command         execute a program using fork system
    -u --user &lt;username&gt;         define user when generating startup script
    -c --cron &lt;cron_pattern&gt;     restart a running process based on a cron pattern
    -w --write                   write configuration in local folder
    --interpreter &lt;interpreter&gt;  the interpreter pm2 should use for executing app (bash, python...)
    --no-daemon                  run pm2 daemon in the foreground if it doesn't exist already
    --merge-logs                 merge logs
    --watch                      watch folder(s) for changes. When `true`, watching all folders from root. Can also be a string or an array of strings for paths to watch for changes.
    --node-args &lt;node_args&gt;      space-delimited arguments to pass to node in cluster mode - e.g. --node-args="--debug=7001 --trace-deprecation"
    --run-as-user &lt;run_as_user&gt;    The user or uid to run a managed process as
    --run-as-group &lt;run_as_group&gt;  The group or gid to run a managed process as
</code></pre>

<p><a name="user-content-update-pm2" aria-hidden="true"></a></p>

<h2>
<a name="user-content-how-to-update-pm2" class="anchor" href="#how-to-update-pm2" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to update PM2</h2>

<p>Install the latest pm2 version :</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install pm2@latest -g
</pre></div>

<p>Then update the in-memory PM2 :</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 updatePM2
</pre></div>

<h1>
<a name="user-content-features-1" class="anchor" href="#features-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h1>

<p><a name="user-content-a4" aria-hidden="true"></a></p>

<h2>
<a name="user-content-transitional-state-of-apps-important" class="anchor" href="#transitional-state-of-apps-important" aria-hidden="true"><span class="octicon octicon-link"></span></a>Transitional state of apps (important)</h2>

<p>PM2 is a process manager. PM2 can start, stop, restart and <em>delete</em> processes.</p>

<p>Start a process:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js --name <span class="s2">"my-api"</span>
<span class="nv">$ </span>pm2 start web.js --name <span class="s2">"web-interface"</span>
</pre></div>

<p>Now let's say I need to stop the web-interface:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 stop web-interface
</pre></div>

<p>As you can see <strong>the process hasn't disappeared</strong>. It's still there but in <code>stopped</code> status.</p>

<p>To restart it just do:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 restart web-interface
</pre></div>

<p>Now I want to <strong>delete</strong> the app from the PM2 process list.
To do so:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 delete web-interface
</pre></div>

<p><a name="user-content-a6" aria-hidden="true"></a></p>

<h2>
<a name="user-content-process-listing" class="anchor" href="#process-listing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Process listing</h2>

<p><a href="https://github.com/unitech/pm2/raw/master/pres/pm2-list.png" target="_blank"><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-list.png" alt="Monit" style="max-width:100%;"></a></p>

<p>To list all running processes:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 list
<span class="c"># Or</span>
<span class="nv">$ </span>pm2 <span class="o">[</span>list<span class="p">|</span>ls<span class="p">|</span>l<span class="p">|</span>status<span class="o">]</span>
</pre></div>

<p>To get more details about a specific process:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 describe 0
</pre></div>

<p><a name="user-content-max-memory-restart" aria-hidden="true"></a></p>

<h2>
<a name="user-content-automatic-restart-process-based-on-memory" class="anchor" href="#automatic-restart-process-based-on-memory" aria-hidden="true"><span class="octicon octicon-link"></span></a>Automatic restart process based on memory</h2>

<p>Value passed is in megaoctets. Internally it uses the V8 flag <code>--max-old-space-size=MEM</code> to make a process exit when memory exceed a certain amount of RAM used.</p>

<p>CLI:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start big-array.js --max-memory-restart 20
</pre></div>

<p>JSON:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
  <span class="nt">"name"</span> <span class="p">:</span> <span class="s2">"max_mem"</span><span class="p">,</span>
  <span class="nt">"script"</span> <span class="p">:</span> <span class="s2">"big-array.js"</span><span class="p">,</span>
  <span class="nt">"max_memory_restart"</span> <span class="p">:</span> <span class="s2">"20"</span>
<span class="p">}</span>
</pre></div>

<p><a name="user-content-a7" aria-hidden="true"></a></p>

<h2>
<a name="user-content-monitoring-cpumemory-usage" class="anchor" href="#monitoring-cpumemory-usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Monitoring CPU/Memory usage</h2>

<p><a href="https://github.com/unitech/pm2/raw/master/pres/pm2-monit.png" target="_blank"><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-monit.png" alt="Monit" style="max-width:100%;"></a></p>

<p>Monitor all processes launched:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 monit
</pre></div>

<p><a name="user-content-a9" aria-hidden="true"></a></p>

<h2>
<a name="user-content-logs-management" class="anchor" href="#logs-management" aria-hidden="true"><span class="octicon octicon-link"></span></a>Logs management</h2>

<h3>
<a name="user-content-displaying-logs-in-realtime" class="anchor" href="#displaying-logs-in-realtime" aria-hidden="true"><span class="octicon octicon-link"></span></a>Displaying logs in realtime</h3>

<p><a href="https://github.com/unitech/pm2/raw/master/pres/pm2-logs.png" target="_blank"><img src="https://github.com/unitech/pm2/raw/master/pres/pm2-logs.png" alt="Monit" style="max-width:100%;"></a></p>

<p>Displaying logs of specified process or all processes in realtime:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 logs
<span class="nv">$ </span>pm2 logs big-api
<span class="nv">$ </span>pm2 flush <span class="c"># Clear all the logs</span>
</pre></div>

<h3>
<a name="user-content-advanced-log-interface" class="anchor" href="#advanced-log-interface" aria-hidden="true"><span class="octicon octicon-link"></span></a>Advanced log interface</h3>

<p>Navigate between processes logs in realtime with an ergonomic interface:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 ilogs
</pre></div>

<h3>
<a name="user-content-reloading-all-logs-sigusr2logrotate" class="anchor" href="#reloading-all-logs-sigusr2logrotate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reloading all logs (SIGUSR2/Logrotate)</h3>

<p>To reload all logs, you can send <code>SIGUSR2</code> to the PM2 process.</p>

<p>You can also reload all logs via the command line with:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 reloadLogs
</pre></div>

<h3>
<a name="user-content-options-1" class="anchor" href="#options-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h3>

<div class="highlight highlight-bash"><pre>--merge-logs : merge logs from different instances but keep error and out separated
--log-date-format &lt;format&gt;: prefix logs with formated timestamp <span class="o">(</span>http://momentjs.com/docs/#/parsing/string-format/<span class="o">)</span>
</pre></div>

<p><a name="user-content-a5" aria-hidden="true"></a></p>

<h2>
<a name="user-content-clustering" class="anchor" href="#clustering" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clustering</h2>

<p>Launch <code>max</code> instances (<code>max</code> depending on the number of CPUs available) and set the load balancer to balance queries among process:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js --name <span class="s2">"API"</span> -i max
</pre></div>

<p>If your app is well-designed (<strong>stateless</strong>) you'll be able to <strong>process many more queries</strong>.</p>

<p>Important concepts to make a Node.js app stateless:</p>

<ul class="task-list">
<li>Sessions must not be stored in memory but shared via a database (Redis, Mongo, whatever)</li>
<li><a href="http://socket.io/docs/using-multiple-nodes/#passing-events-between-nodes">WebSocket/Socket.io should communicate via a database</a></li>
</ul><p><a name="user-content-a690" aria-hidden="true"></a></p>

<h2>
<a name="user-content-reloading-without-downtime" class="anchor" href="#reloading-without-downtime" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reloading without downtime</h2>

<p>As opposed to <code>restart</code>, which kills and restarts the process, <code>reload</code> achieves a 0-second-downtime reload.</p>

<p><strong>Warning</strong> This feature only works for apps in <em>cluster mode</em> (the default mode), that uses HTTP/HTTPS/Socket connections.</p>

<p>To reload an app:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 reload api
</pre></div>

<p>If the reload system hasn't managed to reload gracefully, a timeout will simply kill the process and will restart it.</p>

<h3>
<a name="user-content-graceful-reload" class="anchor" href="#graceful-reload" aria-hidden="true"><span class="octicon octicon-link"></span></a>Graceful reload</h3>

<p>Sometimes you can experience a <strong>very long reload, or a reload that doesn't work</strong> (fallback to restart).</p>

<p>It means that your app <strong>still has open connections on exit</strong>.</p>

<p>To work around this problem you have to use the graceful reload.
Graceful reload is a mechanism that will send a <em>shutdown</em> message to your process before reloading it.
You can control the time that the app has to shutdown via the <code>PM2_GRACEFUL_TIMEOUT</code> environment variable.</p>

<p>Example:</p>

<div class="highlight highlight-javascript"><pre><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'message'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span> <span class="o">==</span> <span class="s1">'shutdown'</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Your process is going to be reloaded</span>
    <span class="c1">// You have to close all database/socket.io/* connections</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Closing all connections...'</span><span class="p">);</span>

    <span class="c1">// You will have 4000ms to close all connections before</span>
    <span class="c1">// the reload mechanism will try to do its job</span>

    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Finished closing connections'</span><span class="p">);</span>
      <span class="c1">// This timeout means that all connections have been closed</span>
      <span class="c1">// Now we can exit to let the reload mechanism do its job</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1500</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div>

<p>Then use the command:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 gracefulReload <span class="o">[</span>all<span class="p">|</span>name<span class="o">]</span>
</pre></div>

<p>When PM2 starts a new process to replace an old one, it will wait for the new process to begin listening to a connection before sending the shutdown message to the old one.  If a script does not need to listen to a connection, it can manually tell PM2 that the process has started up by calling <code>process.send('online')</code>.</p>

<p><a name="user-content-a8" aria-hidden="true"></a></p>

<h2>
<a name="user-content-startup-script" class="anchor" href="#startup-script" aria-hidden="true"><span class="octicon octicon-link"></span></a>Startup script</h2>

<p>PM2 has the amazing ability to <strong>generate startup scripts and configure them</strong>.
PM2 is also smart enough to <strong>save all your process list</strong> and to <strong>bring back all your processes on restart</strong>.</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 startup <span class="o">[</span>ubuntu<span class="p">|</span>centos<span class="p">|</span>gentoo<span class="p">|</span>systemd<span class="o">]</span>
</pre></div>

<p>Once you have started the apps and want to keep them on server reboot do:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 save
</pre></div>

<p><strong>Warning</strong> It's tricky to make this feature work generically, so once PM2 has setup your startup script, reboot your server to make sure that PM2 has launched your apps!</p>

<h3>
<a name="user-content-more-information" class="anchor" href="#more-information" aria-hidden="true"><span class="octicon octicon-link"></span></a>More information</h3>

<p>Three types of startup scripts are available:</p>

<ul class="task-list">
<li>SystemV init script (with the option <code>ubuntu</code> or <code>centos</code>)</li>
<li>OpenRC init script (with the option <code>gentoo</code>)</li>
<li>SystemD init script (with the <code>systemd</code> option)</li>
</ul><p>The startup options are using:</p>

<ul class="task-list">
<li>
<strong>ubuntu</strong> will use <code>updaterc.d</code> and the script <code>lib/scripts/pm2-init.sh</code>
</li>
<li>
<strong>centos</strong> will use <code>chkconfig</code> and the script <code>lib/scripts/pm2-init-centos.sh</code>
</li>
<li>
<strong>gentoo</strong> will use <code>rc-update</code> and the script <code>lib/scripts/pm2</code>
</li>
<li>
<strong>systemd</strong> will use <code>systemctl</code> and the script <code>lib/scripts/pm2.service</code>
</li>
</ul><h3>
<a name="user-content-user-permissions" class="anchor" href="#user-permissions" aria-hidden="true"><span class="octicon octicon-link"></span></a>User permissions</h3>

<p>Let's say you want the startup script to be executed under another user.</p>

<p>Just use the <code>-u &lt;username&gt;</code> option !</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 startup ubuntu -u www
</pre></div>

<h3>
<a name="user-content-related-commands" class="anchor" href="#related-commands" aria-hidden="true"><span class="octicon octicon-link"></span></a>Related commands</h3>

<p>Dump all processes status and environment managed by PM2:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 dump
</pre></div>

<p>It populates the file <code>~/.pm2/dump.pm2</code> by default.</p>

<p>To bring back the latest dump:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 resurrect
</pre></div>

<p><a name="user-content-a890" aria-hidden="true"></a></p>

<h2>
<a name="user-content-watch--restart" class="anchor" href="#watch--restart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Watch &amp; Restart</h2>

<p>PM2 can automatically restart your app when a file changes in the current directory or its subdirectories:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js --watch
</pre></div>

<p>If <code>--watch</code> is enabled, stopping it won't stop watching:</p>

<ul class="task-list">
<li>
<code>pm2 stop 0</code> 'll not stop watching</li>
<li>
<code>pm2 stop --watch 0</code> 'll stop watching</li>
</ul><p>Restart toggle the <code>watch</code> parameter when triggered.</p>

<p>To watch specifics paths, please use a JSON app declaration, <code>watch</code> can take a string or an array of paths. Default is <code>true</code>:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
  <span class="nt">"watch"</span><span class="p">:</span> <span class="p">[</span><span class="s2">"server"</span><span class="p">,</span> <span class="s2">"client"</span><span class="p">],</span>
  <span class="nt">"ignoreWatch"</span> <span class="p">:</span> <span class="p">[</span><span class="s2">"node_modules"</span><span class="p">,</span> <span class="s2">"client/img"</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p><a name="user-content-a10" aria-hidden="true"></a></p>

<h2>
<a name="user-content-json-app-declaration" class="anchor" href="#json-app-declaration" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON app declaration</h2>

<p>You can define parameters for your apps in <code>processes.json</code>:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
  <span class="nt">"apps"</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="nt">"name"</span>        <span class="p">:</span> <span class="s2">"echo"</span><span class="p">,</span>
    <span class="nt">"script"</span>      <span class="p">:</span> <span class="s2">"examples/args.js"</span><span class="p">,</span>
    <span class="nt">"args"</span>        <span class="p">:</span> <span class="s2">"['--toto=heya coco', '-d', '1']"</span><span class="p">,</span>
    <span class="nt">"log_date_format"</span>  <span class="p">:</span> <span class="s2">"YYYY-MM-DD HH:mm Z"</span><span class="p">,</span>
    <span class="nt">"ignoreWatch"</span> <span class="p">:</span> <span class="p">[</span><span class="s2">"[\\/\\\\]\\./"</span><span class="p">,</span> <span class="s2">"node_modules"</span><span class="p">],</span>
    <span class="nt">"watch"</span>       <span class="p">:</span> <span class="s2">"true"</span><span class="p">,</span>
    <span class="nt">"node_args"</span>   <span class="p">:</span> <span class="s2">"--harmony"</span><span class="p">,</span>
    <span class="nt">"cwd"</span>         <span class="p">:</span> <span class="s2">"/this/is/a/path/to/start/script"</span><span class="p">,</span>
    <span class="nt">"env"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"NODE_ENV"</span><span class="p">:</span> <span class="s2">"production"</span><span class="p">,</span>
        <span class="nt">"AWESOME_SERVICE_API_TOKEN"</span><span class="p">:</span> <span class="s2">"xxx"</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="nt">"name"</span>       <span class="p">:</span> <span class="s2">"api"</span><span class="p">,</span>
    <span class="nt">"script"</span>     <span class="p">:</span> <span class="s2">"./examples/child.js"</span><span class="p">,</span>
    <span class="nt">"instances"</span>  <span class="p">:</span> <span class="s2">"4"</span><span class="p">,</span>
    <span class="nt">"log_date_format"</span>  <span class="p">:</span> <span class="s2">"YYYY-MM-DD"</span><span class="p">,</span>
    <span class="nt">"error_file"</span> <span class="p">:</span> <span class="s2">"./examples/child-err.log"</span><span class="p">,</span>
    <span class="nt">"out_file"</span>   <span class="p">:</span> <span class="s2">"./examples/child-out.log"</span><span class="p">,</span>
    <span class="nt">"pid_file"</span>   <span class="p">:</span> <span class="s2">"./examples/child.pid"</span><span class="p">,</span>
    <span class="nt">"exec_mode"</span>  <span class="p">:</span> <span class="s2">"cluster_mode"</span><span class="p">,</span>
    <span class="nt">"port"</span>       <span class="p">:</span> <span class="mi">9005</span>
  <span class="p">},{</span>
    <span class="nt">"name"</span>       <span class="p">:</span> <span class="s2">"auto-kill"</span><span class="p">,</span>
    <span class="nt">"script"</span>     <span class="p">:</span> <span class="s2">"./examples/killfast.js"</span><span class="p">,</span>
    <span class="nt">"min_uptime"</span> <span class="p">:</span> <span class="s2">"100"</span><span class="p">,</span>
    <span class="nt">"exec_mode"</span>  <span class="p">:</span> <span class="s2">"fork_mode"</span><span class="p">,</span>
  <span class="p">}]</span>
<span class="p">}</span>
</pre></div>

<p>Then run:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start processes.json
<span class="nv">$ </span>pm2 stop processes.json
<span class="nv">$ </span>pm2 delete processes.json
<span class="nv">$ </span>pm2 restart processes.json
</pre></div>

<p><strong>A few notes about JSON app declarations:</strong></p>

<ul class="task-list">
<li>All command line options passed when using the JSON app declaration will be dropped i.e.</li>
</ul><div class="highlight highlight-bash"><pre><span class="nv">$ </span>cat node-app-1.json

<span class="o">{</span>
  <span class="s2">"name"</span> : <span class="s2">"node-app-1"</span>,
  <span class="s2">"script"</span> : <span class="s2">"app.js"</span>,
  <span class="s2">"cwd"</span> : <span class="s2">"/srv/node-app-1/current"</span>
<span class="o">}</span>

<span class="nv">$ </span>pm2 --run-as-user app start node-app-1.json

<span class="nv">$ </span>ps aux <span class="p">|</span> grep node-app
root <span class="m">14735</span> 5.8 1.1 <span class="m">752476</span> <span class="m">83932</span> ? Sl 00:08 0:00 pm2: node-app-1  &lt;-- owned by the default user <span class="o">(</span>root<span class="o">)</span>, not app
</pre></div>

<ul class="task-list">
<li>JSON app declarations are additive.  Continuing from above:</li>
</ul><div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start node-app-2.json
<span class="nv">$ </span>ps aux <span class="p">|</span> grep node-app
root  <span class="m">14735</span>  5.8  1.1  <span class="m">752476</span>  <span class="m">83932</span> ? Sl 00:08 0:00 pm2: node-app-1
root  <span class="m">24271</span>  0.0  0.3  <span class="m">696428</span>  <span class="m">24208</span> ? Sl 17:36 0:00 pm2: node-app-2
</pre></div>

<p>Note that if you execute <code>pm2 start node-app-2</code> again, it will spawn an additional instance node-app-2.</p>

<ul class="task-list">
<li><p><strong>cwd:</strong> your JSON declaration does not need to reside with your script.  If you wish to maintain the JSON(s) in a location other than your script (say, <code>/etc/pm2/conf.d/node-app.json</code>) you will need to use the cwd feature.  (Note, this is especially helpful for capistrano style directory structures that use symlinks.)  Files can be either relative to the cwd directory, or absolute (example below.)</p></li>
<li><p>The following are valid options for JSON app declarations:</p></li>
</ul><pre><code>[{
  "name"             : "node-app",
  "cwd"              : "/srv/node-app/current",
  "args"             : "['--toto=heya coco', '-d', '1']",
  "script"           : "bin/app.js",
  "node_args"        : "--harmony",
  "log_date_format"  : "YYYY-MM-DD HH:mm Z",
  "error_file"       : "/var/log/node-app/node-app.stderr.log",
  "out_file"         : "log/node-app.stdout.log",
  "pid_file"         : "pids/node-geo-api.pid",
  "run_as_user"      : "app",
  "run_as_group"     : "www-data",
  "instances"        : "6", //or 'max'
  "min_uptime"       : "200", // milliseconds, defaults to 1000
  "max_restarts"     : "10", // defaults to 15
  "cron_restart"     : "1 0 * * *",
  "watch"            : "false",
  "ignoreWatch"      : ["[\\/\\\\]\\./", "node_modules"],
  "merge_logs"       : "true",
  "exec_interpreter" : "node",
  "exec_mode"        : "cluster_mode",
  "env": {
    "NODE_ENV": "production",
    "AWESOME_SERVICE_API_TOKEN": "xxx"
  }
}]
</code></pre>

<p><a name="user-content-deployment" aria-hidden="true"></a></p>

<h1>
<a name="user-content-deployment-pm2--090" class="anchor" href="#deployment-pm2--090" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment (PM2 &gt;= 0.9.0)</h1>

<p>PM2 embed a simple and powerful deployment system with revision tracing.
It's based on <a href="https://github.com/visionmedia/deploy"></a><a href="https://github.com/visionmedia/deploy">https://github.com/visionmedia/deploy</a></p>

<p>A step-by-step tutorial is available here : <a href="https://keymetrics.io/2014/06/25/ecosystem-json-deploy-and-iterate-faster/">Deploy and Iterate faster with PM2 deploy</a></p>

<h2>
<a name="user-content-getting-started-with-deployment" class="anchor" href="#getting-started-with-deployment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting started with deployment</h2>

<p>Please read the <a href="#considerations">Considerations to use PM2 deploy</a></p>

<p>1- Generate a sample ecosystem.json file that list processes and deployment environment</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 ecosystem
</pre></div>

<p>In the current folder a <code>ecosystem.json</code> file will be created.
It contains this:</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
  <span class="nt">"apps"</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="nt">"name"</span>      <span class="p">:</span> <span class="s2">"API"</span><span class="p">,</span>
    <span class="nt">"script"</span>    <span class="p">:</span> <span class="s2">"app.js"</span><span class="p">,</span>
    <span class="nt">"env"</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">"COMMON_VARIABLE"</span><span class="p">:</span> <span class="s2">"true"</span>
    <span class="p">},</span>
    <span class="nt">"env_production"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">"NODE_ENV"</span><span class="p">:</span> <span class="s2">"production"</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="nt">"name"</span>      <span class="p">:</span> <span class="s2">"WEB"</span><span class="p">,</span>
    <span class="nt">"script"</span>    <span class="p">:</span> <span class="s2">"web.js"</span>
  <span class="p">}],</span>
  <span class="nt">"deploy"</span> <span class="p">:</span> <span class="p">{</span>
    <span class="nt">"production"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">"user"</span> <span class="p">:</span> <span class="s2">"node"</span><span class="p">,</span>
      <span class="nt">"host"</span> <span class="p">:</span> <span class="s2">"212.83.163.1"</span><span class="p">,</span>
      <span class="nt">"ref"</span>  <span class="p">:</span> <span class="s2">"origin/master"</span><span class="p">,</span>
      <span class="nt">"repo"</span> <span class="p">:</span> <span class="s2">"git@github.com:repo.git"</span><span class="p">,</span>
      <span class="nt">"path"</span> <span class="p">:</span> <span class="s2">"/var/www/production"</span><span class="p">,</span>
      <span class="nt">"post-deploy"</span> <span class="p">:</span> <span class="s2">"pm2 startOrRestart ecosystem.json --env production"</span>
    <span class="p">},</span>
    <span class="nt">"dev"</span> <span class="p">:</span> <span class="p">{</span>
      <span class="nt">"user"</span> <span class="p">:</span> <span class="s2">"node"</span><span class="p">,</span>
      <span class="nt">"host"</span> <span class="p">:</span> <span class="s2">"212.83.163.1"</span><span class="p">,</span>
      <span class="nt">"ref"</span>  <span class="p">:</span> <span class="s2">"origin/master"</span><span class="p">,</span>
      <span class="nt">"repo"</span> <span class="p">:</span> <span class="s2">"git@github.com:repo.git"</span><span class="p">,</span>
      <span class="nt">"path"</span> <span class="p">:</span> <span class="s2">"/var/www/development"</span><span class="p">,</span>
      <span class="nt">"post-deploy"</span> <span class="p">:</span> <span class="s2">"pm2 startOrRestart ecosystem.json --env dev"</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Edit the file according to your needs.</p>

<p>2- Be sure that you have the public ssh key on your local machine</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>ssh-keygen -t rsa
<span class="nv">$ </span>ssh-copy-id root@myserver.com
</pre></div>

<p>3- Now initialize the remote folder with:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 deploy &lt;configuration_file&gt; &lt;environment&gt; setup
</pre></div>

<p>E.g:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 deploy ecosystem.json production setup
</pre></div>

<p>This command will create all the folders on your remote server.</p>

<p>4- Deploy your code</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 deploy ecosystem.json production
</pre></div>

<p>Now your code will be populated, installed and started with PM2</p>

<p><a name="user-content-deployment-help" aria-hidden="true"></a></p>

<h2>
<a name="user-content-deployment-options" class="anchor" href="#deployment-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Deployment options</h2>

<pre><code>$ pm2 deploy &lt;configuration_file&gt; &lt;environment&gt; &lt;command&gt;

  Commands:
    setup                run remote setup commands
    update               update deploy to the latest release
    revert [n]           revert to [n]th last deployment or 1
    curr[ent]            output current release commit
    prev[ious]           output previous release commit
    exec|run &lt;cmd&gt;       execute the given &lt;cmd&gt;
    list                 list previous deploy commits
    [ref]                deploy to [ref], the "ref" setting, or latest tag
</code></pre>

<p><a name="user-content-considerations" aria-hidden="true"></a></p>

<h2>
<a name="user-content-considerations" class="anchor" href="#considerations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Considerations</h2>

<ul class="task-list">
<li>You might want to commit your node_modules folder (<a href="https://github.com/Unitech/pm2/issues/622">#622</a>) or add the <code>npm install</code> command to the <code>post-deploy</code> section: <code>"post-deploy" : "npm install &amp;&amp; pm2 startOrRestart ecosystem.json --env production"</code>
</li>
<li>You can declare specific environment variable depending on the environment you want to deploy the code to. For instance to declare variables for the production environment, just add "env_production": {} and declare that variables.</li>
<li>PM2 will look by default to <code>ecosystem.json</code>. So you can skip the  options if it's the case</li>
<li>You can embed the "apps" &amp; "deploy" section in the package.json</li>
<li>It deploys your code via ssh, you don't need any dependencies</li>
<li>Process are initialized / started automatically depending on application name in <code>ecosystem.json</code>
</li>
<li>PM2-deploy repoitory is there: <a href="https://github.com/Unitech/pm2-deploy">pm2-deploy</a>
</li>
</ul><p><a name="user-content-deployment-contribution" aria-hidden="true"></a></p>

<h2>
<a name="user-content-contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>The module is <a href="https://github.com/Unitech/pm2-deploy"></a><a href="https://github.com/Unitech/pm2-deploy">https://github.com/Unitech/pm2-deploy</a>
Feel free to PR for any changes or fix.</p>

<p><a name="user-content-programmatic-example" aria-hidden="true"></a></p>

<h1>
<a name="user-content-using-pm2-programmatically" class="anchor" href="#using-pm2-programmatically" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using PM2 programmatically</h1>

<p>PM2 can be used programmatically, meaning that you can embed a process manager directly in your code, spawn processes, keep them alive even if the main script is exited.</p>

<p>Check out <a href="http://keymetrics.io/2014/07/02/manage-processes-programmatically-with-pm2/">this article</a> for more informations.</p>

<h2>
<a name="user-content-simple-example" class="anchor" href="#simple-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Simple example</h2>

<p>This will require pm2, launch <code>test.js</code>, list processes then exit the script.
You will notice that after exiting this script you will be able to see <code>test.js</code> process with <code>pm2 list</code></p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install pm2 --save
</pre></div>

<div class="highlight highlight-javascript"><pre><span class="kd">var</span> <span class="nx">pm2</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'pm2'</span><span class="p">);</span>

<span class="c1">// Connect or launch PM2</span>
<span class="nx">pm2</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>

  <span class="c1">// Start a script on the current folder</span>
  <span class="nx">pm2</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">'test.js'</span><span class="p">,</span> <span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="s1">'test'</span> <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">proc</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">'err'</span><span class="p">);</span>

    <span class="c1">// Get all processes running</span>
    <span class="nx">pm2</span><span class="p">.</span><span class="nx">list</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">process_list</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">process_list</span><span class="p">);</span>

      <span class="c1">// Disconnect to PM2</span>
      <span class="nx">pm2</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">});</span>
    <span class="p">});</span>
  <span class="p">});</span>
<span class="p">})</span>
</pre></div>

<p><a name="user-content-programmatic-api" aria-hidden="true"></a></p>

<h2>
<a name="user-content-programmatic-api" class="anchor" href="#programmatic-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Programmatic API</h2>

<table>
<tr>
<th>Method name</th>
        <th>API</th>
    </tr>
<tr>
<td><b>Connect/Launch</b></td>
      <td>pm2.connect(fn(err){})</td>
    </tr>
<tr>
<td><b>Disconnect</b></td>
      <td>pm2.disconnect(fn(err, proc){})</td>
    </tr>
</table><p><strong>Consideration with .connect</strong>: the .connect method connect to the local PM2, but if PM2 is not up, it will launch it and will put in in background as you launched it via CLI.</p>

<table>
<tr>
<th>Method name</th>
        <th>API</th>
    </tr>
<tr>
<td><b>Start</b></td>
      <td>pm2.start(script_path|json_path, options, fn(err, proc){})</td>
    </tr>
<tr>
<td>Options </td>
      <td>
      nodeArgs(arr), scriptArgs(arr), name(str), instances(int), error(str), output(str), pid(int), cron(str), mergeLogs(bool), watch(bool), runAsUser(int), runAsGroup(int), executeCommand(bool), interpreter(str), write(bool)</td>
    </tr>
<tr>
<td><b>Restart</b></td>
      <td>pm2.restart(proc_name|proc_id|all, fn(err, proc){})</td>
       </tr>
<tr>
<td><b>Stop</b></td>
      <td>pm2.stop(proc_name|proc_id|all, fn(err, proc){})</td>
    </tr>
<tr>
<td><b>Delete</b></td>
      <td>pm2.delete(proc_name|proc_id|all, fn(err, proc){})</td>
    </tr>
<tr>
<td><b>Reload</b></td>
      <td>pm2.reload(proc_name|all, fn(err, proc){})</td>
    </tr>
<tr>
<td><b>Graceful Reload</b></td>
      <td>pm2.gracefulReload(proc_name|all, fn(err, proc){})</td>
    </tr>
</table><table>
<tr>
<th>Method name</th>
        <th>API</th>
    </tr>
<tr>
<td><b>List</b></td>
      <td>pm2.list(fn(err, list){})</td>
    </tr>
<tr>
<td><b>Describe process</b></td>
      <td>pm2.describe(proc_name|proc_id, fn(err, list){})</td>
    </tr>
<tr>
<td><b>Dump (save)</b></td>
      <td>pm2.dump(fn(err, ret){})</td>
    </tr>
<tr>
<td><b>Flush logs</b></td>
      <td>pm2.flush(fn(err, ret){})</td>
    </tr>
<tr>
<td><b>Reload logs</b></td>
      <td>pm2.reloadLogs(fn(err, ret){})</td>
    </tr>
<tr>
<td><b>Send signal</b></td>
      <td>pm2.sendSignalToProcessName(signal,proc,fn(err, ret){})</td>
    </tr>
<tr>
<td><b>Generate start script</b></td>
      <td>pm2.startup(platform, fn(err, ret){})</td>
    </tr>
<tr>
<td><b>Kill PM2</b></td>
      <td>pm2.killDaemon(fn(err, ret){})</td>
    </tr>
</table><p><a name="user-content-a77" aria-hidden="true"></a></p>

<h1>
<a name="user-content-special-features" class="anchor" href="#special-features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Special features</h1>

<p>Launching PM2 without daemonizing itself:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js --no-daemon
</pre></div>

<p>Sending a system signal to a process:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 sendSignal SIGUSR2 my-app
</pre></div>

<p><a name="user-content-a989" aria-hidden="true"></a></p>

<h2>
<a name="user-content-configuration-file" class="anchor" href="#configuration-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configuration file</h2>

<p>You can specify the following options by editing the file <code>~/.pm2/custom_options.sh</code>:</p>

<pre><code>PM2_RPC_PORT
PM2_PUB_PORT
PM2_BIND_ADDR
PM2_API_PORT
PM2_GRACEFUL_TIMEOUT
PM2_MODIFY_REQUIRE
</code></pre>

<h2>
<a name="user-content-api-health-endpoint" class="anchor" href="#api-health-endpoint" aria-hidden="true"><span class="octicon octicon-link"></span></a>API health endpoint</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 web
</pre></div>

<p><a name="user-content-a66" aria-hidden="true"></a></p>

<h2>
<a name="user-content-enabling-harmony-es6" class="anchor" href="#enabling-harmony-es6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Enabling Harmony ES6</h2>

<p>The <code>--node-args</code> option permit to launch script with V8 flags, so to enable harmony for a process just do this:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start my_app.js --node-args<span class="o">=</span><span class="s2">"--harmony"</span>
</pre></div>

<p>And with JSON declaration:</p>

<div class="highlight highlight-bash"><pre><span class="o">[{</span>
  <span class="s2">"name"</span> : <span class="s2">"ES6"</span>,
  <span class="s2">"script"</span> : <span class="s2">"es6.js"</span>,
  <span class="s2">"node_args"</span> : <span class="s2">"--harmony"</span>
<span class="o">}]</span>
</pre></div>

<p><a name="user-content-a19" aria-hidden="true"></a></p>

<h2>
<a name="user-content-coffeescript" class="anchor" href="#coffeescript" aria-hidden="true"><span class="octicon octicon-link"></span></a>CoffeeScript</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start my_app.coffee
</pre></div>

<p>That's all!</p>

<h1>
<a name="user-content-knowledge-1" class="anchor" href="#knowledge-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>Knowledge</h1>

<p><a name="user-content-stateless-apps" aria-hidden="true"></a></p>

<h2>
<a name="user-content-stateless-apps" class="anchor" href="#stateless-apps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Stateless apps</h2>

<p>We recommend (and you must) write stateless NodeJS apps. Apps that don't retain any form of local variables or local instances or whatever local.
Every data, states, websocket session, session data, must be shared via any kind of database.</p>

<p>We recommend using Redis for sharing session data, websocket.</p>

<ul class="task-list">
<li>SocketIO with Redis : <a href="Configuring%20SocketIO">https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO</a>
</li>
<li>Redis session store for Connect : <a href="Connect-redis">https://github.com/visionmedia/connect-redis</a>
</li>
</ul><p>We recommend following the 12 factor convention : <a href="http://12factor.net/">http://12factor.net/</a></p>

<p><a name="user-content-a89" aria-hidden="true"></a></p>

<h2>
<a name="user-content-setup-pm2-on-a-server" class="anchor" href="#setup-pm2-on-a-server" aria-hidden="true"><span class="octicon octicon-link"></span></a>Setup pm2 on a server</h2>

<p><a href="https://www.digitalocean.com/community/articles/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps">How To Use pm2 to Setup a Node.js Production Environment On An Ubuntu VPS</a></p>

<p><a name="user-content-a34" aria-hidden="true"></a></p>

<h2>
<a name="user-content-log-and-pid-files" class="anchor" href="#log-and-pid-files" aria-hidden="true"><span class="octicon octicon-link"></span></a>Log and PID files</h2>

<p>By default, logs (error and output), pid files, dumps, and PM2 logs are located in <code>~/.pm2/</code>:</p>

<pre><code>.pm2/
 dump.pm2
 custom_options.sh
 pm2.log
 pm2.pid
 logs
 pids
</code></pre>

<p><a name="user-content-a23" aria-hidden="true"></a></p>

<h2>
<a name="user-content-execute-any-script-what-is-fork-mode" class="anchor" href="#execute-any-script-what-is-fork-mode" aria-hidden="true"><span class="octicon octicon-link"></span></a>Execute any script: What is fork mode?</h2>

<p>The default mode of PM2 consists of wrapping the code of your node application into the Node Cluster module. It's called the <strong>cluster mode</strong>.</p>

<p>There is also a more classical way to execute your app, like node-forever does, called the <strong>fork mode</strong>.</p>

<p>In fork mode almost all options are the same as the cluster mode. But there is no <a href="#reloading-without-downtime"><code>reload</code></a> or <code>gracefulReload</code> command.</p>

<p><strong>By using the fork mode you will lose core features of pm2 like the automatic clusterization of your code over all CPUs available and the 0s reload.</strong></p>

<p>So use it if you only need a forever-like behaviour.</p>

<p>Here is how to start your app within a fork:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start app.js -x   <span class="c"># Will start your app.js in fork mode</span>
<span class="nv">$ </span>pm2 list              <span class="c"># You will see that on the row "mode" it's written "fork"</span>
</pre></div>

<p>You can also exec scripts written in other languages:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 start my-bash-script.sh -x --interpreter bash

<span class="nv">$ </span>pm2 start my-python-script.py -x --interpreter python
</pre></div>

<p>The interpreter is deduced from the file extension from the <a href="https://github.com/Unitech/pm2/blob/master/lib/interpreter.json">following list</a>.</p>

<p><a name="user-content-a96" aria-hidden="true"></a></p>

<h2>
<a name="user-content-json-app-configuration-via-pipe-from-stdout" class="anchor" href="#json-app-configuration-via-pipe-from-stdout" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSON app configuration via pipe from stdout</h2>

<p>Pull-requests:</p>

<ul class="task-list">
<li><a href="https://github.com/Unitech/pm2/pull/273">#273</a></li>
<li><a href="https://github.com/Unitech/pm2/pull/279">#279</a></li>
</ul><div class="highlight highlight-bash"><pre><span class="c">#!/bin/bash</span>

<span class="nb">read</span> -d <span class="s1">''</span> my_json <span class="s">&lt;&lt;_EOF_</span>
<span class="s">[{</span>
<span class="s">    "name"       : "app1",</span>
<span class="s">    "script"     : "/home/projects/pm2_nodetest/app.js",</span>
<span class="s">    "instances"  : "4",</span>
<span class="s">    "error_file" : "./logz/child-err.log",</span>
<span class="s">    "out_file"   : "./logz/child-out.log",</span>
<span class="s">    "pid_file"   : "./logz/child.pid",</span>
<span class="s">    "exec_mode"  : "cluster_mode",</span>
<span class="s">    "port"       : 4200</span>
<span class="s">}]</span>
<span class="s">_EOF_</span>

<span class="nb">echo</span> <span class="nv">$my_json</span> <span class="p">|</span> pm2 start -
</pre></div>

<p><a name="user-content-a149" aria-hidden="true"></a></p>

<h2>
<a name="user-content-is-my-production-server-ready-for-pm2" class="anchor" href="#is-my-production-server-ready-for-pm2" aria-hidden="true"><span class="octicon octicon-link"></span></a>Is my production server ready for PM2?</h2>

<p>Just try the tests before using PM2 on your production server</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>git clone https://github.com/Unitech/pm2.git
<span class="nv">$ </span><span class="nb">cd </span>pm2
<span class="nv">$ </span>npm install  <span class="c"># Or do NODE_ENV=development npm install if some packages are missing</span>
<span class="nv">$ </span>npm <span class="nb">test</span>
</pre></div>

<p>If a test is broken please report us issues <a href="https://github.com/Unitech/pm2/issues?state=open">here</a>
Also make sure you have all dependencies needed. For Ubuntu:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>sudo apt-get install build-essential
<span class="c"># nvm is a Node.js version manager - https://github.com/creationix/nvm</span>
<span class="nv">$ </span>wget -qO- https://raw.github.com/creationix/nvm/master/install.sh <span class="p">|</span> sh
<span class="nv">$ </span>nvm install v0.11.10
<span class="nv">$ </span>nvm use v0.11.10
<span class="nv">$ </span>nvm <span class="nb">alias </span>default v0.11.10
</pre></div>

<p><a name="user-content-a27" aria-hidden="true"></a></p>

<h2>
<a name="user-content-contributingdevelopment-mode" class="anchor" href="#contributingdevelopment-mode" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing/Development mode</h2>

<p>To hack PM2, it's very simple:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>pm2 <span class="nb">kill</span>   <span class="c"># kill the current pm2</span>
<span class="nv">$ </span>git clone my_pm2_fork.git
<span class="nv">$ </span><span class="nb">cd </span>pm2/
<span class="nv">$ DEBUG</span><span class="o">=</span>* <span class="nv">PM2_DEBUG</span><span class="o">=</span><span class="nb">true</span> ./bin/pm2 --no-daemon
</pre></div>

<p>Each time you edit the code, be sure to kill and restart PM2 to make changes taking effect.</p>

<h2>
<a name="user-content-install-pm2-development" class="anchor" href="#install-pm2-development" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install PM2 development</h2>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install git://github.com/Unitech/pm2#development -g
</pre></div>

<p><a name="user-content-a21" aria-hidden="true"></a></p>

<h2>
<a name="user-content-known-bugs-and-workarounds" class="anchor" href="#known-bugs-and-workarounds" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known bugs and workarounds</h2>

<p>First, install the lastest PM2 version:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>npm install -g pm2@latest
</pre></div>

<h3>
<a name="user-content-node-010x-doesnt-free-the-script-port-when-stopped-its-due-to-the-nodejs-cluster-module" class="anchor" href="#node-010x-doesnt-free-the-script-port-when-stopped-its-due-to-the-nodejs-cluster-module" aria-hidden="true"><span class="octicon octicon-link"></span></a>Node 0.10.x doesn't free the script port when stopped. It's due to the Node.js cluster module.</h3>

<p>So if you feel that this problem is important for your use case, use the <a href="#execute-any-script-what-is-fork-mode-">fork mode</a> instead.
By using the fork mode you will lose core features of PM2 like the automatic clusterization of your code over all CPUs available and the 0s reload.</p>

<pre><code>$ pm2 start index.js -x  # start my app in fork mode
</code></pre>

<p>For more information about this, see <a href="https://github.com/Unitech/pm2/issues/74">issue #74</a>.</p>

<h3>
<a name="user-content-cannot-read-property-getsockname-of-undefined" class="anchor" href="#cannot-read-property-getsockname-of-undefined" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>Cannot read property 'getsockname' of undefined</code>
</h3>

<p>When using the cluster mode (by default) you can't use ports from 0 to 1024. If you really need to exec in this range use the <a href="#a23">fork mode</a> with the <code>-x</code> parameter.
By using the fork mode you will lose core features of pm2 like the automatic clusterization of your code over all CPUs available and the 0s reload.</p>

<h3>
<a name="user-content-user-tips-from-issues" class="anchor" href="#user-tips-from-issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>User tips from issues</h3>

<ul class="task-list">
<li><a href="https://github.com/Unitech/pm2/issues/289#issuecomment-42900019">Vagrant and pm2 #289</a></li>
<li><a href="https://github.com/Unitech/pm2/issues/322#issuecomment-46792733">Start the same app on different ports #322</a></li>
<li><a href="https://github.com/Unitech/pm2/issues/88#issuecomment-49106686">Using ansible with pm2</a></li>
<li><a href="https://github.com/Unitech/pm2/issues/496#issuecomment-49323861">Cron string as argument</a></li>
<li><a href="https://github.com/Unitech/pm2/issues/141">Restart when process reaches a specific memory amount</a></li>
</ul><p><a name="user-content-a20" aria-hidden="true"></a></p>

<h2>
<a name="user-content-external-resources-and-articles" class="anchor" href="#external-resources-and-articles" aria-hidden="true"><span class="octicon octicon-link"></span></a>External resources and articles</h2>

<ul class="task-list">
<li><a href="http://devo.ps/blog/2013/06/26/goodbye-node-forever-hello-pm2.html">Goodbye node-forever, hello pm2</a></li>
<li><a href="http://www.allaboutghost.com/keep-ghost-running-with-pm2/">http://www.allaboutghost.com/keep-ghost-running-with-pm2/</a></li>
<li><a href="http://blog.ponyfoo.com/2013/09/19/deploying-node-apps-to-aws-using-grunt">http://blog.ponyfoo.com/2013/09/19/deploying-node-apps-to-aws-using-grunt</a></li>
<li><a href="http://www.allaboutghost.com/keep-ghost-running-with-pm2/">http://www.allaboutghost.com/keep-ghost-running-with-pm2/</a></li>
<li><a href="http://bioselemental.com/keeping-ghost-alive-with-pm2/">http://bioselemental.com/keeping-ghost-alive-with-pm2/</a></li>
<li><a href="http://blog.chyld.net/installing-ghost-on-ubuntu-13-10-aws-ec2-instance-with-pm2/">http://blog.chyld.net/installing-ghost-on-ubuntu-13-10-aws-ec2-instance-with-pm2/</a></li>
<li><a href="http://blog.marvinroger.fr/gerer-ses-applications-node-en-production-pm2/">http://blog.marvinroger.fr/gerer-ses-applications-node-en-production-pm2/</a></li>
<li><a href="https://www.codersgrid.com/2013/06/29/pm2-process-manager-for-node-js/">https://www.codersgrid.com/2013/06/29/pm2-process-manager-for-node-js/</a></li>
<li><a href="http://www.z-car.com/blog/programming/how-to-rotate-logs-using-pm2-process-manager-for-node-js">http://www.z-car.com/blog/programming/how-to-rotate-logs-using-pm2-process-manager-for-node-js</a></li>
<li><a href="http://yosoftware.com/blog/7-tips-for-a-node-js/">http://yosoftware.com/blog/7-tips-for-a-node-js/</a></li>
<li><a href="https://www.exponential.io/blog/nodeday-2014-moving-a-large-developer-workforce-to-nodejs">https://www.exponential.io/blog/nodeday-2014-moving-a-large-developer-workforce-to-nodejs</a></li>
<li><a href="http://blog.rapsli.ch/posts/2013/2013-10-17-node-monitor-pm2.html">http://blog.rapsli.ch/posts/2013/2013-10-17-node-monitor-pm2.html</a></li>
<li><a href="https://coderwall.com/p/igdqyw">https://coderwall.com/p/igdqyw</a></li>
<li><a href="http://revdancatt.com/2013/09/17/node-day-1-getting-the-server-installing-node-and-pm2/">http://revdancatt.com/2013/09/17/node-day-1-getting-the-server-installing-node-and-pm2/</a></li>
<li><a href="https://medium.com/tech-talk/e7c0b0e5ce3c">https://medium.com/tech-talk/e7c0b0e5ce3c</a></li>
</ul><h2>
<a name="user-content-contributors" class="anchor" href="#contributors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributors</h2>

<pre><code>   195  tknew2
   184  Alexandre Strzelewicz
    20  Alex Kocharin
     8  soyuka
     6  sailxjx
     5  Bret Copeland
     4  AS
     4  Ville Walveranta
     4  achingbrain
     3  Ben Postlethwaite
     3  Evan You
     2  Frederico Silva
     2  Ivan Seidel
     2  MATSUU Takuto
     2  Oleg
     2  Willian
     2  Yani Iliev
     1  Almog Melamed
     1  Brent Burgoyne
     1  Daniel Pihlstrom
     1  Ed Hubbell
     1  Eugene Lucash
     1  Gil Pedersen
     1  Hao-kang Den
     1  John Hurliman
     1  Jose V. Trigueros
     1  Josh Skidmore
     1  Juozas Valenius
     1  Kevin Gao
     1  Loc Mahieu
     1  Mark Evans
     1  Nathan Peck
     1  TruongSinh Tran-Nguyen
     1  Wes Mason
     1  Zihua Li
     1  perfectworks
     1  subeeshcbabu
     1  Michael Heuberger
</code></pre>

<h2>
<a name="user-content-sponsors" class="anchor" href="#sponsors" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sponsors</h2>

<p>Thanks to <a href="http://devo.ps/">Devo.ps</a> and <a href="http://wiredcraft.com/">Wiredcraft</a> for their knowledge and expertise.</p>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://camo.githubusercontent.com/51d6d05e348fc901325e31e81ea34e17db53e04b/68747470733a2f2f64327765637a68766c38323376302e636c6f756466726f6e742e6e65742f556e69746563682f706d322f7472656e642e706e67" alt="Bitdeli Badge" data-canonical-src="https://d2weczhvl823v0.cloudfront.net/Unitech/pm2/trend.png" style="max-width:100%;"></a></p>

<p><a name="user-content-a15" aria-hidden="true"></a></p>

<h1>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h1>

<p>Files in <code>lib/</code> are made available under the terms of the GNU Affero General Public License (AGPL).
<code>pm2-interface</code> is made under the terms of the Apache V2 license.</p></article></div>
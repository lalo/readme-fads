<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-microsoft-azure-powershell" class="anchor" href="#microsoft-azure-powershell" aria-hidden="true"><span class="octicon octicon-link"></span></a>Microsoft Azure PowerShell</h1>

<p>This repository contains a set of PowerShell cmdlets for developers and administrators to develop, deploy and manage Microsoft Azure applications.</p>

<ul class="task-list">
<li>For documentation on how to build and deploy applications to Microsoft Azure please see the <a href="http://azure.microsoft.com/en-us/documentation/">Microsoft Azure Documentation Center</a>.</li>
<li>For comprehensive documentation on the developer cmdlets see <a href="http://azure.microsoft.com/en-us/documentation/articles/install-configure-powershell/">How to install and configure Azure PowerShell</a>.</li>
<li>For comprehensive documentation on the full set of Microsoft Azure cmdlets see <a href="http://go.microsoft.com/fwlink/?linkID=254459&amp;clcid=0x409">Microsoft Azure Management Center</a>.</li>
</ul><h2>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h2>

<ul class="task-list">
<li>Account

<ul class="task-list">
<li>Get and import Azure publish settings</li>
<li>Login with Microsoft account or Organizational account through Microsoft Azure Active Directory</li>
</ul>
</li>
<li>Environment

<ul class="task-list">
<li>Get the different out-of-box Microsoft Azure environments</li>
<li>Add/Set/Remove customized environments (like your Windows Azure Pack environments)</li>
<li>Get Azure publish settings for a particular environment</li>
</ul>
</li>
<li>Subscription

<ul class="task-list">
<li>Manage Azure subscription</li>
<li>Manage AffinityGroup</li>
</ul>
</li>
<li>Website

<ul class="task-list">
<li>Manage website, such as CRUD, start and stop.</li>
<li>Manage slot</li>
<li>Manage WebJob</li>
<li>Deploy project via WebDeploy</li>
<li>Diagnostics

<ul class="task-list">
<li>Configure site and application diagnostics</li>
<li>Log streaming</li>
<li>Save log</li>
</ul>
</li>
</ul>
</li>
<li>Cloud Services

<ul class="task-list">
<li>Create scaffolding for cloud service and role. Role support includes Node.js, PHP, Django and Cache.</li>
<li>Manage cloud service and role, such as CRUD, start and stop.</li>
<li>Manage extension</li>
<li>Start/Stop Azure emulator.</li>
<li>Manage certificate.</li>
<li>Manage cloud service extensions

<ul class="task-list">
<li>Remote desktop</li>
<li>Diagnostics</li>
<li>Microsoft Antimalware</li>
<li>Windows Azure Diagnostics</li>
</ul>
</li>
</ul>
</li>
<li>Storage

<ul class="task-list">
<li>Manage storage account and access key.</li>
<li>Manage storage container and blob, with paging.</li>
<li>Copy storage blob.</li>
<li>Manage storage table.</li>
<li>Manage storage queue.</li>
<li>Create SAS token.</li>
<li>Manage metrics and logging.</li>
<li>Configure timeout</li>
</ul>
</li>
<li>SQL Database

<ul class="task-list">
<li>CRUD support for database server, database and firewall rule.</li>
<li>Get database server quota.</li>
<li>Get/Set database server service objective.</li>
<li>Manage database copies and active geo-replication.</li>
<li>Get dropped databases that can be restored.</li>
<li>Issue requests to restore a live or dropped database to a point in time.</li>
<li>Issue requests to recover a database from an unavailable database server.</li>
</ul>
</li>
<li>Service Bus

<ul class="task-list">
<li>Manage service bus namespaces.</li>
</ul>
</li>
<li>VM

<ul class="task-list">
<li>Manage VM, such as CRUD, import/export and start/stop/restart.</li>
<li>Manage VM image and VM image disks.</li>
<li>Manage disk, such as CRUD.</li>
<li>Manage VM endpoint, such as CRUD and ACL.</li>
<li>Get/Set VM sub net.</li>
<li>Manage certificate and SSH key.</li>
<li>PowerShell remoting</li>
<li>Manage extension

<ul class="task-list">
<li>BG Info</li>
<li>Puppet</li>
<li>Custom Script</li>
<li>Access</li>
<li>Microsoft Antimalware</li>
<li>PowerShell DSC</li>
<li>Windows Azure Diagnostics</li>
</ul>
</li>
<li>Public IP, reserved IP and internal load balancer</li>
</ul>
</li>
<li>Deployment

<ul class="task-list">
<li>Manage deployment, such as CRUD, move, upgrade and restore.</li>
<li>Get/Create DNS settings of a deployment.</li>
</ul>
</li>
<li>VNet

<ul class="task-list">
<li>Manage virtual network config, connection and gateway.</li>
<li>Manage static IP</li>
</ul>
</li>
<li>Azure Media Services

<ul class="task-list">
<li>Create, read and delete Media Services Accounts</li>
<li>Generate new account keys for Media Services Accounts</li>
</ul>
</li>
<li>HDInsight

<ul class="task-list">
<li>Manage clusters, such as CRUD, add/set storage</li>
<li>Manage jobs, such as CRUD, start/stop/wait/invoke</li>
<li>Manage HTTP service access. such as grant/revoke</li>
</ul>
</li>
<li>Store

<ul class="task-list">
<li>View available Microsoft Azure Store Add-On plans.</li>
<li>Purchase, view, upgrade and remove Microsoft Azure Store Add-On instances.</li>
</ul>
</li>
<li>Utility

<ul class="task-list">
<li>Test whether a name is available. Currently support cloud service name, storage account name and service bus namespace name.</li>
<li>Get the list of geo locations supported by Azure.</li>
<li>Get the list of OS supported by Azure.</li>
<li>Direct you to Azure portal.</li>
</ul>
</li>
<li>Windows Azure Pack

<ul class="task-list">
<li>Web Site: CRUD web site, deployment, configure and get log, start/stop/restart/show web site</li>
<li>Service Bus: CRD namespace</li>
<li>VM: CRUD VM, get OS disk, size profile and VM template, start/stop/restart/suspend/resume VM</li>
<li>VNET: CRUD VNET and subnet.</li>
<li>Cloud Service: CRUD cloud service.</li>
</ul>
</li>
<li>ExpressRoute

<ul class="task-list">
<li>Manage dedicated circuit</li>
<li>Manage BGP peering</li>
</ul>
</li>
<li>Scheduler

<ul class="task-list">
<li>Manage job collections</li>
<li>Manage HTTP and storage queue jobs</li>
</ul>
</li>
<li>Resource Manager

<ul class="task-list">
<li>Manage resource groups and deployments</li>
<li>Query and download gallery templates</li>
<li>Manage individual resources</li>
</ul>
</li>
<li>Traffic Manager

<ul class="task-list">
<li>Manage profiles and endpoints</li>
</ul>
</li>
<li>Azure Automation

<ul class="task-list">
<li>Manage automation accounts</li>
<li>Manage automation jobs, runbooks and schedules</li>
</ul>
</li>
</ul><p>For detail descriptions and examples of the cmdlets, type</p>

<ul class="task-list">
<li>
<code>help azure</code> to get all the cmdlets.</li>
<li>
<code>help node-dev</code> to get all Node.js development related cmdlets.</li>
<li>
<code>help php-dev</code> to get all PHP development related cmdlets.</li>
<li>
<code>help python-dev</code> to get all Python development related cmdlets.</li>
<li>
<code>help &lt;cmdlet name&gt;</code> to get the details of a specific cmdlet.</li>
</ul><h2>
<a name="user-content-supported-environments" class="anchor" href="#supported-environments" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported Environments</h2>

<ul class="task-list">
<li><a href="http://www.azure.microsoft.com">Microsoft Azure</a></li>
<li><a href="http://www.microsoft.com/en-us/server-cloud/windows-azure-pack.aspx">Windows Azure Pack</a></li>
<li><a href="http://www.windowsazure.cn/">Microsoft Azure China</a></li>
</ul><h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<h3>
<a name="user-content-microsoft-web-platform-installer" class="anchor" href="#microsoft-web-platform-installer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Microsoft Web Platform Installer</h3>

<ol class="task-list">
<li>Install <a href="http://www.microsoft.com/web/downloads/platform.aspx">Microsoft Web Platform Installer</a>.</li>
<li>Open Microsoft Web Platform Installer and search for <strong>Microsoft Azure PowerShell</strong>.</li>
<li>Install.</li>
</ol><p>You can also find the standalone installers for all the versions at <a href="https://github.com/Azure/azure-sdk-tools/releases">Downloads</a></p>

<h3>
<a name="user-content-source-code" class="anchor" href="#source-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Source Code</h3>

<ol class="task-list">
<li>Download the source code from GitHub repo</li>
<li>Follow the <a href="https://github.com/Azure/azure-sdk-tools/wiki/Windows-Azure-PowerShell-Developer-Guide">Microsoft Azure PowerShell Developer Guide</a>
</li>
</ol><h3>
<a name="user-content-supported-powershell-versions" class="anchor" href="#supported-powershell-versions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported PowerShell Versions</h3>

<ul class="task-list">
<li>0.6.9 or lower

<ul class="task-list">
<li><a href="http://technet.microsoft.com/en-us/scriptcenter/dd742419">Windows PowerShell 2.0</a></li>
<li><a href="http://www.microsoft.com/en-us/download/details.aspx?id=34595">Windows PowerShell 3.0</a></li>
</ul>
</li>
<li>0.6.10 to higher

<ul class="task-list">
<li><a href="http://www.microsoft.com/en-us/download/details.aspx?id=34595">Windows PowerShell 3.0</a></li>
</ul>
</li>
</ul><h2>
<a name="user-content-get-started" class="anchor" href="#get-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Started</h2>

<p>In general, following are the steps to start using Microsoft Azure PowerShell</p>

<ul class="task-list">
<li>Get yourself authenticated with Microsoft Azure. For details, please check out <a href="http://www.azure.microsoft.com/en-us/manage/install-and-configure-windows-powershell/">this article</a>.

<ul class="task-list">
<li>Option 1: Login with your Microsoft account or Organizational account directly from PowerShell. Microsoft Azure Active Directory authentication is used in this case. No management certificate is needed.

<ul class="task-list">
<li>Starting from 0.8.6, you can use <code>Add-AzureAccount -Credential</code> to avoid the browser pop up for Organizational account.</li>
</ul>
</li>
<li>Option 2: Download and import a publish settings file which contains a management certificate.</li>
</ul>
</li>
<li>Use the cmdlets</li>
</ul><p>The first step can be different for different environment you are targeting. Following are detail instructions for each supported environment.</p>

<h3>
<a name="user-content-microsoft-azure" class="anchor" href="#microsoft-azure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Microsoft Azure</h3>

<p>If you use both mechanisms on the same subscription, Microsoft Azure Active Directory authentication always wins. If you want to go back to management certificate authentication, please use <code>Remove-AzureAccount</code>, which will remove the Microsoft Azure Active Directory information and bring management certificate authentication back in.</p>

<h4>
<a name="user-content-login-directly-from-powershell-microsoft-azure-active-directory-authentication" class="anchor" href="#login-directly-from-powershell-microsoft-azure-active-directory-authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Login directly from PowerShell (Microsoft Azure Active Directory authentication)</h4>

<div class="highlight highlight-powershell"><pre><span class="c"># Pop up an embedded browser control for you to login</span>
<span class="nb">Add-AzureAccount</span>

<span class="c"># use the cmdlets to manage your services/applications</span>
<span class="nb">New-AzureWebsite</span> <span class="n">-Name</span> <span class="n">mywebsite</span> <span class="n">-Location</span> <span class="s2">"West US"</span>
</pre></div>

<h4>
<a name="user-content-use-publish-settings-file-management-certificate-authentication" class="anchor" href="#use-publish-settings-file-management-certificate-authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use publish settings file (Management certificate authentication)</h4>

<div class="highlight highlight-powershell"><pre><span class="c"># Download a file which contains the publish settings information of your subscription.</span>
<span class="c"># This will open a browser window and ask you to log in to get the file.</span>
<span class="nb">Get-AzurePublishSettingsFile</span>

<span class="c"># Import the file you just downloaded.</span>
<span class="c"># Notice that the file contains credential of your subscription so you don't want to make it public</span>
<span class="c"># (like check in to source control, etc.).</span>
<span class="nb">Import-AzurePublishSettingsFile</span> <span class="s2">"&lt;file location&gt;"</span>

<span class="c"># Use the cmdlets to manage your services/applications</span>
<span class="nb">New-AzureWebsite</span> <span class="n">-Name</span> <span class="n">mywebsite</span> <span class="n">-Location</span> <span class="s2">"West US"</span>
</pre></div>

<h3>
<a name="user-content-microsoft-azure-china" class="anchor" href="#microsoft-azure-china" aria-hidden="true"><span class="octicon octicon-link"></span></a>Microsoft Azure China</h3>

<div class="highlight highlight-powershell"><pre><span class="c"># Check the environment supported by your Microsoft Azure PowerShell installation.</span>
<span class="nb">Get-AzureEnvironment</span>

<span class="c"># Download a file which contains the publish settings information of your subscription.</span>
<span class="c"># Use the -Environment parameter to target Microsoft Azure China.</span>
<span class="c"># This will open a browser window and ask you to log in to get the file.</span>
<span class="nb">Get-AzurePublishSettingsFile</span> <span class="n">-Environment</span> <span class="s2">"AzureChinaCloud"</span>

<span class="c"># Import the file you just downloaded.</span>
<span class="c"># Notice that the file contains credential of your subscription so you don't want to make it public</span>
<span class="c"># (like check in to source control, etc.).</span>
<span class="nb">Import-AzurePublishSettingsFile</span> <span class="s2">"&lt;file location&gt;"</span>

<span class="c"># Use the cmdlets to manage your services/applications</span>
<span class="nb">New-AzureWebsite</span> <span class="n">-Name</span> <span class="n">mywebsite</span> <span class="n">-Location</span> <span class="s2">"China East"</span>
</pre></div>

<h3>
<a name="user-content-windows-azure-pack" class="anchor" href="#windows-azure-pack" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows Azure Pack</h3>

<div class="highlight highlight-powershell"><pre><span class="c"># Add your Windows Azure Pack environment to your Microsoft Azure PowerShell installation.</span>
<span class="c"># You will need to know the following information of your Windows Azure Pack environment.</span>
<span class="c"># 1. URL to download the publish settings file    Mandatory</span>
<span class="c"># 2. Management service endpoint                  Optional</span>
<span class="c"># 3. Management Portal URL                        Optional</span>
<span class="c"># 4. Storage service endpoint                     Optional</span>
<span class="nb">Add-WAPackEnvironment</span> <span class="n">-Name</span> <span class="s2">"MyWAPackEnv"</span> <span class="p">`</span>
    <span class="n">-PublishSettingsFileUrl</span> <span class="s2">"URL to download the publish settings file&gt;"</span> <span class="p">`</span>
    <span class="n">-ServiceEndpoint</span> <span class="s2">"&lt;Management service endpoint&gt;"</span> <span class="p">`</span>
    <span class="n">-ManagementPortalUrl</span> <span class="s2">"&lt;Storage service endpoint&gt;"</span> <span class="p">`</span>
    <span class="n">-StorageEndpoint</span> <span class="s2">"&lt;Management Portal URL&gt;"</span>

<span class="c"># Download a file which contains the publish settings information of your subscription.</span>
<span class="c"># Use the -Environment parameter to target your Windows Azure Pack environment.</span>
<span class="c"># This will open a browser window and ask you to log in to get the file.</span>
<span class="nb">Get-WAPackPublishSettingsFile</span> <span class="n">-Environment</span> <span class="s2">"MyWAPackEnv"</span>

<span class="c"># Import the file you just downloaded.</span>
<span class="c"># Notice that the file contains credential of your subscription so you don't want to make it public</span>
<span class="c"># (like check in to source control, etc.).</span>
<span class="nb">Import-WAPackPublishSettingsFile</span> <span class="s2">"&lt;file location&gt;"</span>

<span class="c"># Use the cmdlets to manage your services/applications</span>
<span class="nb">New-WAPackWebsite</span> <span class="n">-Name</span> <span class="n">mywebsite</span>
</pre></div>

<h2>
<a name="user-content-2-modes" class="anchor" href="#2-modes" aria-hidden="true"><span class="octicon octicon-link"></span></a>2 Modes</h2>

<p>Starting from 0.8.0, we are adding a separate mode for Resource Manager. You can use the following cmdlet to switch between the</p>

<ul class="task-list">
<li>Service management: cmdlets using the Azure service management API</li>
<li>Resource manager: cmdlets using the Azure Resource Manager API</li>
</ul><p>They are not designed to work together.</p>

<div class="highlight highlight-powershell"><pre><span class="k">Switch</span><span class="n">-AzureMode</span> <span class="n">AzureServiceManagement</span>
<span class="k">Switch</span><span class="n">-AzureMode</span> <span class="n">AzureResourceManager</span>
</pre></div>

<h2>
<a name="user-content-find-your-way" class="anchor" href="#find-your-way" aria-hidden="true"><span class="octicon octicon-link"></span></a>Find Your Way</h2>

<p>All the cmdlets can be put into 3 categories:</p>

<ol class="task-list">
<li>Cmdlets support both Microsoft Azure and Windows Azure Pack</li>
<li>Cmdlets only support both Microsoft Azure</li>
<li><p>Cmdlets only support Windows Azure Pack</p></li>
</ol><ul class="task-list">
<li>For category 1, we are using an "Azure" prefix in the cmdlet name and adding an alias with "WAPack" prefix.</li>
<li>For category 2, we are using an "Azure" prefix in the cmdlet name.</li>
<li>For category 2, we are using an "WAPack" prefix in the cmdlet name.</li>
</ul><p>So you can use the following cmdlet to find out all the cmdlets for your environment</p>

<div class="highlight highlight-powershell"><pre><span class="c"># Return all the cmdlets for Microsoft Azure</span>
<span class="nb">Get-Command</span> <span class="p">*</span><span class="n">Azure</span><span class="p">*</span>

<span class="c"># Return all the cmdlets for Windows Azure Pack</span>
<span class="nb">Get-Command</span> <span class="p">*</span><span class="n">WAPack</span><span class="p">*</span>
</pre></div>

<p>If you want to migrate some scripts from Microsoft Azure to Windows Azure Pack or vice versa, as long as the cmdlets you are using are in category 1, you should be able to migrate smoothly.</p>

<h2>
<a name="user-content-need-help" class="anchor" href="#need-help" aria-hidden="true"><span class="octicon octicon-link"></span></a>Need Help?</h2>

<p>Be sure to check out the <a href="http://go.microsoft.com/fwlink/?LinkId=234489">Microsoft Azure Developer Forums on Stack Overflow</a> if you have trouble with the provided code.</p>

<h2>
<a name="user-content-contribute-code-or-provide-feedback" class="anchor" href="#contribute-code-or-provide-feedback" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contribute Code or Provide Feedback</h2>

<p>If you would like to become an active contributor to this project please follow the instructions provided in <a href="http://windowsazure.github.com/guidelines.html">Microsoft Azure Projects Contribution Guidelines</a>.</p>

<p>If you encounter any bugs with the library please file an issue in the <a href="https://github.com/Azure/azure-sdk-tools/issues">Issues</a> section of the project.</p>

<h1>
<a name="user-content-learn-more" class="anchor" href="#learn-more" aria-hidden="true"><span class="octicon octicon-link"></span></a>Learn More</h1>

<ul class="task-list">
<li><a href="http://www.azure.microsoft.com/en-us/documentation/scripts/">Microsoft Azure Script Center</a></li>
</ul></article></div>
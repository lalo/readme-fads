<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-sandman" class="anchor" href="#sandman" aria-hidden="true"><span class="octicon octicon-link"></span></a>sandman</h1>

<p><a href="https://travis-ci.org/jeffknupp/sandman"><img src="https://camo.githubusercontent.com/7a1b082b341a4796208044a83d8d20852c45ccd0/68747470733a2f2f7472617669732d63692e6f72672f6a6566666b6e7570702f73616e646d616e2e706e673f6272616e63683d646576656c6f70" alt="Build Status" data-canonical-src="https://travis-ci.org/jeffknupp/sandman.png?branch=develop" style="max-width:100%;"></a></p>

<p><a href="https://coveralls.io/r/jeffknupp/sandman?branch=develop"><img src="https://camo.githubusercontent.com/3f5d088475903b4a580bdf6af370db4f1a52e527/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f6a6566666b6e7570702f73616e646d616e2f62616467652e706e673f6272616e63683d646576656c6f70" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/jeffknupp/sandman/badge.png?branch=develop" style="max-width:100%;"></a></p>

<p><a href="https://gitter.im/jeffknupp/sandman"><img src="https://camo.githubusercontent.com/ce4ac0f2897b5c470bc38064ec5110515d3f70e7/68747470733a2f2f6261646765732e6769747465722e696d2f6a6566666b6e7570702f73616e646d616e2e706e67" alt="Gitter chat" data-canonical-src="https://badges.gitter.im/jeffknupp/sandman.png" style="max-width:100%;"></a></p>

<p><a href="https://github.com/jeffknupp/sandman"><img src="https://camo.githubusercontent.com/8ac27e931ab8733b92622650274b494f3d892994/68747470733a2f2f67612d626561636f6e2e61707073706f742e636f6d2f55412d31323631353434312d372f73616e646d616e2f686f6d65" alt="Analytics" data-canonical-src="https://ga-beacon.appspot.com/UA-12615441-7/sandman/home" style="max-width:100%;"></a></p>

<p><a href="http://img.shields.io/pypi/dm/sandman.svg"><img src="https://camo.githubusercontent.com/eeb8fcda89d281659bdfb7e6a30cd9520479523a/687474703a2f2f696d672e736869656c64732e696f2f707970692f646d2f73616e646d616e2e737667" alt="PyPI" data-canonical-src="http://img.shields.io/pypi/dm/sandman.svg" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-homepage" class="anchor" href="#homepage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Homepage</h2>

<p>Visit the home of <code>sandman</code> on the web: <a href="http://www.sandman.io">sandman.io</a></p>

<h2>
<a name="user-content-discuss" class="anchor" href="#discuss" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discuss</h2>

<p>Looking for a place to ask questions about sandman? Check out the <a href="https://groups.google.com/forum/#!forum/sandman-discuss">sandman-discuss</a> and <a href="https://groups.google.com/forum/#!forum/sandman-users">sandman-users</a> forums!</p>

<h2>
<a name="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p><a href="https://sandman.readthedocs.org/en/latest/">Sandman documentation</a></p>

<p><code>sandman</code> "makes things REST". Have an existing database you'd like to expose via
a REST API? Normally, you'd have to write a ton of boilerplate code for
the ORM you're using, then integrate that into some web framework. </p>

<p>I don't want to write boilerplate.</p>

<p>Here's what's required to create a RESTful API service from an existing database using
<code>sandman</code>:</p>

<div class="highlight highlight-bash"><pre><span class="nv">$ </span>sandmanctl sqlite:////tmp/my_database.db
</pre></div>

<p><em>That's it.</em> <code>sandman</code> will then do the following:</p>

<ul class="task-list">
<li>connect to your database and introspect its contents</li>
<li>create and launch a REST API service</li>
<li>create an HTML admin interface</li>
<li><em>open your browser to the admin interface</em></li>
</ul><p>That's right. Given a legacy database, <code>sandman</code> not only gives you a REST API,
it gives you a beautiful admin page and <em>opens your browser to the admin page</em>.
It truly does everything for you.</p>

<h2>
<a name="user-content-supported-databases" class="anchor" href="#supported-databases" aria-hidden="true"><span class="octicon octicon-link"></span></a>Supported Databases</h2>

<p><code>sandman</code>, by default, supports connections to the same set of databases as
<a href="http://www.sqlalchemy.org">SQLAlchemy</a>. As of this writing, that includes:</p>

<ul class="task-list">
<li>MySQL (MariaDB)</li>
<li>PostgreSQL</li>
<li>SQLite</li>
<li>Oracle</li>
<li>Microsoft SQL Server</li>
<li>Firebird</li>
<li>Drizzle</li>
<li>Sybase</li>
<li>IBM DB2</li>
<li>SAP Sybase SQL Anywhere</li>
<li>MonetDB</li>
</ul><h2>
<a name="user-content-authentication" class="anchor" href="#authentication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authentication</h2>

<p>As of version 0.9.3, <code>sandman</code> fully supports HTTP Basic Authentication! See the
documentation for more details.</p>

<h2>
<a name="user-content-behind-the-scenes" class="anchor" href="#behind-the-scenes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Behind the Scenes</h2>

<p><code>sandmanctl</code> is really just a simple wrapper around the following:</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">sandman</span> <span class="kn">import</span> <span class="n">app</span>

<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s">'SQLALCHEMY_DATABASE_URI'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'sqlite:///chinook'</span>

<span class="kn">from</span> <span class="nn">sandman.model</span> <span class="kn">import</span> <span class="n">activate</span>

<span class="n">activate</span><span class="p">()</span>

<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>

<p><strong>You don't even need to tell <code>sandman</code> what tables your database contains.</strong> 
Just point <code>sandman</code> at your database and let it do all the heavy lifting</p>

<p>Let's start our new service and make a request. While we're at it, lets make use
of <code>sandman</code>'s awesome filtering capability by specifying a filter term:</p>

<pre lang="zsh"><code>&gt; python runserver.py &amp;
* Running on http://127.0.0.1:5000/

&gt; curl GET "http://localhost:5000/artists?Name=AC/DC"
</code></pre>

<div class="highlight highlight-json"><pre><span class="err">...</span>
<span class="p">{</span>
    <span class="nt">"resources"</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">"ArtistId"</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">"Name"</span><span class="p">:</span> <span class="s2">"AC/DC"</span><span class="p">,</span>
            <span class="nt">"links"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="nt">"rel"</span><span class="p">:</span> <span class="s2">"self"</span><span class="p">,</span>
                    <span class="nt">"uri"</span><span class="p">:</span> <span class="s2">"/artists/1"</span>
                <span class="p">}</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>

<p>All of that, including filtering/searching, is automagically available from
those <em>five</em> measly lines of code.</p>

<p>Oh, that's not enough? You also want a Django-style admin interface built
automatically? Fine. You may have noticed that when you ran <code>runserver.py</code> that
a browser window popped up. Now's the time to go check that out. You'll find
it's that Django-style admin interface you've been bugging me about, looking
something like this:</p>

<p><a href="https://camo.githubusercontent.com/85c8699bdf9c2aa57c88611fbe17ab2bce9aff1b/687474703a2f2f73616e646d616e2e696f2f7374617469632f696d672f61646d696e5f736d616c6c2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/85c8699bdf9c2aa57c88611fbe17ab2bce9aff1b/687474703a2f2f73616e646d616e2e696f2f7374617469632f696d672f61646d696e5f736d616c6c2e6a7067" alt="admin interface awesomesauce screenshot" data-canonical-src="http://sandman.io/static/img/admin_small.jpg" style="max-width:100%;"></a></p>

<hr><p>(If you want to disable the browser from opening automatically each time <code>sandman</code>
starts, call <code>activate</code> with <code>browser=False</code>)</p>

<p>If you wanted to specify specific tables that <code>sandman</code> should make available,
how do you do that? With this little ditty:</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">sandman.model</span> <span class="kn">import</span> <span class="n">register</span><span class="p">,</span> <span class="n">Model</span>

<span class="k">class</span> <span class="nc">Artist</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">'Artist'</span>

<span class="k">class</span> <span class="nc">Album</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">'Album'</span>

<span class="k">class</span> <span class="nc">Playlist</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">'Playlist'</span>

<span class="n">register</span><span class="p">((</span><span class="n">Artist</span><span class="p">,</span> <span class="n">Album</span><span class="p">,</span> <span class="n">Playlist</span><span class="p">))</span>
</pre></div>

<p>And if you wanted to add custom logic for an endpoint? Or change the endpoint
name? Or change your top level json object name? Or add validation? All supported.
Here's a "fancy" class definition:</p>

<div class="highlight highlight-python"><pre><span class="k">class</span> <span class="nc">Style</span><span class="p">(</span><span class="n">Model</span><span class="p">):</span>
    <span class="sd">"""Model mapped to the "Genre" table</span>

<span class="sd">    Has a custom endpoint ("styles" rather than the default, "genres").</span>
<span class="sd">    Only supports HTTP methods specified.</span>
<span class="sd">    Has a custom validator for the GET method.</span>

<span class="sd">    """</span>

    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s">'Genre'</span>
    <span class="n">__endpoint__</span> <span class="o">=</span> <span class="s">'styles'</span>
    <span class="n">__methods__</span> <span class="o">=</span> <span class="p">(</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'DELETE'</span><span class="p">)</span>
    <span class="n">__top_level_json_name__</span> <span class="o">=</span> <span class="s">'Genres'</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">validate_GET</span><span class="p">(</span><span class="n">resource</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="sd">"""Return False if the request should not be processed.</span>

<span class="sd">        :param resource: resource related to current request</span>
<span class="sd">        :type resource: :class:`sandman.model.Model` or None</span>

<span class="sd">        """</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">resource</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">elif</span> <span class="n">resource</span> <span class="ow">and</span> <span class="n">resource</span><span class="o">.</span><span class="n">GenreId</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>
        <span class="k">return</span> <span class="bp">True</span>
</pre></div>

<p>With <code>sandman</code>, zero boilerplate code is required. In fact, using <code>sandmanctl</code>,
<strong>no code is required at all</strong>. Your existing database
structure and schema is introspected and your database tables magically get a
RESTful API and admin interface. For each table, <code>sandman</code> creates:</p>

<ul class="task-list">
<li>proper endpoints </li>
<li>support for a configurable set of HTTP verbs 

<ul class="task-list">
<li>GET</li>
<li>POST</li>
<li>PATCH</li>
<li>PUT</li>
<li>DELETE</li>
</ul>
</li>
<li>responses with appropriate <code>rel</code> links automatically

<ul class="task-list">
<li>foreign keys in your tables are represented by link</li>
</ul>
</li>
<li>custom validation by simply defining <code>validate_&lt;METHOD&gt;</code> methods on your Model</li>
<li>explicitly list supported methods for a Model by setting the <code>__methods__</code> attribute</li>
<li>customize a Models endpoint by setting the <code>__endpoint__</code> method</li>
<li>essentially a HATEOAS-based service sitting in front of your database</li>
</ul><p><code>sandman</code> is under active development but should be usable in any environment due
to one simple fact:</p>

<p><strong><code>sandman</code> never alters your database unless you add or change a record yourself.  It adds no extra tables to your existing database and requires no changes to any of your existing tables. If you start <code>sandman</code>, use it to browse your database via cURL, then stop <code>sandman</code>, your database will be in exactly the same state as it was before you began.</strong> </p>

<h3>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h3>

<p><code>pip install sandman</code></p>

<h3>
<a name="user-content-example-application" class="anchor" href="#example-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Application</h3>

<p>Take a look in the <code>sandman/test</code> directory. The application found there makes
use of the <a href="http://chinookdatabase.codeplex.com">Chinook</a> sample SQL database.</p>

<h2>
<a name="user-content-contact-me" class="anchor" href="#contact-me" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact Me</h2>

<p>Questions or comments about <code>sandman</code>? Hit me up at <a href="mailto:jeff@jeffknupp.com">jeff@jeffknupp.com</a>.</p>

<p><a href="https://bitdeli.com/free" title="Bitdeli Badge"><img src="https://camo.githubusercontent.com/1da4e9a4dc54360db691f275bf433425375ccc74/68747470733a2f2f64327765637a68766c38323376302e636c6f756466726f6e742e6e65742f6a6566666b6e7570702f73616e646d616e2f7472656e642e706e67" alt="Bitdeli Badge" data-canonical-src="https://d2weczhvl823v0.cloudfront.net/jeffknupp/sandman/trend.png" style="max-width:100%;"></a></p>

<h1>
<a name="user-content-changelog" class="anchor" href="#changelog" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changelog</h1>

<h2>
<a name="user-content-version-098" class="anchor" href="#version-098" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.8</h2>

<ul class="task-list">
<li>Support for the <code>wheel</code> distribution format</li>
</ul><h2>
<a name="user-content-version-097" class="anchor" href="#version-097" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.7</h2>

<ul class="task-list">
<li>Slightly better test coverage and documentation</li>
</ul><h2>
<a name="user-content-version-096" class="anchor" href="#version-096" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.6</h2>

<ul class="task-list">
<li>Support for using existing declarative models alongside <code>sandman</code> generated models

<ul class="task-list">
<li>If you have an existing app and want to include sandman in it, simply pass
your existing models in to the <code>register()</code> function along with any
<code>sanmdman</code> generated classes. <code>sandman</code> will detect the existing models
and augment them.</li>
</ul>
</li>
</ul><h2>
<a name="user-content-version-095" class="anchor" href="#version-095" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.5</h2>

<ul class="task-list">
<li>Fixes a critical bug where code used by the new <code>etag</code> decorators was
accidentally not included. Thanks to @mietek for the PR.</li>
<li>Fixes an issue when showing the HTML representation of an empty collection.</li>
<li>Thanks to @mietek for reporting the issue.</li>
</ul><h2>
<a name="user-content-version-094" class="anchor" href="#version-094" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.4</h2>

<ul class="task-list">
<li>Fixes a critical bug in the requirements portion of <code>setup.py</code>, adding <code>Flask-HTTPAuth</code>
</li>
</ul><h2>
<a name="user-content-version-093" class="anchor" href="#version-093" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.3</h2>

<ul class="task-list">
<li>Authentication supported!

<ul class="task-list">
<li>Entire API and admin can be protected by HTTP Basic Auth. See the docs for
more details.</li>
</ul>
</li>
<li>ETAGs

<ul class="task-list">
<li>Resources return the proper ETAG header and should reply with a 304 after
the first request. This greatly improves the throughput and performance of
the API.</li>
</ul>
</li>
</ul><h2>
<a name="user-content-version-092" class="anchor" href="#version-092" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.2</h2>

<ul class="task-list">
<li>The <code>meta</code> endpoint

<ul class="task-list">
<li>All resources now have a <code>/&lt;resource&gt;/meta</code> endpoint that describes the
types of each of their fields (both in HTML and JSON) </li>
</ul>
</li>
<li>The root endpoint

<ul class="task-list">
<li>A "root" endpoint (<code>/</code>) has been created. It lists all resources
registered in the application and includes URLs to their various
endpoints. This allows a "dumb" client to navigate the API without knowing
URLs beforehand.</li>
</ul>
</li>
</ul><h2>
<a name="user-content-version-091" class="anchor" href="#version-091" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.9.1</h2>

<ul class="task-list">
<li>Python 3 support!

<ul class="task-list">
<li>
<code>sandman</code> tests now pass for both 2.7 and 3.4! Python 3.4 is officially supported.</li>
</ul>
</li>
</ul><h2>
<a name="user-content-version-081" class="anchor" href="#version-081" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.8.1</h2>

<h3>
<a name="user-content-new-feature" class="anchor" href="#new-feature" aria-hidden="true"><span class="octicon octicon-link"></span></a>New Feature</h3>

<ul class="task-list">
<li>
<code>Link</code> header now set to a resource's links

<ul class="task-list">
<li>Links to related objects now user a proper <code>rel</code> value: <code>related</code>
</li>
<li>The link to the current resource still uses the <code>self</code> <code>rel</code> value</li>
<li>Links are specified both in the header (as per RFC5988) and in the
resource itself</li>
</ul>
</li>
<li>Pagination added for JSON (and number of results per page being returned is fixed)</li>
<li>Nested JSON models no longer the default; hitting a URL with the argument "expand"
will show one level of nested resources

<ul class="task-list">
<li>This conforms more closely to REST principles while not sacrificing the
functionality. </li>
</ul>
</li>
</ul><h2>
<a name="user-content-version-078" class="anchor" href="#version-078" aria-hidden="true"><span class="octicon octicon-link"></span></a>Version 0.7.8</h2>

<h3>
<a name="user-content-bug-fixes" class="anchor" href="#bug-fixes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bug Fixes</h3>

<ul class="task-list">
<li>Fix multiple references to same table error (fixes #59)</li>
</ul></article></div>
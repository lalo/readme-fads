<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-zipline" class="anchor" href="#zipline" aria-hidden="true"><span class="octicon octicon-link"></span></a>Zipline</h1>

<p><a href="https://pypi.python.org/pypi/zipline"><img src="https://camo.githubusercontent.com/70138a545738654aeae04d8c5a029c9c9199901b/68747470733a2f2f70797069702e696e2f762f7a69706c696e652f62616467652e706e67" alt="version status" data-canonical-src="https://pypip.in/v/zipline/badge.png" style="max-width:100%;"></a>
<a href="https://pypi.python.org/pypi/zipline"><img src="https://camo.githubusercontent.com/88afcf6f62069f2837da60dd39e758a5c013f5f2/68747470733a2f2f70797069702e696e2f642f7a69706c696e652f62616467652e706e67" alt="downloads" data-canonical-src="https://pypip.in/d/zipline/badge.png" style="max-width:100%;"></a>
<a href="https://travis-ci.org/quantopian/zipline"><img src="https://camo.githubusercontent.com/29e70eddded2efd56e32b7fc5c150b90820099a1/68747470733a2f2f7472617669732d63692e6f72672f7175616e746f7069616e2f7a69706c696e652e706e673f6272616e63683d6d6173746572" alt="build status" data-canonical-src="https://travis-ci.org/quantopian/zipline.png?branch=master" style="max-width:100%;"></a>
<a href="https://coveralls.io/r/quantopian/zipline"><img src="https://camo.githubusercontent.com/1a7165b07669cce4c6c69f92ca68d7e3e374bffc/68747470733a2f2f636f766572616c6c732e696f2f7265706f732f7175616e746f7069616e2f7a69706c696e652f62616467652e706e67" alt="Coverage Status" data-canonical-src="https://coveralls.io/repos/quantopian/zipline/badge.png" style="max-width:100%;"></a></p>

<p>Zipline is a Pythonic algorithmic trading library.  The system is
fundamentally event-driven and a close approximation of how
live-trading systems operate.  Currently, backtesting is well
supported, but the intent is to develop the library for both paper and
live trading, so that the same logic used for backtesting can be
applied to the market.</p>

<p>Zipline is currently used in production as the backtesting engine
powering Quantopian (<a href="https://www.quantopian.com">https://www.quantopian.com</a>) -- a free,
community-centered platform that allows development and real-time
backtesting of trading algorithms in the web browser.</p>

<p>Want to contribute? See our <a href="https://github.com/quantopian/zipline/wiki/Contribution-Requests">open requests</a>
and our <a href="https://github.com/quantopian/zipline#contributions">general guidelines</a> below.</p>

<h1>
<a name="user-content-discussion-and-help" class="anchor" href="#discussion-and-help" aria-hidden="true"><span class="octicon octicon-link"></span></a>Discussion and Help</h1>

<p>Discussion of the project is held at the Google Group,
<a href="mailto:zipline@googlegroups.com">zipline@googlegroups.com</a>,
<a href="https://groups.google.com/forum/#!forum/zipline">https://groups.google.com/forum/#!forum/zipline</a>.</p>

<h1>
<a name="user-content-features" class="anchor" href="#features" aria-hidden="true"><span class="octicon octicon-link"></span></a>Features</h1>

<ul class="task-list">
<li><p>Ease of use: Zipline tries to get out of your way so that you can
focus on algorithm development. See below for a code example.</p></li>
<li><p>Zipline comes "batteries included" as many common statistics like
moving average and linear regression can be readily accessed from
within a user-written algorithm.</p></li>
<li><p>Input of historical data and output of performance statistics is
based on Pandas DataFrames to integrate nicely into the existing
Python eco-system.</p></li>
<li><p>Statistic and machine learning libraries like matplotlib, scipy,
statsmodels, and sklearn support development, analysis and
visualization of state-of-the-art trading systems.</p></li>
</ul><h1>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h1>

<p>The easiest way to install Zipline is via <code>conda</code> which comes as part of <a href="http://continuum.io/downloads">Anaconda</a> or can be installed via <code>pip install conda</code>.</p>

<p>Once set up, you can install Zipline from our Quantopian channel:</p>

<pre><code>conda install -c Quantopian zipline
</code></pre>

<p>Currently supported platforms include:</p>

<ul class="task-list">
<li>Windows 32-bit (can be 64-bit Windows but has to be 32-bit Anaconda)</li>
<li>OSX 64-bit</li>
<li>Linux 64-bit</li>
</ul><h2>
<a name="user-content-pip" class="anchor" href="#pip" aria-hidden="true"><span class="octicon octicon-link"></span></a>PIP</h2>

<p>Alternatively you can install Zipline via the more traditional <code>pip</code>
command. Since zipline is pure-python code it should be very easy to
install and set up:</p>

<pre><code>pip install numpy   # Pre-install numpy to handle dependency chain quirk
pip install zipline
</code></pre>

<p>If there are problems installing the dependencies or zipline we
recommend installing these packages via some other means. For Windows,
the <a href="http://www.enthought.com/products/epd.php">Enthought Python Distribution</a>
includes most of the necessary dependencies. On OSX, the
<a href="http://fonnesbeck.github.com/ScipySuperpack/">Scipy Superpack</a>
works very well.</p>

<h2>
<a name="user-content-dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<ul class="task-list">
<li>Python (2.7 or 3.3)</li>
<li>numpy (&gt;= 1.6.0)</li>
<li>pandas (&gt;= 0.9.0)</li>
<li>pytz</li>
<li>Logbook</li>
<li>requests</li>
<li>
<a href="https://pypi.python.org/pypi/python-dateutil">python-dateutil</a> (&gt;= 2.1)</li>
<li>ta-lib</li>
</ul><h1>
<a name="user-content-quickstart" class="anchor" href="#quickstart" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quickstart</h1>

<p>See our <a href="http://nbviewer.ipython.org/github/quantopian/zipline/blob/master/docs/tutorial.ipynb">tutorial</a> to get started.</p>

<p>The following code implements a simple dual moving average algorithm.</p>

<div class="highlight highlight-python"><pre><span class="kn">from</span> <span class="nn">zipline.api</span> <span class="kn">import</span> <span class="n">order_target</span><span class="p">,</span> <span class="n">record</span><span class="p">,</span> <span class="n">symbol</span><span class="p">,</span> <span class="n">history</span><span class="p">,</span> <span class="n">add_history</span>


<span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c"># Register 2 histories that track daily prices,</span>
    <span class="c"># one with a 100 window and one with a 300 day window</span>
    <span class="n">add_history</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">'1d'</span><span class="p">,</span> <span class="s">'price'</span><span class="p">)</span>
    <span class="n">add_history</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">'1d'</span><span class="p">,</span> <span class="s">'price'</span><span class="p">)</span>

    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>


<span class="k">def</span> <span class="nf">handle_data</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
    <span class="c"># Skip first 300 days to get full windows</span>
    <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">if</span> <span class="n">context</span><span class="o">.</span><span class="n">i</span> <span class="o">&lt;</span> <span class="mi">300</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c"># Compute averages</span>
    <span class="c"># history() has to be called with the same params</span>
    <span class="c"># from above and returns a pandas dataframe.</span>
    <span class="n">short_mavg</span> <span class="o">=</span> <span class="n">history</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="s">'1d'</span><span class="p">,</span> <span class="s">'price'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">long_mavg</span> <span class="o">=</span> <span class="n">history</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="s">'1d'</span><span class="p">,</span> <span class="s">'price'</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

    <span class="n">sym</span> <span class="o">=</span> <span class="n">symbol</span><span class="p">(</span><span class="s">'AAPL'</span><span class="p">)</span>

    <span class="c"># Trading logic</span>
    <span class="k">if</span> <span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span> <span class="o">&gt;</span> <span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]:</span>
        <span class="c"># order_target orders as many shares as needed to</span>
        <span class="c"># achieve the desired number of shares.</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span> <span class="o">&lt;</span> <span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">]:</span>
        <span class="n">order_target</span><span class="p">(</span><span class="n">sym</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

    <span class="c"># Save values for later inspection</span>
    <span class="n">record</span><span class="p">(</span><span class="n">AAPL</span><span class="o">=</span><span class="n">data</span><span class="p">[</span><span class="n">sym</span><span class="p">]</span><span class="o">.</span><span class="n">price</span><span class="p">,</span>
           <span class="n">short_mavg</span><span class="o">=</span><span class="n">short_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">],</span>
           <span class="n">long_mavg</span><span class="o">=</span><span class="n">long_mavg</span><span class="p">[</span><span class="n">sym</span><span class="p">])</span>
</pre></div>

<p>You can then run this algorithm using the Zipline CLI. From the
command line, run:</p>

<div class="highlight highlight-bash"><pre>python run_algo.py -f dual_moving_avg.py --symbols AAPL --start 2011-1-1 --end 2012-1-1 -o dma.pickle
</pre></div>

<p>This will download the AAPL price data from Yahoo! Finance in the
specified time range and stream it through the algorithm and save the
resulting performance dataframe to dma.pickle which you can then load
and analyze from within python.</p>

<p>You can find other examples in the zipline/examples directory.</p>

<h1>
<a name="user-content-contributions" class="anchor" href="#contributions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributions</h1>

<p>If you would like to contribute, please see our Contribution Requests: <a href="https://github.com/quantopian/zipline/wiki/Contribution-Requests">https://github.com/quantopian/zipline/wiki/Contribution-Requests</a></p>

<h2>
<a name="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<p>Thank you for all the help so far!</p>

<ul class="task-list">
<li>@rday for sortino ratio, information ratio, and exponential moving average transform</li>
<li>@snth</li>
<li>@yinhm for integrating zipline with @yinhm/datafeed</li>
<li>
<a href="http://www.lowindata.com">Jeremiah Lowin</a> for teaching us the nuances of Sharpe and Sortino Ratios,
and for implementing new order methods.</li>
<li>Brian Cappello</li>
<li>@verdverm (Tony Worm), Order types (stop, limit)</li>
<li>@benmccann for benchmarking contributions</li>
<li>@jkp and @bencpeters for bugfixes to benchmark.</li>
<li>@dstephens for adding Canadian treasury curves.</li>
<li>@mtrovo for adding BMF&amp;Bovespa calendars.</li>
<li>@sdrdis for bugfixes.</li>
<li>@humdings for refactoring the order methods.</li>
<li>Quantopian Team</li>
</ul><p>(alert us if we've inadvertantly missed listing you here!)</p>

<h2>
<a name="user-content-development-environment" class="anchor" href="#development-environment" aria-hidden="true"><span class="octicon octicon-link"></span></a>Development Environment</h2>

<p>The following guide assumes your system has <a href="https://bitbucket.org/dhellmann/virtualenvwrapper">virtualenvwrapper</a>
and <a href="http://www.pip-installer.org/en/latest/">pip</a> already installed.</p>

<p>You'll need to install some C library dependencies:</p>

<pre><code>sudo apt-get install libopenblas-dev liblapack-dev gfortran

wget http://prdownloads.sourceforge.net/ta-lib/ta-lib-0.4.0-src.tar.gz
tar -xvzf ta-lib-0.4.0-src.tar.gz
cd ta-lib/
./configure --prefix=/usr
make
sudo make install
</code></pre>

<p>Suggested installation of Python library dependencies used for development:</p>

<pre><code>mkvirtualenv zipline
./etc/ordered_pip.sh ./etc/requirements.txt
pip install -r ./etc/requirements_dev.txt
</code></pre>

<p>Finally, install zipline in develop mode (from the zipline source root dir):</p>

<pre><code>python setup.py develop
</code></pre>

<h2>
<a name="user-content-style-guide" class="anchor" href="#style-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Style Guide</h2>

<p>To ensure that changes and patches are focused on behavior changes,
the zipline codebase adheres to both PEP-8,
<a href="http://www.python.org/dev/peps/pep-0008/">http://www.python.org/dev/peps/pep-0008/</a>, and pyflakes,
<a href="https://launchpad.net/pyflakes/">https://launchpad.net/pyflakes/</a>.</p>

<p>The maintainers check the code using the flake8 script,
<a href="https://bitbucket.org/tarek/flake8/wiki/Home">https://bitbucket.org/tarek/flake8/wiki/Home</a>, which is included in the
requirements_dev.txt.</p>

<p>Before submitting patches or pull requests, please ensure that your
changes pass <code>flake8 zipline tests</code> and <code>nosetests</code></p>

<h1>
<a name="user-content-source" class="anchor" href="#source" aria-hidden="true"><span class="octicon octicon-link"></span></a>Source</h1>

<p>The source for Zipline is hosted at
<a href="https://github.com/quantopian/zipline">https://github.com/quantopian/zipline</a>.</p>

<h2>
<a name="user-content-documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p>You can compile the documentation using Sphinx:</p>

<pre><code>sudo apt-get install python-sphinx
make html
</code></pre>

<h1>
<a name="user-content-contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h1>

<p>For other questions, please contact <a href="mailto:opensource@quantopian.com">opensource@quantopian.com</a>.</p></article></div>
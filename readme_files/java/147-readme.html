<div class="announce instapaper_body mdown" data-path="README.mdown" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h2>
<a name="user-content-description" class="anchor" href="#description" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description</h2>

<p>A Java library for summarizing data in streams for which it is
infeasible to store all events. More specifically, there are classes
for estimating: cardinality (i.e. counting things); set membership;
top-k elements and frequency.  One particularly useful feature is that
cardinality estimators with compatible configurations may be safely
merged.</p>

<p>These classes may be used directly in a JVM project or with the
provided shell scripts and good old Unix IO redirection.</p>

<p>The ideas here are not original to us. We have endeavored to create
useful implementations from iterating over the existing academic
literature.  As such this library relies heavily on the work of
others.  Please read the <a href="#Sources">Sources</a> and
<a href="#References">Reference</a> sections.</p>

<h2>
<a name="user-content-examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<pre><code>$ echo -e "foo\nfoo\nbar" | ./bin/topk 
item count error
---- ----- -----
 foo     2     0
 bar     1     0

Item count: 3


$ echo -e "foo\nfoo\nbar" | ./bin/cardinality 
Item Count Cardinality Estimate
---------- --------------------
         3                    2
</code></pre>

<h2>
<a name="user-content-maven-artifact" class="anchor" href="#maven-artifact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Maven Artifact</h2>

<div class="highlight highlight-xml"><pre><span class="nt">&lt;dependency&gt;</span>
  <span class="nt">&lt;groupId&gt;</span>com.clearspring.analytics<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>stream<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>2.7.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>

<h2>
<a name="user-content-building" class="anchor" href="#building" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building</h2>

<p>Assuming you have <a href="http://maven.apache.org/">Apache Maven</a> installed
and configured:</p>

<pre><code>mvn package
</code></pre>

<p>And you should be all set.</p>

<h2>
<a name="user-content-where-people-hang-out" class="anchor" href="#where-people-hang-out" aria-hidden="true"><span class="octicon octicon-link"></span></a>Where People Hang Out</h2>

<p>Mailing list: <a href="http://groups.google.com/group/stream-lib-user">http://groups.google.com/group/stream-lib-user</a></p>

<h2>
<a name="user-content-sources" class="anchor" href="#sources" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sources</h2>

<p>The set membership code is the Bloom Filter implementation from Apache
Cassandra circa December 2009.  The changes here are minimal and were
for the purpose of testing and independent use. Apache Software
Foundation headers have been retained on these files.  By extension we
also include <a href="http://murmurhash.googlepages.com/">murmurhash</a>.</p>

<p>We were inspired to use this code by Jonathan Ellis' post
<a href="http://spyced.blogspot.com/2009/01/all-you-ever-wanted-to-know-about.html">All you ever wanted to know about writing bloom filters</a>.</p>

<h2>
<a name="user-content-references" class="anchor" href="#references" aria-hidden="true"><span class="octicon octicon-link"></span></a>References</h2>

<p>There are javadoc references to specific papers.  These were the ones
we found most relevant during out research.</p>

<h4>
<a name="user-content-cardinality" class="anchor" href="#cardinality" aria-hidden="true"><span class="octicon octicon-link"></span></a>Cardinality</h4>

<ul>
<li><p>Min Cai, Jianping Pan, Yu K. Kwok, and Kai Hwang. Fast and accurate
traffic matrix measurement using adaptive cardinality counting. In
MineNet ’05: Proceedings of the 2005 ACM SIGCOMM workshop on
Mining network data, pages 205–206, New York, NY, USA, 2005. ACM.</p></li>
<li><p>Ahmed Metwally, Divyakant Agrawal, and Amr E. Abbadi. Why go
logarithmic if we can go linear?: Towards effective distinct counting of
search traffic. In EDBT ’08: Proceedings of the 11th international
conference on Extending database technology, pages 618–629, New York,
NY, USA, 2008. ACM.</p></li>
<li><p>Nikos Ntarmos, Peter Triantafillou, and Gerhard Weikum. Counting at
large: Efficient cardinality estimation in Internet-Scale data networks.
In ICDE ’06: Proceedings of the 22nd International Conference on Data
Engineering, pages 40+, Washington, DC, USA, 2006. IEEE Computer
Society.</p></li>
<li><p>Marianne Durand and Philippe Flajolet. LogLog counting of large
cardinalities. In ESA03, volume 2832 of LNCS, pages 605–617, 2003.</p></li>
<li><p>Kyu Y. Whang, Brad T. Vander Zanden, and Howard M. Taylor. A
linear-time probabilistic counting algorithm for database applications.
ACM Trans. Database Syst., 15(2):208–229, 1990.</p></li>
<li><p>Moses Charikar, Kevin Chen, and Martin F. Colton. Finding frequent
items in data streams. In ICALP ’02: Proceedings of the 29th
International Colloquium on Automata, Languages and Programming,
pages 693–703, London, UK, 2002. Springer-Verlag.</p></li>
<li><p>Stefan Heule, Marc Nunkesser, Alex Hall.  HyperLogLog in Practice: 
Algorithmic Engineering of a State of The Art Cardinality Estimation 
Algorithm.  Proceedings of the EDBT 2013 Conference, ACM, Genoa, Italy </p></li>
</ul><h4>
<a name="user-content-top-k" class="anchor" href="#top-k" aria-hidden="true"><span class="octicon octicon-link"></span></a>Top-K</h4>

<ul>
<li>
<p>Graham Cormode and S. Muthukrishnan. An improved data stream
summary: The Count-Min sketch and its applications. pages 29–38.</p>

<ol>
<li>10.1016/j.jalgor.2003.12.001
<a href="http://dl.acm.org/citation.cfm?id=1073718">http://dl.acm.org/citation.cfm?id=1073718</a>
</li>
</ol>
</li>
<li><p>Cheqing Jin, Weining Qian, Chaofeng Sha, Jeffrey X. Yu, and Aoying
Zhou. Dynamically maintaining frequent items over a data stream. In
CIKM ’03: Proceedings of the twelfth international conference on
Information and knowledge management, pages 287–294, New York,
NY, USA, 2003. ACM. 10.1145/956863.956918
<a href="http://dl.acm.org/citation.cfm?id=956918">http://dl.acm.org/citation.cfm?id=956918</a></p></li>
<li><p>Ahmed Metwally, Divyakant Agrawal, and Amr Abbadi. Efficient
computation of frequent and top-k elements in data streams. pages
398–412. 2005. 10.1007/978-3-540-30570-5_27
<a href="http://link.springer.com/chapter/10.1007/978-3-540-30570-5_27">http://link.springer.com/chapter/10.1007/978-3-540-30570-5_27</a></p></li>
</ul><h4>
<a name="user-content-frequency" class="anchor" href="#frequency" aria-hidden="true"><span class="octicon octicon-link"></span></a>Frequency</h4>

<ul>
<li>Graham Cormode and S. Muthukrishnan. An improved data stream
summary: The Count-Min sketch and its applications. 2004. 10.1016/j.jalgor.2003.12.001
<a href="http://dl.acm.org/citation.cfm?id=1073718">http://dl.acm.org/citation.cfm?id=1073718</a>
</li>
</ul></article></div>
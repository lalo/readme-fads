<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h2>
<a name="user-content-android-common-lib" class="anchor" href="#android-common-lib" aria-hidden="true"><span class="octicon octicon-link"></span></a>
<a href="https://camo.githubusercontent.com/efc728ed0eb77cc7ae76d695a5b5e0b6142c331e/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373432362f393435363834373839335f303533313631633761345f6f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/efc728ed0eb77cc7ae76d695a5b5e0b6142c331e/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373432362f393435363834373839335f303533313631633761345f6f2e706e67" alt="Trinea" data-canonical-src="http://farm8.staticflickr.com/7426/9456847893_053161c7a4_o.png" style="max-width:100%;"></a>android-common-lib</h2>

<p><strong>主要包括</strong>：<strong>缓存</strong>(图片缓存、预取缓存、网络缓存)、<strong>公共View</strong>(下拉及底部加载更多ListView、底部加载更多ScrollView、滑动一页Gallery)及<strong>Android常用工具类</strong>(网络、下载、Android资源操作、shell、文件、Json、随机数、Collection等等)。<br>
示例源码：<a href="https://github.com/Trinea/AndroidDemo">TrineaAndroidDemo</a>。<br>
使        用：拉取代码导入IDE，右击你的工程-&gt;properties-&gt;Android，在library中选择TrineaAndroidCommon。<br>
Api Guide：<a href="http://trinea.github.io/doc/trinea_android_common/index.html">TrineaAndroidCommon API Guide</a>。  </p>

<p>微博：<a title="Android技术及移动互联网分享" href="http://weibo.com/trinea" target="_blank">Trinea</a>    主页：<a title="关注与AndroidJava性能优化开源项目" href="http://www.trinea.cn/" target="_blank">trinea.cn</a>    邮箱：<a title="欢迎邮件与我交流" href="mailto:trinea.cn@gmail.com" target="_blank">trinea.cn#gmail.com</a>    QQ：<a title="欢迎Q我" href="http://wpa.qq.com/msgrd?v=3&amp;uin=717763774&amp;site=qq&amp;menu=yes" target="_blank">717763774</a>  </p>

<h4>
<a name="user-content-%E7%A4%BA%E4%BE%8Bapk" class="anchor" href="#%E7%A4%BA%E4%BE%8Bapk" aria-hidden="true"><span class="octicon octicon-link"></span></a>示例APK:</h4>

<p><a href="https://play.google.com/store/apps/details?id=cn.trinea.android.demo" target="_blank" title="从Google Play下载"><img src="https://camo.githubusercontent.com/6f9a1aab06cbd660f0bda471812d71af5a5d492f/687474703a2f2f7777772e616e64726f69642e636f6d2f696d616765732f6272616e642f6765745f69745f6f6e5f706c61795f6c6f676f5f736d616c6c2e706e67" title="从Google Play下载" data-canonical-src="http://www.android.com/images/brand/get_it_on_play_logo_small.png" style="max-width:100%;"></a>
    <a href="http://as.baidu.com/a/item?docid=5499464" target="_blank" title="从Baidu手机助手下载"><img src="https://camo.githubusercontent.com/e54e655d18516ba3f61ad5be97c45d4dfba9816f/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323832362f31313932383632333430365f623965386433396264375f6f2e706e67" title="从Baidu手机助手下载" data-canonical-src="http://farm3.staticflickr.com/2826/11928623406_b9e8d39bd7_o.png" style="max-width:100%;"></a>
    <a href="http://zhushou.360.cn/detail/index/soft_id/994107" target="_blank" title="从360手机助手下载"><img src="https://camo.githubusercontent.com/3f4b19b08671efbf7ae3401dab75b7381811bfe3/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333737352f31313938333335353735365f663835343866346331375f6f2e706e67" title="从360手机助手下载" data-canonical-src="http://farm4.staticflickr.com/3775/11983355756_f8548f4c17_o.png" style="max-width:100%;"></a>
    <a href="http://app.xiaomi.com/detail/54761" target="_blank" title="从小米应用商店下载"><img src="https://camo.githubusercontent.com/cc137f9dd548cb32e1de4a140062dacaafc6617e/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373338302f31313938323530333034355f623035333864663566355f6f2e706e67" title="从小米应用商店下载" data-canonical-src="http://farm8.staticflickr.com/7380/11982503045_b0538df5f5_o.png" style="max-width:100%;"></a>
    <a href="http://trinea.github.com/apk/trinea-android-demo.apk" target="_blank" title="二维码扫描下载"><img src="https://camo.githubusercontent.com/1db72f9d4e5d7be2e12fc709da813c05252e657a/68747470733a2f2f6661726d332e737461746963666c69636b722e636f6d2f323933302f31343031373934383937325f626166623664663162355f6f2e706e67" title="二维码扫描下载" data-canonical-src="https://farm3.staticflickr.com/2930/14017948972_bafb6df1b5_o.png" style="max-width:100%;"></a>
    <a href="http://trinea.github.com/apk/trinea-android-demo.apk" target="_blank" title="点击下载到本地">本地下载</a>  </p>

<h4>
<a name="user-content-%E4%B8%80-%E7%BC%93%E5%AD%98%E7%B1%BB" class="anchor" href="#%E4%B8%80-%E7%BC%93%E5%AD%98%E7%B1%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>一. 缓存类</h4>

<p>主要特性：(1).使用简单 (2).轻松获取及预取取新图片 (3).包含二级缓存 (4).可选择多种缓存算法(FIFO、LIFO、LRU、MRU、LFU、MFU等13种)或自定义缓存算法 (5).可方便的保存及初始化恢复数据 (6).省流量性能佳(有且仅有一个线程获取图片) (7).支持http请求header设置及不同类型网络处理(8).可根据系统配置初始化缓存 (9).扩展性强 (10).支持等待队列 (11)包含map的大多数接口。</p>

<h5>
<a name="user-content-1-%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98" class="anchor" href="#1-%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. 图片缓存</h5>

<p>使用见：<a href="http://www.trinea.cn/android/android-imagecache/">图片缓存的使用</a><br>
适用：获取图片较多且图片使用频繁的应用，包含二级缓存，如新浪微博、twitter、微信头像、美丽说、蘑菇街、花瓣、淘宝等等。效果图如下：<br><a href="https://camo.githubusercontent.com/0728af6697b90e316369c5a98cc38870b65af913/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333731302f393331323136333132355f383166316331393937625f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/0728af6697b90e316369c5a98cc38870b65af913/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333731302f393331323136333132355f383166316331393937625f6f2e6a7067" alt="ImageCahe" data-canonical-src="http://farm4.staticflickr.com/3710/9312163125_81f1c1997b_o.jpg" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-2-%E5%9B%BE%E7%89%87sd%E5%8D%A1%E7%BC%93%E5%AD%98" class="anchor" href="#2-%E5%9B%BE%E7%89%87sd%E5%8D%A1%E7%BC%93%E5%AD%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. 图片SD卡缓存</h5>

<p>使用见：<a href="http://www.trinea.cn/android/android-imagesdcardcache/">图片SD卡缓存的使用</a><br>
适用：应用中获取图片较多且图片较大的情况。需要二级缓存及ListView或GridView图片加载推荐使用上面的<a href="http://www.trinea.cn/android/android-imagecache/">ImageCache</a>。效果图如下：<br><a href="https://camo.githubusercontent.com/1e5170d489f6517c01aad9e4a2ef5c3c076e0163/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323833342f393331343934393739385f656136396264623565385f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/1e5170d489f6517c01aad9e4a2ef5c3c076e0163/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323833342f393331343934393739385f656136396264623565385f6f2e6a7067" alt="ImageSDCardCache" data-canonical-src="http://farm3.staticflickr.com/2834/9314949798_ea69bdb5e8_o.jpg" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-3--%E7%BD%91%E7%BB%9C%E7%BC%93%E5%AD%98" class="anchor" href="#3--%E7%BD%91%E7%BB%9C%E7%BC%93%E5%AD%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>3.  网络缓存</h5>

<p>使用见：<a href="http://www.trinea.cn/android/android-http-cache">Android网络缓存</a><br>
适用：网络获取内容不大的应用，尤其是api接口数据，如新浪微博、twitter的timeline、微信公众账号发送的内容等等。效果图如下：<br><a href="https://camo.githubusercontent.com/83f6c0ea26d040f03911ad8a54f89b15dc6d516c/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323834332f31323536363435373533345f326366613432393761315f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/83f6c0ea26d040f03911ad8a54f89b15dc6d516c/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323834332f31323536363435373533345f326366613432393761315f6f2e6a7067" alt="HttpCache" data-canonical-src="http://farm3.staticflickr.com/2843/12566457534_2cfa4297a1_o.jpg" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-4-%E9%A2%84%E5%8F%96%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98" class="anchor" href="#4-%E9%A2%84%E5%8F%96%E6%95%B0%E6%8D%AE%E7%BC%93%E5%AD%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. 预取数据缓存</h5>

<p>使用见：<a href="http://www.trinea.cn/android/preloaddatacache/">预取数据缓存</a><br>
缓存类关系图如下：其中HttpCache为后续计划的http缓存 
<a href="https://camo.githubusercontent.com/3405168173976d70927bf449220e37ba025bd64b/68747470733a2f2f6661726d382e737461746963666c69636b722e636f6d2f373333362f31333939313235323435305f663165313534303132645f6f2e706e67" target="_blank"><img src="https://camo.githubusercontent.com/3405168173976d70927bf449220e37ba025bd64b/68747470733a2f2f6661726d382e737461746963666c69636b722e636f6d2f373333362f31333939313235323435305f663165313534303132645f6f2e706e67" alt="Image Cache" data-canonical-src="https://farm8.staticflickr.com/7336/13991252450_f1e154012d_o.png" style="max-width:100%;"></a></p>

<h4>
<a name="user-content-%E4%BA%8C-%E5%85%AC%E7%94%A8%E7%9A%84view" class="anchor" href="#%E4%BA%8C-%E5%85%AC%E7%94%A8%E7%9A%84view" aria-hidden="true"><span class="octicon octicon-link"></span></a>二. 公用的view</h4>

<h5>
<a name="user-content-1-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E5%8F%8A%E6%BB%9A%E5%8A%A8%E5%88%B0%E5%BA%95%E9%83%A8%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%E7%9A%84listview" class="anchor" href="#1-%E4%B8%8B%E6%8B%89%E5%88%B7%E6%96%B0%E5%8F%8A%E6%BB%9A%E5%8A%A8%E5%88%B0%E5%BA%95%E9%83%A8%E5%8A%A0%E8%BD%BD%E6%9B%B4%E5%A4%9A%E7%9A%84listview" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. 下拉刷新及滚动到底部加载更多的Listview</h5>

<p>使用: <a href="http://www.trinea.cn/android/dropdown-to-refresh-and-bottom-load-more-listview/">下拉刷新及滚动到底部加载更多listview的使用</a><br>
实现原理: <a href="http://trinea.iteye.com/blog/1562281">http://trinea.iteye.com/blog/1562281</a>。效果图如下：<br><a href="https://camo.githubusercontent.com/be0e21d97918f16b2c2086333ca27862df0d313d/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373337362f393331323136323935315f373462353937656261615f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/be0e21d97918f16b2c2086333ca27862df0d313d/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373337362f393331323136323935315f373462353937656261615f6f2e6a7067" alt="DropDownListView" data-canonical-src="http://farm8.staticflickr.com/7376/9312162951_74b597ebaa_o.jpg" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-2-%E6%BB%91%E5%8A%A8%E4%B8%80%E9%A1%B5%E4%B8%80%E4%B8%AAitem%E7%9A%84gallery" class="anchor" href="#2-%E6%BB%91%E5%8A%A8%E4%B8%80%E9%A1%B5%E4%B8%80%E4%B8%AAitem%E7%9A%84gallery" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. 滑动一页(一个Item)的Gallery</h5>

<p>使用及实现原理：<a href="http://www.trinea.cn/android/gallery-scroll-one-page/">滑动一页(一个Item)的Gallery的使用</a>。效果图如下：<br><a href="https://camo.githubusercontent.com/5836a63e80c6d2f9a75034e35adc15fa35e3e380/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373333302f393332313338313031345f666234303465323433305f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/5836a63e80c6d2f9a75034e35adc15fa35e3e380/687474703a2f2f6661726d382e737461746963666c69636b722e636f6d2f373333302f393332313338313031345f666234303465323433305f6f2e6a7067" alt="ViewPager1" data-canonical-src="http://farm8.staticflickr.com/7330/9321381014_fb404e2430_o.jpg" style="max-width:100%;"></a><a href="https://camo.githubusercontent.com/e5ed2b0f771b6b0434f1923c2fa6a50bf936cc2e/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323832372f393332313338303938325f643836313964313630315f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/e5ed2b0f771b6b0434f1923c2fa6a50bf936cc2e/687474703a2f2f6661726d332e737461746963666c69636b722e636f6d2f323832372f393332313338303938325f643836313964313630315f6f2e6a7067" alt="ViewPager2" data-canonical-src="http://farm3.staticflickr.com/2827/9321380982_d8619d1601_o.jpg" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-3-%E6%BB%91%E5%8A%A8%E5%88%B0%E5%BA%95%E9%83%A8%E6%88%96%E9%A1%B6%E9%83%A8%E5%93%8D%E5%BA%94%E7%9A%84scrollview" class="anchor" href="#3-%E6%BB%91%E5%8A%A8%E5%88%B0%E5%BA%95%E9%83%A8%E6%88%96%E9%A1%B6%E9%83%A8%E5%93%8D%E5%BA%94%E7%9A%84scrollview" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. 滑动到底部或顶部响应的ScrollView</h5>

<p>使用及实现原理: <a href="http://www.trinea.cn/android/on-bottom-load-more-scrollview/">滚动到底部或顶部响应的ScrollView使用</a>。效果图如下：<br><a href="https://camo.githubusercontent.com/e59f08668bf53fdd8cbc9f2a7256ab26dc21b970/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333636392f393435393638363831345f316135323363656562365f6f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/e59f08668bf53fdd8cbc9f2a7256ab26dc21b970/687474703a2f2f6661726d342e737461746963666c69636b722e636f6d2f333636392f393435393638363831345f316135323363656562365f6f2e6a7067" alt="ScrollView" data-canonical-src="http://farm4.staticflickr.com/3669/9459686814_1a523ceeb6_o.jpg" style="max-width:100%;"></a></p>

<h4>
<a name="user-content-%E4%B8%89-%E5%B7%A5%E5%85%B7%E7%B1%BB" class="anchor" href="#%E4%B8%89-%E5%B7%A5%E5%85%B7%E7%B1%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>三. 工具类</h4>

<p>具体介绍可见：<a href="http://www.trinea.cn/android/android-common-utils/">Android常用工具类</a><br>
目前包括HttpUtils、<a href="http://www.trinea.cn/android/android-downloadmanager/">DownloadManagerPro</a>、<a href="http://www.trinea.cn/android/android-java-execute-shell-commands/">ShellUtils</a>、<a href="http://www.trinea.cn/android/android-silent-install/">PackageUtils</a>、PreferencesUtils、JSONUtils、FileUtils、ResourceUtils、StringUtils、ParcelUtils、RandomUtils、ArrayUtils、ImageUtils、ListUtils、MapUtils、ObjectUtils、SerializeUtils、SystemUtils、TimeUtils。<br><br></p>

<h5>
<a name="user-content-1-android%E7%B3%BB%E7%BB%9F%E4%B8%8B%E8%BD%BD%E7%AE%A1%E7%90%86downloadmanager%E4%BD%BF%E7%94%A8" class="anchor" href="#1-android%E7%B3%BB%E7%BB%9F%E4%B8%8B%E8%BD%BD%E7%AE%A1%E7%90%86downloadmanager%E4%BD%BF%E7%94%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. Android系统下载管理DownloadManager使用</h5>

<p>使用示例：<a href="http://www.trinea.cn/android/android-downloadmanager/">Android系统下载管理DownloadManager功能介绍及使用示例</a><br>
功能扩展：<a href="http://www.trinea.cn/android/android-downloadmanager-pro/">Android下载管理DownloadManager功能扩展和bug修改</a>
效果图如下：<br><a href="https://camo.githubusercontent.com/0f8c43fd42719bf332d057f0b38ecd2637737475/687474703a2f2f7777772e7472696e65612e636e2f77702d636f6e74656e742f75706c6f6164732f323031332f30352f646f776e6c6f616444656d6f322e676966" target="_blank"><img src="https://camo.githubusercontent.com/0f8c43fd42719bf332d057f0b38ecd2637737475/687474703a2f2f7777772e7472696e65612e636e2f77702d636f6e74656e742f75706c6f6164732f323031332f30352f646f776e6c6f616444656d6f322e676966" alt="downloadManagerDemo" data-canonical-src="http://www.trinea.cn/wp-content/uploads/2013/05/downloadDemo2.gif" style="max-width:100%;"></a></p>

<h5>
<a name="user-content-2-android-apk-root%E6%9D%83%E9%99%90%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85" class="anchor" href="#2-android-apk-root%E6%9D%83%E9%99%90%E9%9D%99%E9%BB%98%E5%AE%89%E8%A3%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. Android APK root权限静默安装</h5>

<p>使用示例：<a href="http://www.trinea.cn/android/android-silent-install/">Android APK root权限静默安装</a></p>

<h5>
<a name="user-content-3-android-root%E6%9D%83%E9%99%90" class="anchor" href="#3-android-root%E6%9D%83%E9%99%90" aria-hidden="true"><span class="octicon octicon-link"></span></a>3. Android root权限</h5>

<p>直接调用<a href="https://github.com/Trinea/AndroidCommon/blob/master/src/cn/trinea/android/common/util/ShellUtils.java#LC43">ShellUtils.execCommand</a>方法</p>

<h5>
<a name="user-content-4-%E5%9B%BE%E7%89%87%E5%B7%A5%E5%85%B7%E7%B1%BB" class="anchor" href="#4-%E5%9B%BE%E7%89%87%E5%B7%A5%E5%85%B7%E7%B1%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>4. 图片工具类</h5>

<p>(1)Drawable、Bitmap、byte数组相互转换; (2)根据url获得InputStream、Drawable、Bitmap<br>
更多工具类介绍见<a href="http://www.trinea.cn/android/android-common-utils/">Android常用工具类</a></p>

<h3>
<a name="user-content-proguard" class="anchor" href="#proguard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Proguard</h3>

<div class="highlight highlight-xml"><pre>-keep class cn.trinea.android.** { *; }
-keepclassmembers class cn.trinea.android.** { *; }
-dontwarn cn.trinea.android.**
</pre></div>

<h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<pre><code>Copyright 2013 trinea.cn

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre></article></div>
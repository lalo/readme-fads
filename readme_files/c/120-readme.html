<div class="announce instapaper_body markdown" data-path="README.markdown" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-broadwayjs" class="anchor" href="#broadwayjs" aria-hidden="true"><span class="octicon octicon-link"></span></a>Broadway.js</h1>

<p>A JavaScript H.264 decoder.</p>

<p>View a Live Demo at: <a href="http://bkw.github.com/Broadway/storyDemo.html">http://bkw.github.com/Broadway/storyDemo.html</a> or <a href="http://bkw.github.com/Broadway/treeDemo.html">http://bkw.github.com/Broadway/treeDemo.html</a></p>

<p>Thanks <a href="https://github.com/bkw">https://github.com/bkw</a> for hosting the demos.</p>

<p>The video player first needs to download the entire video before it can start playing, thus appearing to be a bit slow at first, so have patience. You can start the video by clicking on each player. The top left player runs on the main thread, the remaining players run in background worker threads.</p>

<p>The demo is Android's H.264 decoder compiled with Emscripten to JavaScript, then further optimized with
Google's JavaScript closure compiler and further optimized by hand to use WebGL.</p>

<p>Building the demo:</p>

<p>Install and configure Emscripten (<a href="https://github.com/kripken/emscripten">https://github.com/kripken/emscripten</a>)</p>

<p>The code for the demo is in the Decoder folder, to build it run the make.py python script.</p>

<h1>
<a name="user-content-encoding-video" class="anchor" href="#encoding-video" aria-hidden="true"><span class="octicon octicon-link"></span></a>Encoding Video</h1>

<p>The decoder expects an .mp4 file and does not support weighted prediction for P-frames and CABAC entropy encoding. To create such bitstreams use ffmpeg and x264 with the following command line options:</p>

<p>ffmpeg -y -i sourceFile -r 30000/1001 -b:a 2M -bt 4M -vcodec libx264 -pass 1 -coder 0 -bf 0 -flags -loop -wpredp 0 -an targetFile.mp4</p></article></div>
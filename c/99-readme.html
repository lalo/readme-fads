<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-raknet-4081" class="anchor" href="#raknet-4081" aria-hidden="true"><span class="octicon octicon-link"></span></a>RakNet 4.081</h1>

<p>Copyright (c) 2014, Oculus VR, Inc.</p>

<h2>
<a name="user-content-package-notes" class="anchor" href="#package-notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Package notes</h2>

<p>The Help directory contains index.html, which is full help documentation in HTML format
The Source directory contain all files required for the core of Raknet and is used if you want to use the source in your program or create your own dll
The Samples directory contains code samples and one game using an older version of Raknet.  The code samples each demonstrate one feature of Raknet.  The game samples cover several features.
The lib directory contains libs for debug and release versions of RakNet and RakVoice
There is a make file for linux users in the root directory.  Windows users can use projects under Samples\Project Samples</p>

<h2>
<a name="user-content-c-support" class="anchor" href="#c-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>C# support</h2>

<p>See Help\swigtutorial.html</p>

<h2>
<a name="user-content-upgrading-from-version-3" class="anchor" href="#upgrading-from-version-3" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upgrading from version 3</h2>

<p>See 3.x_to_4.x_upgrade.txt</p>

<h2>
<a name="user-content-windows-users-visual-studio-2008-and-2010" class="anchor" href="#windows-users-visual-studio-2008-and-2010" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows users (Visual Studio 2008 and 2010)</h2>

<p>Load RakNet_VS2008.sln and convert if necessary.</p>

<p>After the project conversion, if you encounter error MSB4006,
follow the steps below to fix it:</p>

<ol class="task-list">
<li>Open project properties</li>
<li>Click on "Common Properties"</li>
<li>Click on "Framework and References"</li>
<li>Look under "Build Properties"</li>
<li>Change the "Copy Local" flag from "True" to "False"</li>
</ol><p>For other compiler issues, please see Help/compilersetup.html</p>

<h2>
<a name="user-content-windows-users-vc6" class="anchor" href="#windows-users-vc6" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows users (VC6)</h2>

<p>Not supported, but you can get by if you directly include the source.</p>

<h2>
<a name="user-content-cygwin-users" class="anchor" href="#cygwin-users" aria-hidden="true"><span class="octicon octicon-link"></span></a>CYGWIN users</h2>

<p>Copy Include, Source, and whatever you want to run in the home directory.  Then type
<code>g++ ../../lib/w32api/libws2_32.a *.cpp</code>
You can run <code>a.exe</code>.
You might have to copy <code>*.dll</code> from <code>cygwin\bin</code> as well.</p>

<h2>
<a name="user-content-linux-users" class="anchor" href="#linux-users" aria-hidden="true"><span class="octicon octicon-link"></span></a>Linux users</h2>

<p>Use <code>cmake</code>, or <code>g++ -lpthread -g *.cpp</code> in the /Source directory.
With libcat, use <code>g++ -pthread -g -I./../DependentExtensions *.cpp</code> in the /Source directory.</p>

<p>64 bit use -m64 command line
Sometimes you need -pthread instead of -lpthread</p>

<p>Command to build 64 bit chat example server from the /Source directory:</p>

<pre><code>g++ -m64 -g -lpthread -I./ "../Samples/Chat Example/Chat Example Server.cpp" *.cpp
</code></pre>

<p>Command to build NATCompleteServer from the Samples/NATCompleteServer directory:</p>

<pre><code>g++ -g -lpthread -I./ -I./../../Source main.cpp -I./../CloudServer ./../../Source/*.cpp ./../CloudServer/CloudServerHelper.cpp
</code></pre>

<p>Command to build autopatcher server from /Source directory:</p>

<pre><code>g++ -lpthread -lpq -lssl -lbz2 -lssl -lcrypto -L/opt/PostgreSQL/9.0/lib -L../DependentExtensions/bzip2-1.0.6 -I/opt/PostgreSQL/9.0/include -I../DependentExtensions/bzip2-1.0.6 -I./ -I../DependentExtensions/Autopatcher -I../DependentExtensions/Autopatcher/AutopatcherPostgreRepository -I../DependentExtensions/PostgreSQLInterface -g *.cpp ../DependentExtensions/Autopatcher/AutopatcherServer.cpp ../DependentExtensions/Autopatcher/CreatePatch.cpp ../DependentExtensions/Autopatcher/MemoryCompressor.cpp ../DependentExtensions/Autopatcher/AutopatcherPostgreRepository/AutopatcherPostgreRepository.cpp ../DependentExtensions/PostgreSQLInterface/PostgreSQLInterface.cpp ../Samples/AutopatcherServer/AutopatcherServerTest.cpp
</code></pre>

<p>Command to build NATCompleteServer from /Source directory:</p>

<pre><code>g++ -lpthread -I./ -I../Samples/CloudServer ../Samples/CloudServer/CloudServerHelper.cpp ../Samples/NATCompleteServer/main.cpp *.cpp
</code></pre>

<p>Command to build BigPacketTest from /Source directory:</p>

<pre><code>g++ -lpthread -I./ ../Samples/BigPacketTest/BigPacketTest.cpp *.cpp
</code></pre>

<p>Or with debugging info on:</p>

<pre><code>g++ -g -lpthread -I./ ../Samples/BigPacketTest/BigPacketTest.cpp *.cpp
</code></pre>

<p>If you get /usr/local/lib/libraknet.so: undefined reference to `__sync_fetch_and_add_4 then build with <code>-march=i686</code></p>

<p>To debug:
<a href="http://www.unknownroad.com/rtfm/gdbtut/gdbstack.html">http://www.unknownroad.com/rtfm/gdbtut/gdbstack.html</a>
<a href="http://cs.baylor.edu/%7Edonahoo/tools/gdb/tutorial.html">http://cs.baylor.edu/~donahoo/tools/gdb/tutorial.html</a>
<a href="http://linux.bytesex.org/gdb.html">http://linux.bytesex.org/gdb.html</a>
<a href="http://www.delorie.com/gnu/docs/gdb/gdb_29.html">http://www.delorie.com/gnu/docs/gdb/gdb_29.html</a></p>

<pre><code>gdb ./a.out
</code></pre>

<p>Set breakpoint:</p>

<pre><code>b file:line
</code></pre>

<p>Disable a breakpoint:</p>

<pre><code>disable &lt;breakpointNumber&gt;
</code></pre>

<p>Delete a breakpoint:</p>

<pre><code>delete &lt;breakpointNumber&gt;
</code></pre>

<p>Get a list of breakpoints:</p>

<pre><code>info breakpoints
</code></pre>

<p>St breakpoint to be ignored that number of times</p>

<pre><code>ignore &lt;breakpointNumber&gt; &lt;count&gt;
run
</code></pre>

<p>Other useful commands:</p>

<pre><code>info stack
info locals
delete (Clears all breakpoints)
step (step into)
next (step over)
finish (step out)
continue to keep going after step or next
p &lt;variableName&gt;
For example: p users.orderedList.listArray[0].guid
</code></pre>

<p>Command to install g++</p>

<pre><code>sudo apt-get install gcc-c++
sudo apt-get install build-essential
</code></pre>

<p>Or:</p>

<pre><code>yum install gcc-c++
</code></pre>

<p>Or:</p>

<pre><code>sudo apt-get update
sudo apt-get install g++
</code></pre>

<p>Command to install gdb</p>

<pre><code>sudo apt-get install gdb
</code></pre>

<p>Command to install wget, used to download files from webpages
sudo apt-get install wget</p>

<p>Series of commands for a new server:
    sudo apt-get install wget
    sudo apt-get update
    sudo apt-get install --fix-missing g++
    sudo apt-get install gdb
    cd RakNet_Install_Directory\Source
    g++ -m64 -g -pthread -I./ "../Samples/Chat Example/Chat Example Server.cpp" *.cpp
    ./a.out</p>

<h2>
<a name="user-content-mac-users" class="anchor" href="#mac-users" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mac Users</h2>

<p>Open a Terminal window and type:</p>

<pre><code>cd ~/Desktop/RakNet/Source
g++ -c -DNDEBUG -I -isysroot /Developer/SDKs/MacOSX10.5u.sdk/ -arch i386 *.cpp
</code></pre>

<p>Use whichever SDK you have. However, the 10.4 SDK is bugged and will not compile unless you use GCC 4.0 from inside XCODE</p>

<p>The sources should build cleanly. This gives you a bunch of PowerPC binaries, compiled against the 10.3.9 SDK which is a good thing.</p>

<p>Give the following command:</p>

<pre><code>libtool -static -o raknetppc.a *.o
</code></pre>

<p>This will stitch together a static library for the PowerPC architecture. There may be warnings that some .o files do not have any symbols. If you want to be prudent, remove the named files (the .o files, not the .cpp files!) and re-run the libtool command.</p>

<p>Now, we build the source files for Intel:</p>

<pre><code>gcc -c -I ../Include -isysroot /Developer/SDKs/MacOSX10.4u.sdk/ -arch i386 *.cpp
</code></pre>

<p>..and stitch it into a i386 library:</p>

<pre><code>libtool -static -o rakneti386.a *.o
</code></pre>

<p>Now, type:</p>

<pre><code>ls *.a
</code></pre>

<p>which should list the two .a files. Now, we make them into a universal binary:</p>

<pre><code>lipo -create *.a -o libraknet.a
</code></pre>

<p>You now have a file named libraknet.a. This is the RakNet library, built to run on both PowerPC and Intel Macs. Enjoy! ;-)</p>

<h2>
<a name="user-content-ipod" class="anchor" href="#ipod" aria-hidden="true"><span class="octicon octicon-link"></span></a>IPod</h2>

<p>Depending on what version you target, you may have to change two defines to not use 64 bit integers and floats or doubles.</p>

<h2>
<a name="user-content-android" class="anchor" href="#android" aria-hidden="true"><span class="octicon octicon-link"></span></a>Android</h2>

<p>You will need the latest CYWGIN and the android SDK to build native code on the android. Under CYWGIN, you will need to run ndk-build on a directory for RakNet.</p>

<ol class="task-list">
<li><p>Under cygwin, create the RakNet directory somewhere, such as under samples.
For example, if you create the path <code>\cygwin\home\Kevin\android-ndk-r4b\samples\RakNet</code></p></li>
<li><p>I copied the Android.Manifest.xml and other files from another sample</p></li>
<li>
<p>Under jni, you will need the following Android.mk</p>

<p>LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE    := RakNet
MY_PREFIX := $(LOCAL_PATH)/RakNetSources/
MY_SOURCES := $(wildcard $(MY_PREFIX)*.cpp)
LOCAL_SRC_FILES += $(MY_SOURCES:$(MY_PREFIX)%=RakNetSources/%)
include $(BUILD_SHARED_LIBRARY)</p>
</li>
</ol><p>This version of Android.mk assumes there is a directory called RakNetSources, for example
<code>cygwin/home/Kevin/android-ndk-r4b/samples/RakNet/jni/RakNetSources</code></p>

<p>Under RakNetSources should be the /Source directory to RakNet. Rather than copy the files I used junction.exe
<a href="http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx">http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx</a></p>

<p>The command I used to create the junction was:</p>

<pre><code>D:/cygwin/home/Kevin/android-ndk-r4b/samples/RakNet/jni/junction.exe -s D:/cygwin/home/Kevin/android-ndk-r4b/samples/RakNet/jni/RakNetSources D:/RakNet4/Source
</code></pre>

<p>To unjunction I used:</p>

<pre><code>D:/cygwin/home/Kevin/android-ndk-r4b/samples/RakNet/jni/junction.exe -d D:/cygwin/home/Kevin/android-ndk-r4b/samples/RakNet/jni/RakNetSources
</code></pre>

<p>From within the CYWGIN enviroment, navigate to home/Kevin/android-ndk-r4b/samples/RakNet. Then type</p>

<pre><code>../../ndk-build
</code></pre>

<p>Everything should build and you should end up with a .so file.</p>

<p>You should then be able to create a project in eclipse, and import cygwin/home/Kevin/android-ndk-r4b/samples/RakNet</p>

<h2>
<a name="user-content-native-client" class="anchor" href="#native-client" aria-hidden="true"><span class="octicon octicon-link"></span></a>Native client</h2>

<p>Solution: RakNet_NativeClient_VS2010. See Samples\nacl_sdk\RakNet_NativeClient_VS2010\HowToSetup.txt for detailed instructions on setup.</p>

<h2>
<a name="user-content-windows-phone-8" class="anchor" href="#windows-phone-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows Phone 8</h2>

<p>Example solution: RakNet_WinPhone8_VS2012.
Add to your project DependentExtensions\WinPhone8\ThreadEmulation.cpp
Add DependentExtensions\WinPhone8\ to your include paths
Define _CRT_SECURE_NO_WARNINGS and WINDOWS_PHONE_8</p>

<h2>
<a name="user-content-windows-store-8" class="anchor" href="#windows-store-8" aria-hidden="true"><span class="octicon octicon-link"></span></a>Windows Store 8</h2>

<p>Example solution: RakNet_WindowsStore8_VS2012.sln
Add to your project DependentExtensions\WinPhone8\ThreadEmulation.cpp
Add DependentExtensions\WinPhone8\ and DependentExtensions\WinRT to your include paths
TCP is not supported, only UDP (RakPeer).
IPV4 only (not hard to also add IPV6 upon request).
Define:
_CRT_SECURE_NO_WARNINGS
WINDOWS_STORE_RT
_RAKNET_SUPPORT_TCPInterface=0
_RAKNET_SUPPORT_PacketizedTCP=0
_RAKNET_SUPPORT_EmailSender=0
_RAKNET_SUPPORT_HTTPConnection=0
_RAKNET_SUPPORT_HTTPConnection2=0
_RAKNET_SUPPORT_TelnetTransport=0
_RAKNET_SUPPORT_NatTypeDetectionServer=0
_RAKNET_SUPPORT_UDPProxyServer=0
_RAKNET_SUPPORT_UDPProxyCoordinator=0
_RAKNET_SUPPORT_UDPForwarder=0</p>

<h2>
<a name="user-content-unreal-engine" class="anchor" href="#unreal-engine" aria-hidden="true"><span class="octicon octicon-link"></span></a>Unreal engine</h2>

<p>See <a href="https://udn.epicgames.com/lists/showpost.php?list=unprog3&amp;id=37697&amp;lessthan=&amp;show=20">https://udn.epicgames.com/lists/showpost.php?list=unprog3&amp;id=37697&amp;lessthan=&amp;show=20</a></p></article></div>
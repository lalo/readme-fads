<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-google-play-games-plugin-for-unity" class="anchor" href="#google-play-games-plugin-for-unity" aria-hidden="true"><span class="octicon octicon-link"></span></a>Google Play Games plugin for Unity</h1>

<p><em>Copyright (c) 2014 Google Inc. All rights reserved.</em></p>

<p>The Google Play Games plugin for Unity速 is an open-source project whose goal
is to provide a plugin that allows game developers to integrate with
the Google Play Games API from a game written in Unity速. However, this project is
not in any way endorsed or supervised by Unity Technologies.</p>

<p><em>Unity速 is a trademark of Unity Technologies.</em></p>

<p><em>iOS is a trademark of Apple, Inc.</em></p>

<h2>
<a name="user-content-overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>The Google Play Games plugin for Unity allows you to access the Google Play Games 
API through Unity's <a href="http://docs.unity3d.com/Documentation/ScriptReference/Social.html">social interface</a>. 
The plugin provides support for the 
following features of the Google Play Games API:<br></p>

<ul class="task-list">
<li>sign in</li>
<li>unlock/reveal/increment achievement</li>
<li>post score to leaderboard</li>
<li>cloud save read/write</li>
<li>show built-in achievement/leaderboards UI</li>
<li>
<a href="TBMP.md">turn-based multiplayer</a> <b>(new)</b>
</li>
<li>
<a href="RTMP.md">real-time multiplayer</a> <b>(new)</b>
</li>
</ul><p>All features are available on Android and iOS.</p>

<p>Features:</p>

<ul class="task-list">
<li>easy GUI-oriented project setup (integrated into the Unity GUI)</li>
<li>cross-platform support (Android and iOS) with no need for platform glue code.</li>
<li>(Android) no need to override/customize the player Activity</li>
<li>(Android) no need to override/customize AndroidManifest.xml</li>
<li>(iOS) integrates into XCode build</li>
</ul><p>System requirements:</p>

<ul class="task-list">
<li>Unity速 4.3 or above</li>
<li>To deploy on Android:

<ul class="task-list">
<li>Android SDK</li>
<li>Google Play Services library, version 4.2.42 or above</li>
</ul>
</li>
<li>To deploy on iOS:

<ul class="task-list">
<li>XCode 4 or above</li>
<li>Google Plus SDK for iOS</li>
<li>Google Play Games SDK for iOS</li>
</ul>
</li>
</ul><h2>
<a name="user-content-upgrading" class="anchor" href="#upgrading" aria-hidden="true"><span class="octicon octicon-link"></span></a>Upgrading</h2>

<p>If you have already integrated your project with a previous version of the plugin and wish to upgrade to a new version, please refer to the <a href="UPGRADING.txt">upgrade instructions</a>.</p>

<h2>
<a name="user-content-configure-your-game" class="anchor" href="#configure-your-game" aria-hidden="true"><span class="octicon octicon-link"></span></a>Configure Your Game</h2>

<p>To use the plugin, you must first <a href="https://developers.google.com/games/services/console/enabling">configure your 
game</a> in the 
Google Play Developer Console. Follow the instructions on creating a client ID 
for Android and/or iOS (depending on what platforms you intend to deploy or game 
on). Be particularly careful when entering your package name and your 
certificate fingerprints, since mistakes on those screens can be difficult to 
recover from.</p>

<p>If you intend to use real-time or turn-based multiplayer in your game, remember
to activate those features in the Google Play Developer Console when creating
your application instances.</p>

<p>Please note the following pieces of information when creating your client IDs, 
as they will be necessary later:</p>

<p><strong>Android</strong></p>

<ul class="task-list">
<li>Your package name (e.g. "com.example.awesomegame")</li>
<li>Your application ID (e.g. 123456789012)</li>
</ul><p><strong>iOS</strong></p>

<ul class="task-list">
<li>Your bundle identifier (e.g. "com.example.AwesomeGame")</li>
<li>Your application ID (e.g. 123456789012)*</li>
<li>Your client ID (e.g. "46798138751-afwa4iejsfjskj.apps.googleusercontent.com")</li>
</ul><p><em>[*] The application ID is the number that Google Play Developer Console 
assigns to your project. Please note that is not the same as your Apple 
application ID.</em></p>

<p><strong>Note:</strong> Do not forget to add your test accounts (the accounts with which you 
will try signing in) to the <strong>Testing</strong> section of the Developer Console, 
otherwise you will not be able to sign in to your game.</p>

<h2>
<a name="user-content-add-achievements-and-leaderboards" class="anchor" href="#add-achievements-and-leaderboards" aria-hidden="true"><span class="octicon octicon-link"></span></a>Add Achievements and Leaderboards</h2>

<p>Add 
<a href="https://developers.google.com/games/services/common/concepts/achievements">achievements</a> 
and 
<a href="https://developers.google.com/games/services/common/concepts/leaderboards">leaderboards</a> 
to your game in the Google Play Developer Console. For each achievement and 
leaderboard you configure, make sure to note the corresponding <strong>achievement ID</strong> or <strong>leaderboard ID</strong>, as those will be needed when making the API calls. 
Achievement and leaderboard IDs are alphanumeric strings (e.g. 
"Cgkx9eiuwi8_AQ").</p>

<h2>
<a name="user-content-load-your-game-project" class="anchor" href="#load-your-game-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Load Your Game Project</h2>

<p>Next, load your game project into the Unity editor.</p>

<p>If you do not have a game project to work with, you can use the <strong>Minimal</strong> sample
available in the <strong>samples</strong> directory. Using that sample will allow you to
quickly test your setup and make sure you can access the API.</p>

<p>If you want to test a larger sample after you are familiar with the plugin, 
try the <strong>CubicPilot</strong> game.
More information about building the samples can be found in the
<a href="samples/README.md">samples README</a> file.</p>

<h2>
<a name="user-content-plugin-installation" class="anchor" href="#plugin-installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plugin Installation</h2>

<p>To download the plugin, clone this Git repository into your file system (or download it as 
a ZIP file and unpack it). Then, look for the <strong>unitypackage</strong> file in 
the <strong>current-build</strong> directory:</p>

<pre><code>current-build/GooglePlayGamesPluginForUnity-X.YY.ZZ.unitypackage
</code></pre>

<p>To install the plugin, simply open your game project in Unity and import that file into
your project's assets, as you would any other Unity package. In Unity 4.2 and
4.3, this is accomplished through the <strong>Assets | Import Package | Custom
Package</strong> menu item (you can also reach this menu it by right-clicking the
<strong>Assets</strong> folder). After importing, you should see that two new menu items
were added to the File menu: <strong>"Play Games Android setup"</strong> and <strong>"Play Games
iOS setup"</strong>. If you don't see the new menu items, refresh the assets by
clicking <strong>Assets | Refresh</strong> and try again.</p>

<h2>
<a name="user-content-android-setup" class="anchor" href="#android-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>Android Setup</h2>

<p>To configure your Unity game to run with Google Play Games on Android, first
open the Android SDK manager and verify that you have downloaded the <strong>Google
Play Services</strong> package. The Android SDK manager is usually available in your
SDK installation directory, under the "tools" subdirectory, and is called
<strong>android</strong> (or <strong>android.exe</strong> on Windows). The <strong>Google Play Services</strong>
package is available under the <strong>Extras</strong> folder. If it is not installed
or is out of date, install or update it before proceeding.</p>

<p>Next, set up the path to your Android SDK installation in Unity. This is located in the
preferences menu, under the <strong>External Tools</strong> section. </p>

<p>Next, configure your game's package name. To do this, click <strong>File | Build Settings</strong>, 
select the <strong>Android</strong> platform and click <strong>Player Settings</strong> to show Unity's 
Player Settings window. In that window, look for the <strong>Bundle Identifier</strong> setting
under <strong>Other Settings</strong>. Enter your package name there (for example
<em>com.example.my.awesome.game</em>).</p>

<p>Next, click the <strong>File | Play Games - Android setup</strong> menu item. This will display the Android setup screen, where you must input your Application ID (e.g. 12345678012).</p>

<p>After filling in the application ID, click the <strong>Setup</strong> button.</p>

<p><strong>Important:</strong> The application ID and package name settings must match exactly
the values you used when setting up your project on the Developer Console.</p>

<h3>
<a name="user-content-additional-instructions-on-building-for-android-on-windows" class="anchor" href="#additional-instructions-on-building-for-android-on-windows" aria-hidden="true"><span class="octicon octicon-link"></span></a>Additional instructions on building for Android on Windows</h3>

<p>If you are using Windows, you must make sure that your Java SDK installation can be accessed by Unity. To do this:</p>

<ol class="task-list">
<li>Set the JAVA_HOME environment variable to your Java SDK installation path (for example, <code>C:\Program Files\Java\jdk1.7.0_45</code>).</li>
<li>Add the Java SDK's <code>bin</code> folder to your <code>PATH</code> environment variable (for example, <code>C:\Program Files\Java\jdk1.7.0_45\bin</code>)</li>
<li>Reboot.</li>
</ol><p><strong>How to edit environment variables:</strong> In Windows 2000/XP/Vista/7, 
right-click <strong>My Computer</strong>, then <strong>Properties</strong>, then go to <strong>Advanced System Properties</strong>
(or <strong>System Properties</strong> and then click the <strong>Advanced</strong> tab), then
click <strong>Environment Variables</strong>. On Windows 8, press <strong>Windows Key + W</strong> and
search for <strong>environment variables</strong>.
For more information, consult the documentation for your version of Windows. </p>

<h2>
<a name="user-content-ios-setup" class="anchor" href="#ios-setup" aria-hidden="true"><span class="octicon octicon-link"></span></a>iOS Setup</h2>

<p>To configure your Unity game to run with Google Play Games on iOS, download the 
Games SDK and the Google+ iOS SDK, which are available from 
<a href="https://developers.google.com/games/services/downloads/">our downloads page</a>. Unpack the 
downloads into a directory of your choice. The necessary bundles and frameworks 
are:</p>

<ul class="task-list">
<li>GoogleOpenSource.framework</li>
<li>GooglePlus.bundle</li>
<li>GooglePlus.framework</li>
<li>PlayGameServices.bundle</li>
<li>PlayGameServices.framework</li>
</ul><p>Next, open the iOS build settings dialog. To do so, click <strong>File | Build Settings</strong>,
select the <strong>iOS</strong> platform, and click <strong>Player Settings</strong>. Find the <strong>Bundle Identifier</strong>
setting and enter your bundle identifier there.</p>

<p>Next, click the **File | Play Games - iOS **setup menu item. This will display the 
iOS setup screen, where you must input:</p>

<ul class="task-list">
<li>Your application ID (e.g. 123456789012)</li>
<li>Your client ID (e.g. "46798138751-afwa4iejsfjskj.apps.googleusercontent.com")</li>
<li>Your bundle identifier (e.g. "com.example.AwesomeGame")</li>
</ul><p>All of these settings must match exactly the values you used when setting up 
your client ID on the Developer Console previously.</p>

<p>When ready, click the <strong>Setup</strong> button to finish the configuration process.</p>

<p><strong>Important:</strong> If you ever change your bundle ID, you must perform the iOS setup
again in order to update the necessary files where this information gets replicated.</p>

<h2>
<a name="user-content-run-the-project" class="anchor" href="#run-the-project" aria-hidden="true"><span class="octicon octicon-link"></span></a>Run the Project</h2>

<p>If you are working with the <strong>Minimal</strong> sample, you should be able to build
and run the project at this point. You will see a screen with an <strong>Authenticate</strong> button,
and you should be able to sign in when you click it.</p>

<p>To build and run on
Android, click <strong>File | Build Settings</strong>, select the <strong>Android</strong> platform, then
<strong>Switch to Platform</strong>, then <strong>Build and Run</strong>.</p>

<p>To build and run on iOS, click <strong>File | Build Settings</strong>, select the <strong>iOS</strong> platform,
then <strong>Switch to Platform</strong>, then <strong>Build</strong>. This will export an XCode project and
will display additional instructions on completing the build.</p>

<p>The remainder of this guide assumes you are now attempting to write your
own code to integrate Play Games services into your game.</p>

<h2>
<a name="user-content-isocialplatform-compliance" class="anchor" href="#isocialplatform-compliance" aria-hidden="true"><span class="octicon octicon-link"></span></a>ISocialPlatform Compliance</h2>

<p>The Google Play Games plugin implements a subset of Unity's <a href="http://docs.unity3d.com/Documentation/ScriptReference/Social.html">social interface</a>, for compatibility 
with games that already use that interface when integrating with other 
platforms. However, some features are unique to Play Games and are 
offered as extensions to the standard social interface provided by Unity. </p>

<p>The standard API calls can be accessed through the <strong>Social.Active</strong> object, 
which is a reference to an <strong>ISocialPlatform</strong> interface. The non-standard 
Google Play Games extensions can be accessed by casting the <strong>Social.Active</strong> 
object to the <strong>PlayGamesPlatform</strong> class, where the additional methods are 
available. </p>

<h2>
<a name="user-content-initialization" class="anchor" href="#initialization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initialization</h2>

<p>To initialize the plugin and make it your default social platform,
call <strong>PlayGamesPlatform.Activate</strong>:</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>

    <span class="c1">// recommended for debugging:</span>
    <span class="n">PlayGamesPlatform</span><span class="p">.</span><span class="n">DebugLogEnabled</span> <span class="p">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="c1">// Activate the Google Play Games platform</span>
    <span class="n">PlayGamesPlatform</span><span class="p">.</span><span class="n">Activate</span><span class="p">();</span>
</pre></div>

<p>After activated, you can access the Play Games platform through 
<strong>Social.Active</strong>. You should only call <strong>PlayGamesPlatform.Activate</strong> once in 
your application. Making this call will not display anything on the screen and 
will not interact with the user in any way.</p>

<h2>
<a name="user-content-sign-in" class="anchor" href="#sign-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sign in</h2>

<p>To sign in, call <strong>Social.localUser.Authenticate</strong>, which is part of the 
standard Unity social platform interface.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// authenticate user:</span>
    <span class="n">Social</span><span class="p">.</span><span class="n">localUser</span><span class="p">.</span><span class="n">Authenticate</span><span class="p">((</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// handle success or failure</span>
    <span class="p">});</span>
</pre></div>

<p>Authentication will show the required consent dialogs. If the user has already 
signed into the game in the past, this process will be silent and the user will 
not have to interact with any dialogs.</p>

<p>Note that you cannot make any games API calls (unlock achievements, post scores, 
etc) until you get a successful return value from <strong>Authenticate</strong>, so it is 
good practice to put up a standby screen until the callback is called, to make 
sure the user can't start playing the game until the authentication process 
completes.</p>

<h2>
<a name="user-content-revealingunlocking-an-achievement" class="anchor" href="#revealingunlocking-an-achievement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Revealing/Unlocking an Achievement</h2>

<p>To unlock an achievement, use the <strong>Social.ReportProgress</strong> method with a 
progress value of 100.0f:</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// unlock achievement (achievement ID "Cfjewijawiu_QA")</span>
    <span class="n">Social</span><span class="p">.</span><span class="n">ReportProgress</span><span class="p">(</span><span class="s">"Cfjewijawiu_QA"</span><span class="p">,</span> <span class="m">100.0f</span><span class="p">,</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// handle success or failure</span>
    <span class="p">});</span>
</pre></div>

<p>Notice that according to the expected behavior of 
<a href="http://docs.unity3d.com/Documentation/ScriptReference/Social.ReportProgress.html">Social.ReportProgress</a>, 
a progress of 0.0f means revealing the achievement and a progress of 100.0f 
means unlocking the achievement. Therefore, to reveal an achievement (that was 
previously hidden) without unlocking it, simply call Social.ReportProgress with 
a progress of 0.0f.</p>

<h2>
<a name="user-content-incrementing-an-achievement" class="anchor" href="#incrementing-an-achievement" aria-hidden="true"><span class="octicon octicon-link"></span></a>Incrementing an Achievement</h2>

<p>If your achievement is incremental, the Play Games implementation of 
<strong>Social.ReportProgress</strong> will try to behave as closely as possible to the 
expected behavior according to Unity's social API, but may not be exact. For 
this reason, we recommend that you do not use Social.ReportProgress for 
incremental achievements. Instead, use the 
<strong>PlayGamesPlatform.IncrementAchievement</strong> method, which is a Play Games 
extension.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// increment achievement (achievement ID "Cfjewijawiu_QA") by 5 steps</span>
    <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">IncrementAchievement</span><span class="p">(</span>
        <span class="s">"Cfjewijawiu_QA"</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="c1">// handle success or failure</span>
    <span class="p">});</span>
</pre></div>

<h2>
<a name="user-content-posting-a-score-to-a-leaderboard" class="anchor" href="#posting-a-score-to-a-leaderboard" aria-hidden="true"><span class="octicon octicon-link"></span></a>Posting a Score to a Leaderboard</h2>

<p>To post a score to a leaderboard, call <strong>Social.ReportScore</strong>.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// post score 12345 to leaderboard ID "Cfji293fjsie_QA")</span>
    <span class="n">Social</span><span class="p">.</span><span class="n">ReportScore</span><span class="p">(</span><span class="m">12345</span><span class="p">,</span> <span class="s">"Cfji293fjsie_QA"</span><span class="p">,</span> <span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="c1">// handle success or failure</span>
    <span class="p">});</span>
</pre></div>

<p>Note that the platform and the server will automatically discard scores that are 
lower than the player's existing high score, so you can submit scores freely 
without any checks to test whether or not the score is greater than the player's 
existing score.</p>

<h2>
<a name="user-content-showing-the-achievements-ui" class="anchor" href="#showing-the-achievements-ui" aria-hidden="true"><span class="octicon octicon-link"></span></a>Showing the Achievements UI</h2>

<p>To show the built-in UI for all leaderboards, call 
<strong>Social.ShowAchievementsUI</strong>.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// show achievements UI</span>
    <span class="n">Social</span><span class="p">.</span><span class="n">ShowAchievementsUI</span><span class="p">();</span>
</pre></div>

<p>This will show a standard UI appropriate for the look and feel of the platform 
(Android or iOS).</p>

<h2>
<a name="user-content-showing-the-leaderboard-ui" class="anchor" href="#showing-the-leaderboard-ui" aria-hidden="true"><span class="octicon octicon-link"></span></a>Showing the Leaderboard UI</h2>

<p>To show the built-in UI for all leaderboards, call <strong>Social.ShowLeaderboardUI</strong>.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// show leaderboard UI</span>
    <span class="n">Social</span><span class="p">.</span><span class="n">ShowLeaderboardUI</span><span class="p">();</span>
</pre></div>

<p>If you wish to show a particular leaderboard instead of all leaderboards, you 
can pass a leaderboard ID to the method. This, however, is a Play Games 
extension, so the Social.Active object needs to be cast to a PlayGamesPlatform 
object first:</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="p">...</span>
    <span class="c1">// show leaderboard UI</span>
    <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">ShowLeaderboardUI</span><span class="p">(</span><span class="s">"Cfji293fjsie_QA"</span><span class="p">);</span>
</pre></div>

<h2>
<a name="user-content-saving-game-state-to-the-cloud" class="anchor" href="#saving-game-state-to-the-cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Saving Game State to the Cloud</h2>

<p>To save game state to the cloud, use the <strong>PlayGamesPlatform.UpdateState</strong> 
method.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">GooglePlayGames.BasicApi</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="n">OnStateLoadedListener</span> <span class="p">{</span>
        <span class="k">void</span> <span class="nf">SaveState</span><span class="p">()</span> <span class="p">{</span>
            <span class="c1">// serialize your game state to a byte array:</span>
            <span class="kt">byte</span><span class="p">[]</span> <span class="n">mySaveState</span> <span class="p">=</span> <span class="p">...;</span>
            <span class="kt">int</span> <span class="n">slot</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="c1">// slot number to use</span>
            <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">UpdateState</span><span class="p">(</span><span class="n">slot</span><span class="p">,</span>
                <span class="n">mySaveState</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">OnStateSaved</span><span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">,</span> <span class="kt">int</span> <span class="n">slot</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// handle success or failure</span>
        <span class="p">}</span>
        <span class="p">...</span>
</pre></div>

<p>The <strong>OnStateSaved</strong> method of the <strong>OnStateLoadedListener</strong> will be called to 
indicate the success or failure of the cloud save operation.</p>

<h2>
<a name="user-content-loading-game-state-from-the-cloud" class="anchor" href="#loading-game-state-from-the-cloud" aria-hidden="true"><span class="octicon octicon-link"></span></a>Loading Game State from the Cloud</h2>

<p>To load game state from the cloud, use the <strong>PlayGamesPlatform.LoadState</strong> 
method:<br></p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">GooglePlayGames.BasicApi</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="n">OnStateLoadedListener</span> <span class="p">{</span>
        <span class="k">void</span> <span class="nf">LoadState</span><span class="p">()</span> <span class="p">{</span>
            <span class="kt">int</span> <span class="n">slot</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="c1">// slot number to use</span>
            <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">LoadState</span><span class="p">(</span><span class="n">slot</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">void</span> <span class="nf">OnStateLoaded</span><span class="p">(</span><span class="kt">bool</span> <span class="n">success</span><span class="p">,</span> <span class="kt">int</span> <span class="n">slot</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">// do something with data[]</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="c1">// handle failure</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="p">....</span>
</pre></div>

<h2>
<a name="user-content-resolving-state-conflicts" class="anchor" href="#resolving-state-conflicts" aria-hidden="true"><span class="octicon octicon-link"></span></a>Resolving State Conflicts</h2>

<p>A conflict happens when a device attempts to save state to the cloud but the 
data currently on the cloud was written by a different device. When this 
condition occurs, the OnStateConflict method of your OnStateLoadedListener will 
be called, and you choose between (or merge) the two states and return a new 
byte array representing the resolved state:<br></p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">GooglePlayGames.BasicApi</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">MyClass</span> <span class="p">:</span> <span class="n">OnStateLoadedListener</span> <span class="p">{</span>
        <span class="k">public</span> <span class="kt">byte</span><span class="p">[]</span> <span class="nf">OnStateConflict</span><span class="p">(</span><span class="kt">int</span> <span class="n">slot</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="n">local</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="n">server</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// resolve conflict and return a byte[] representing the</span>
            <span class="c1">// resolved state.</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>

<h2>
<a name="user-content-using-the-cloud-cache-encryption-hook" class="anchor" href="#using-the-cloud-cache-encryption-hook" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the Cloud Cache Encryption Hook</h2>

<p>When the user is offline, cloud save data is stored locally on the device for later
synchronization. On Android, this cache is maintained by the Google Play Services
application. However, on iOS, the cache is implemented by the plugin itself by
writing to files. If you are concerned that a malicious user might try to tamper with
those cache files, you can install an encryption/decryption hook to provide code
that the plugin will use to encrypt the buffer before it is written to disk and
decrypt it once it is read from disk.</p>

<p><strong>Important:</strong> the encryption/decryption hook will be called only when
saving files to local disk on operating systems where this feature is not
already provided by the underlying library (currently, only iOS). Data
will <strong>not</strong> be encrypted using this method when saved to the server.</p>

<div class="highlight highlight-csharp"><pre>    <span class="c1">// Define our encrypter/decrypter method:</span>
    <span class="kt">byte</span><span class="p">[]</span> <span class="nf">MyEncrypter</span><span class="p">(</span><span class="kt">bool</span> <span class="n">encrypt</span><span class="p">,</span> <span class="kt">byte</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">encrypt</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// data[] is the plain data that we must encrypt.</span>
            <span class="kt">byte</span><span class="p">[]</span> <span class="n">encryptedData</span> <span class="p">=</span> <span class="p">....;</span> <span class="c1">// your encryption code here</span>
            <span class="k">return</span> <span class="n">encryptedData</span><span class="p">;</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// data[] is the encrypted data that we must decrypt.</span>
            <span class="kt">byte</span><span class="p">[]</span> <span class="n">plainData</span> <span class="p">=</span> <span class="p">....;</span> <span class="c1">// your decryption code here</span>
            <span class="k">return</span> <span class="n">plainData</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="c1">// Set the cloud cache encrypter/decrypter</span>
    <span class="c1">// (Do this on your initialization, before attempting to sign in,</span>
    <span class="c1">// but after calling PlayGamesPlatform.Activate())</span>
    <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">SetCloudCacheEncrypter</span><span class="p">(</span><span class="n">MyEncrypter</span><span class="p">);</span>
</pre></div>

<h2>
<a name="user-content-multiplayer" class="anchor" href="#multiplayer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Multiplayer</h2>

<p>If you wish to integrate <strong>turn-based multiplayer</strong> in your game, refer to the 
<a href="TBMP.md">Getting Started with Turn-Based Multiplayer</a>.</p>

<p>If you wish to integrate <strong>real-time multiplayer</strong> in your game, refer to the 
<a href="RTMP.md">Getting Started with Real-Time Multiplayer</a>.</p>

<h2>
<a name="user-content-sign-out" class="anchor" href="#sign-out" aria-hidden="true"><span class="octicon octicon-link"></span></a>Sign out</h2>

<p>To sign the user out, use the <strong>PlayGamesPlatform.SignOut</strong> method.</p>

<div class="highlight highlight-csharp"><pre>    <span class="k">using</span> <span class="nn">GooglePlayGames</span><span class="p">;</span>
    <span class="k">using</span> <span class="nn">UnityEngine.SocialPlatforms</span><span class="p">;</span>

    <span class="c1">// sign out</span>
    <span class="p">((</span><span class="n">PlayGamesPlatform</span><span class="p">)</span> <span class="n">Social</span><span class="p">.</span><span class="n">Active</span><span class="p">).</span><span class="n">SignOut</span><span class="p">();</span>
</pre></div>

<p>After signing out, no further API calls can be made until the user authenticates again.</p>

<h2>
<a name="user-content-building-for-android" class="anchor" href="#building-for-android" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building for Android</h2>

<p>To build your game for Android, do as you would normally do in Unity. Select 
<strong>File | Build Settings</strong>, then select the <strong>Android</strong> platform and build. If 
you are signing your APK file, please make sure that you are signing it with the 
correct certificate, that is, the one that corresponds to the SHA1 certificate 
fingerprint you entered in the Developer Console during the setup.</p>

<h2>
<a name="user-content-building-for-ios" class="anchor" href="#building-for-ios" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building for iOS</h2>

<p>To build your game for iOS, do as you would normally do in Unity. Select <strong>File | Build Settings</strong>, then select the <strong>iOS</strong> platform.
Click <strong>Player Settings</strong> and make sure that the target iOS platform is 6.0 or above.</p>

<p>Then, click <strong>Build</strong> and select an output directory to save the XCode project. Do not use
the <strong>Build and Run</strong> option, since there are some manual steps you must take in
the XCode project before your project can run.</p>

<p>After building the XCode project, the Play Games postprocessor will run to 
configure the Info.plist settings on your project. You will see a log of the 
operation, which if successful, will give you additional instructions to finish 
configuring your XCode project.</p>

<p>The additional steps are:</p>

<ol class="task-list">
<li>Add these frameworks. To do this, click the top-level project (the item on the
list labeled <strong>Unity-iPhone, 1 target, iOS SDK</strong>), then click the <strong>Build Phases</strong>
tab and expand the <strong>Link Binary with Libraries</strong> item. Then, add the following
frameworks to that list:
<br><br><strong>AddressBook.framework</strong><br><strong>AssetsLibrary.framework</strong><br><strong>CoreData</strong><br><strong>CoreLocation</strong><br><strong>CoreMotion</strong><br><strong>CoreText</strong><br><strong>MediaPlayer</strong><br><strong>QuartzCore</strong><br><strong>Security</strong><br><strong>SystemConfiguration</strong><br><br><strong>libc++.dylib</strong><br><br>
</li>
<li>Add the following bundles and frameworks from the Google Plus and Google Play 
Games SDK that you have previously downloaded. If you have not downloaded 
these files yet, they can be found <a href="https://developers.google.com/games/services/downloads">in the downloads section</a> of the Google Play Games developer site. To add these frameworks you can simply drag
and drop those 5 files on the top-level project item (labeled <strong>Unity-iPhone</strong>).<br><br><strong>GoogleOpenSource.framework</strong><br><strong>GooglePlus.bundle</strong><br><strong>GooglePlus.framework</strong><br><strong>PlayGameServices.bundle</strong><br><strong>PlayGameServices.framework</strong><br><br>
</li>
<li>Add the <strong>"-ObjC"</strong> linker flag. To do this, select the top-level project 
object, then go to the <strong>Build Settings</strong>
tab. Search for <strong>"Other Linker Flags"</strong> using the search tool, double click
the <strong>Other Linker Flags</strong> item and add <strong>"-ObjC"</strong> to that list (attention to case!).</li>
</ol><p><strong>Note:</strong> If you export the project a second time to the same XCode project 
directory, you can use Unity's <strong>Append</strong> option to avoid overwriting these 
settings. If you use <strong>Replace</strong>, however, you might have to reapply some settings.</p>

<h2>
<a name="user-content-common-build-errors-on-ios" class="anchor" href="#common-build-errors-on-ios" aria-hidden="true"><span class="octicon octicon-link"></span></a>Common Build Errors on iOS</h2>

<p><strong>"The current deployment target does not support automated _weak references"</strong>. Make sure your target iOS platform is 6.0 or above. If the target platform is below 6.0, this error will occur during build.</p>

<p><strong>"Dsymutil error"</strong>. Depending on your version of XCode, you may need to disable dSYM file generation. To do this, go to Build Settings |
Build Options | Debug Information Format | Debug. Select <strong>DWARF</strong> instead of <strong>DWARF with dSYM</strong>.</p>

<p><strong>URL errors while signing in.</strong> This is often a sign that either the client ID or the Bundle Identifier is not correctly set up, or that your <strong>Info.plist</strong> file got corrupted. Check that your client ID and Bundle ID are correctly configured in the project and that they correspond to the data in the Developer Console.</p>

<h2>
<a name="user-content-building-for-ios-to-run-on-the-simulator" class="anchor" href="#building-for-ios-to-run-on-the-simulator" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building for iOS to run on the simulator</h2>

<p>To run your game in the simulator as opposed to a real device, you must export 
it from Unity with the "Simulator SDK" instead of the "Device SDK". To do this, 
open your game project in Unity, select <strong>File | Build Settings</strong>, select iOS, 
then click on <strong>Player Settings</strong>. Scroll down to find the <strong>"SDK Version"</strong> 
option, and change it to <strong>"Simulator SDK".</strong></p>

<p>Then, export your project and perform the post-export steps as described above.</p>

<p>Next, you must manually enable some API entry points that are used by the 
plugin, but which are by default disabled in the Unity runtime code. To do 
this, open the <strong>Libraries/RegisterMonoModule.cpp</strong> file in your exported project.</p>

<p>You will notice there are two sections near the top of the file that<br>
are delimited by <strong>#if !(TARGET_IPHONE_SIMULATOR)</strong> and** #endif**.</p>

<div class="highlight highlight-c"><pre>    <span class="k">extern</span> <span class="s">"C"</span> <span class="p">{</span>
        <span class="p">....</span>
<span class="cp">        #if !(TARGET_IPHONE_SIMULATOR)</span>
            <span class="p">...</span><span class="n">declarations</span><span class="p">...</span> <span class="p">(</span><span class="n">zone</span> <span class="n">A</span><span class="p">)</span>
<span class="cp">        #endif</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">RegisterMonoModules</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="p">...</span>
<span class="cp">        #if !(TARGET_IPHONE_SIMULATOR)</span>
            <span class="p">...</span><span class="n">function</span> <span class="n">calls</span><span class="p">...</span> <span class="p">(</span><span class="n">zone</span> <span class="n">B</span><span class="p">)</span>
<span class="cp">        #endif</span>
    <span class="p">}</span>
</pre></div>

<p><br>
To enable the simulator to make the necessary C function calls, you need to:</p>

<ol class="task-list">
<li>Find the line that declares the <strong>mono_dl_register_symbol()</strong> function in 
<strong>Zone A</strong>.</li>
<li>Move it to the outside of <strong>Zone A</strong>, right after the <strong>#endif</strong> (but still 
inside the <strong>extern "C"</strong> block)</li>
<li>Find ALL the calls to <strong>mono_dl_register_symbol()</strong> in <strong>Zone B</strong>.</li>
<li>Move them ALL outside <strong>Zone B</strong>, after the <strong>#endif</strong> (but still inside the 
<strong>RegisterMonoModules()</strong> function).</li>
</ol><p>The final structure should be similar to the following:</p>

<div class="highlight highlight-c"><pre>    <span class="k">extern</span> <span class="s">"C"</span> <span class="p">{</span>
        <span class="p">....</span>
<span class="cp">        #if !(TARGET_IPHONE_SIMULATOR)</span>
            <span class="p">..</span> <span class="n">declarations</span> <span class="p">..</span> <span class="p">(</span><span class="n">zone</span> <span class="n">A</span><span class="p">)</span>
<span class="cp">        #endif</span>
        <span class="kt">void</span> <span class="n">mono_dl_register_symbol</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">,</span> <span class="kt">void</span> <span class="o">*</span><span class="n">addr</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="kt">void</span> <span class="n">RegisterMonoModules</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="p">...</span>
<span class="cp">        #if !(TARGET_IPHONE_SIMULATOR)</span>
            <span class="p">...</span><span class="n">function</span> <span class="n">calls</span><span class="p">...</span> <span class="p">(</span><span class="n">zone</span> <span class="n">B</span><span class="p">)</span>
<span class="cp">        #endif</span>
        <span class="n">mono_dl_register_symbol</span><span class="p">(</span><span class="s">"GPGSFooBar1"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">GPGSFooBar1</span><span class="p">);</span>
        <span class="n">mono_dl_register_symbol</span><span class="p">(</span><span class="s">"GPGSFooBar2"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">GPGSFooBar2</span><span class="p">);</span>
        <span class="n">mono_dl_register_symbol</span><span class="p">(</span><span class="s">"GPGSFooBar3"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">GPGSFooBar3</span><span class="p">);</span>
        <span class="n">mono_dl_register_symbol</span><span class="p">(</span><span class="s">"GPGSFooBar4"</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span><span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">GPGSFooBar4</span><span class="p">);</span>
        <span class="p">....</span>
    <span class="p">}</span>
</pre></div>

<p><strong>Note:</strong> If you are using the current version of Unity (4.2), re-exporting to an existing 
XCode project path will overwrite <strong>Libraries/RegisterMonoModule.cpp</strong>, even if 
you use the <strong>Append</strong> option. Therefore, you must perform these changes every time 
you export the project. To simplify your workflow, consider copying the files to 
a different location before re-exporting, and copy them back after the process 
is complete.</p>

<h2>
<a name="user-content-advanced-using-the-plugin-without-overriding-the-default-social-platform" class="anchor" href="#advanced-using-the-plugin-without-overriding-the-default-social-platform" aria-hidden="true"><span class="octicon octicon-link"></span></a>(Advanced) Using the Plugin Without Overriding the Default Social Platform</h2>

<p>When you call <code>PlayGamesPlatform.Activate</code>, Google Play Games becomes your default social platform implementation, which means that static calls to methods in <code>Social</code> and <code>Social.Active</code> will be carried out by the Google Play Games plugin. This is the desired behavior for most games using the plugin.</p>

<p>However, if for some reason you wish to keep the default implementation accessible (for example, to use it to submit achievements and leaderboards to a different social platform), you can use the Google Play Games plugin without overriding the default one. To do this:</p>

<ol class="task-list">
<li>Do not call <code>PlayGamesPlatform.Activate</code>
</li>
<li>If <code>Xyz</code> is the name of a method you wish to call on the <code>Social</code> class, do not call <code>Social.Xyz</code>. Instead, call <code>PlayGamesPlatform.Instance.Xyz</code>
</li>
<li>Do not use <code>Social.Active</code> when interacting with Google Play Games. Instead, use <code>PlayGamesPlatform.Instance</code>.</li>
</ol><p>That way, you can even submit scores and achievements simultaneously to two or more social platforms:</p>

<pre><code>// Submit achievement to original default social platform
Social.ReportProgress("MyAchievementIdHere", 100.0f, callback);

// Submit achievement to Google Play
PlayGamesPlatform.Instance.ReportProgress("MyGooglePlayAchievementIdHere", 100.0f, callback);
</code></pre>

<h2>
<a name="user-content-using-production-apns-certificate-ios" class="anchor" href="#using-production-apns-certificate-ios" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Production APNS Certificate (iOS)</h2>

<p>In the <code>GPGSAppController.m</code> file, you will notice within the <code>application:didRegisterForRemoteNotificationsWithDeviceToken</code> method that there are two calls;
one for using a push notification in the sandbox environment, and one for using a push notification in the production environment. You should make sure to 
comment the first call (and uncomment the second) when you're ready to switch to a production environment and push notification.</p>

<h2>
<a name="user-content-note-from-maintainer" class="anchor" href="#note-from-maintainer" aria-hidden="true"><span class="octicon octicon-link"></span></a>Note from Maintainer</h2>

<p>The plugin was developed and is currently maintained by <a href="https://plus.google.com/+BrunoOliveira">Bruno Oliveira</a>. Feel free to add me on Google+ and nag me to fix bugs or take a look at your questions on Stack Overflow!</p>

<h2>
<a name="user-content-acknowledgements" class="anchor" href="#acknowledgements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Acknowledgements</h2>

<p>The iOS library makes use of the <a href="https://gist.github.com/darktable/1411710">MiniJSON.cs</a> class developed by Calvin Rien (originally based on a parser by Patrick van Bergen), 
available under the MIT License.</p>

<h2>
<a name="user-content-special-thanks" class="anchor" href="#special-thanks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Special Thanks</h2>

<p>This section lists people who have contributed to this project by writing code, improving documentation or fixing bugs.</p>

<ul class="task-list">
<li>
<a href="https://github.com/Dgizusse">Dgizusse</a> for figuring out that setting JAVA_HOME is necessary on Windows.</li>
<li>
<a href="https://github.com/antonlicht">antonlicht</a> for fixing a bug with the parameter type of showErrorDialog on the support library.</li>
<li>
<a href="https://github.com/pR0Ps">pR0Ps</a> for fixing an issue where OnAchievementsLoaded was not accepting an OPERATION_DEFERRED result code as a success.</li>
<li>
<a href="https://github.com/friikyeu">friikyeu</a> for helping debug <a href="https://github.com/playgameservices/play-games-plugin-for-unity/issues/25">an issue</a> that caused API calls to be queued up rather than executed even when connected.</li>
</ul></article></div>
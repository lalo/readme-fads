<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-wraith" class="anchor" href="#wraith" aria-hidden="true"><span class="octicon octicon-link"></span></a>Wraith</h1>

<p><a href="http://travis-ci.org/BBC-News/wraith"><img src="https://camo.githubusercontent.com/49e8ab236e207a54203d311d3c5dff2a3b2138bc/68747470733a2f2f7365637572652e7472617669732d63692e6f72672f4242432d4e6577732f7772616974682e706e673f6272616e63683d6d6173746572" alt="Build Status" data-canonical-src="https://secure.travis-ci.org/BBC-News/wraith.png?branch=master" style="max-width:100%;"></a>
<a href="https://codeclimate.com/github/BBC-News/wraith"><img src="https://camo.githubusercontent.com/24d7e39b595ea5fe139d52511a2a41b520fafa82/68747470733a2f2f636f6465636c696d6174652e636f6d2f6769746875622f4242432d4e6577732f7772616974682e706e67" alt="Code Climate" data-canonical-src="https://codeclimate.com/github/BBC-News/wraith.png" style="max-width:100%;"></a></p>

<ul class="task-list">
<li>Website: <a href="http://responsivenews.co.uk">http://responsivenews.co.uk</a>
</li>
<li>Source: <a href="http://github.com/bbc-news/wraith">http://github.com/bbc-news/wraith</a>
</li>
</ul><p>Wraith is a screenshot comparison tool, created by developers at BBC News.</p>

<h2>
<a name="user-content-what-is-it" class="anchor" href="#what-is-it" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is it?</h2>

<p>Wraith uses either <a href="http://phantomjs.org">PhantomJS</a> or
<a href="http://slimerjs.org">SlimerJS</a> to create screen-shots of different environments
and then creates a diff of the two images, the affected areas are highlighted in
blue</p>

<p><a href="https://camo.githubusercontent.com/c854ec994f665ed493d65e5c622869b7343d952c/687474703a2f2f6262632d6e6577732e6769746875622e696f2f7772616974682f696d672f3332305f646966662e706e67" target="_blank"><img src="https://camo.githubusercontent.com/c854ec994f665ed493d65e5c622869b7343d952c/687474703a2f2f6262632d6e6577732e6769746875622e696f2f7772616974682f696d672f3332305f646966662e706e67" alt="Photo of BBC News with a
diff" data-canonical-src="http://bbc-news.github.io/wraith/img/320_diff.png" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p>Imagemagick and PhantomJS are required to use Wraith, install via your favourite package manager.  To read our detailed instructions for setup and install, as well as example configs, visit <a href="http://bbc-news.github.io/wraith/index.html">wraith docs</a></p>

<h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>Open terminal and run</p>

<pre><code>gem install wraith
</code></pre>

<p>You can then run the following to create a template snap.js and config file:</p>

<pre><code>wraith setup
</code></pre>

<p>Alternatively you can clone the repo.</p>

<pre><code>git clone https://github.com/BBC-News/wraith
cd wraith
bundle install
</code></pre>

<h2>
<a name="user-content-using-wraith" class="anchor" href="#using-wraith" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using Wraith</h2>

<p>You can type <code>wraith</code> into terminal to bring up the list of commands, but the one to start Wraith is</p>

<div class="highlight highlight-sh"><pre>wraith capture config_name
</pre></div>

<p>This assumes that your snap.js and config.yaml are in the folders that were created on setup. There are other commands also available, these all expect a config_name to be passed as an option. Wraith will look for the config file at <code>configs/[config_name].yaml</code>.  </p>

<div class="highlight highlight-sh"><pre>  wraith capture config_name             <span class="c"># A full Wraith job</span>
  wraith compare_images config_name      <span class="c"># compares images to generate diffs</span>
  wraith crop_images config_name         <span class="c"># crops images to the same height</span>
  wraith setup_folders config_name       <span class="c"># create folders for images</span>
  wraith generate_gallery config_name    <span class="c"># create page for viewing images</span>
  wraith generate_thumbnails config_name <span class="c"># create thumbnails for gallery</span>
  wraith reset_shots config_name         <span class="c"># removes all the files in the shots folder</span>
  wraith save_images config_name         <span class="c"># captures screenshots</span>
  wraith setup                           <span class="c"># creates config folder and default config</span>
</pre></div>

<h2>
<a name="user-content-output" class="anchor" href="#output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Output</h2>

<p>After each screenshot is captured, the compare task will run, this will output a diff.png and a data.txt.  The data.txt for each file will show the number of pixels that have changed.  There is a main data.txt which is in the root of the output folder that will combine all of these values to easier view all the pixel changes.</p>

<h2>
<a name="user-content-gallery" class="anchor" href="#gallery" aria-hidden="true"><span class="octicon octicon-link"></span></a>Gallery</h2>

<p>A gallery is available to view each of the images and the respective diff images located in the shots folder once all the images have been compared.</p>

<h2>
<a name="user-content-contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<p>If you want to add functionality to this project, pull requests are welcome.</p>

<ul class="task-list">
<li>Create a branch based off master and do all of your changes with in it.</li>
<li>If you have to pause to add a 'and' anywhere in the title, it should be two pull requests.</li>
<li>Make commits of logical units and describe them properly</li>
<li>Check for unnecessary whitespace with git diff --check before committing.</li>
<li>If possible, submit tests to your patch / new feature so it can be tested easily.</li>
<li>Assure nothing is broken by running all the test</li>
<li>Please ensure that it complies with coding standards.</li>
</ul><p><strong>Please raise any issues with this project as a GitHub issue.</strong></p>

<h2>
<a name="user-content-changelog---updated-2014-05-14" class="anchor" href="#changelog---updated-2014-05-14" aria-hidden="true"><span class="octicon octicon-link"></span></a>Changelog - updated 2014-05-14</h2>

<p>We have updated Wraith some bug fixes and more importantly, parallel support.  This will now enable use of all your CPU cores for faster Wraith runs.  There is error handling in place to ensure if an image fails to capture, it will try again 5 times, if that fails, it will put an holding image in place.  This should solve all the issues with images not capturing and failing to crop/compare.  Big thanks to <a href="https://github.com/mattsenior">Matt Senior</a> for doing the work.</p>

<h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Wraith is available to everyone under the terms of the Apache 2.0 open source license.
Take a look at the LICENSE file in the code.</p>

<h2>
<a name="user-content-credits" class="anchor" href="#credits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Credits</h2>

<ul class="task-list">
<li><a href="http://twitter.com/dblooman">Dave Blooman</a></li>
<li><a href="http://twitter.com/jcleveley">John Cleveley</a></li>
<li><a href="http://twitter.com/sthulbourn">Simon Thulbourn</a></li>
</ul></article></div>
<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-tttattributedlabel" class="anchor" href="#tttattributedlabel" aria-hidden="true"><span class="octicon octicon-link"></span></a>TTTAttributedLabel</h1>

<p><strong>A drop-in replacement for <code>UILabel</code> that supports attributes, data detectors, links, and more</strong></p>

<p><code>TTTAttributedLabel</code> is a drop-in replacement for <code>UILabel</code>, which provides a simple way to performantly render <a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAttributedString_Class/Reference/Reference.html">attributed strings</a>. As a bonus, it also supports link embedding, both automatically with <code>UIDataDetectorTypes</code> and manually by specifying a range for a URL, address, phone number, event, or transit information.</p>

<p>Even though <code>NSAttributedString</code> support was added for UILabel in iOS 6, <code>TTTAttributedLabel</code> has several unique features:</p>

<ul class="task-list">
<li>Compatibility with iOS &gt;= 4.3</li>
<li>Compatible with arm64 architecture when compiled with <code>$(ARCHS_STANDARD_INCLUDING_64_BIT)</code>
</li>
<li>Automatic data detection</li>
<li>Manual link embedding</li>
<li>Label style inheritance for attributed strings</li>
</ul><p>It also includes advanced paragraph style properties:</p>

<ul class="task-list">
<li><code>verticalAlignment</code></li>
<li><code>textInsets</code></li>
<li><code>firstLineIndent</code></li>
<li><code>lineSpacing</code></li>
<li><code>lineHeightMultiple</code></li>
<li><code>shadowRadius</code></li>
<li>
<code>highlightedShadowRadius</code> / <code>highlightedShadowOffset</code> / <code>highlightedShadowColor</code>
</li>
<li><code>truncationTokenString</code></li>
</ul><h3>
<a name="user-content-accessibility" class="anchor" href="#accessibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Accessibility</h3>

<p>As of version 1.10.0, <code>TTTAttributedLabel</code> supports VoiceOver, through the  <code>UIAccessibilityElement</code> protocol. Each link can be individually selected, with an <code>accessibilityLabel</code> equal to its string value, and a corresponding <code>accessibilityValue</code> for URL, phone number, and date links.  Developers who wish to change this behavior or provide custom values should create a subclass and override <code>accessibilityElements</code>.</p>

<h2>
<a name="user-content-communication" class="anchor" href="#communication" aria-hidden="true"><span class="octicon octicon-link"></span></a>Communication</h2>

<ul class="task-list">
<li>If you <strong>need help</strong>, use <a href="http://stackoverflow.com/questions/tagged/tttattributedlabel">Stack Overflow</a>. (Tag 'tttattributedlabel')</li>
<li>If you'd like to <strong>ask a general question</strong>, use <a href="http://stackoverflow.com/questions/tagged/tttattributedlabel">Stack Overflow</a>.</li>
<li>If you <strong>found a bug</strong>, open an issue.</li>
<li>If you <strong>have a feature request</strong>, open an issue.</li>
<li>If you <strong>want to contribute</strong>, submit a pull request.</li>
</ul><h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p><a href="http://cocoapods.org">CocoaPods</a> is the recommended method of installing TTTAttributedLabel. Simply add the following line to your <code>Podfile</code>:</p>

<h4>
<a name="user-content-podfile" class="anchor" href="#podfile" aria-hidden="true"><span class="octicon octicon-link"></span></a>Podfile</h4>

<div class="highlight highlight-ruby"><pre><span class="n">pod</span> <span class="s1">'TTTAttributedLabel'</span>
</pre></div>

<h2>
<a name="user-content-usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<div class="highlight highlight-objective-c"><pre><span class="n">TTTAttributedLabel</span> <span class="o">*</span><span class="n">label</span> <span class="o">=</span> <span class="p">[[</span><span class="n">TTTAttributedLabel</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame</span><span class="p">:</span><span class="n">CGRectZero</span><span class="p">];</span>
<span class="n">label</span><span class="p">.</span><span class="n">font</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIFont</span> <span class="nl">systemFontOfSize</span><span class="p">:</span><span class="mi">14</span><span class="p">];</span>
<span class="n">label</span><span class="p">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">darkGrayColor</span><span class="p">];</span>
<span class="n">label</span><span class="p">.</span><span class="n">lineBreakMode</span> <span class="o">=</span> <span class="n">UILineBreakModeWordWrap</span><span class="p">;</span>
<span class="n">label</span><span class="p">.</span><span class="n">numberOfLines</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="bp">NSString</span> <span class="o">*</span><span class="n">text</span> <span class="o">=</span> <span class="s">@"Lorem ipsum dolar sit amet"</span><span class="p">;</span>
<span class="p">[</span><span class="n">label</span> <span class="nl">setText</span><span class="p">:</span><span class="n">text</span> <span class="nl">afterInheritingLabelAttributesAndConfiguringWithBlock</span><span class="p">:</span><span class="o">^</span> <span class="bp">NSMutableAttributedString</span> <span class="o">*</span><span class="p">(</span><span class="bp">NSMutableAttributedString</span> <span class="o">*</span><span class="n">mutableAttributedString</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">NSRange</span> <span class="n">boldRange</span> <span class="o">=</span> <span class="p">[[</span><span class="n">mutableAttributedString</span> <span class="n">string</span><span class="p">]</span> <span class="nl">rangeOfString</span><span class="p">:</span><span class="s">@"ipsum dolar"</span> <span class="nl">options</span><span class="p">:</span><span class="n">NSCaseInsensitiveSearch</span><span class="p">];</span>
  <span class="n">NSRange</span> <span class="n">strikeRange</span> <span class="o">=</span> <span class="p">[[</span><span class="n">mutableAttributedString</span> <span class="n">string</span><span class="p">]</span> <span class="nl">rangeOfString</span><span class="p">:</span><span class="s">@"sit amet"</span> <span class="nl">options</span><span class="p">:</span><span class="n">NSCaseInsensitiveSearch</span><span class="p">];</span>

  <span class="c1">// Core Text APIs use C functions without a direct bridge to UIFont. See Apple's "Core Text Programming Guide" to learn how to configure string attributes.</span>
  <span class="bp">UIFont</span> <span class="o">*</span><span class="n">boldSystemFont</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIFont</span> <span class="nl">boldSystemFontOfSize</span><span class="p">:</span><span class="mi">14</span><span class="p">];</span>
  <span class="n">CTFontRef</span> <span class="n">font</span> <span class="o">=</span> <span class="n">CTFontCreateWithName</span><span class="p">((</span><span class="k">__bridge</span> <span class="n">CFStringRef</span><span class="p">)</span><span class="n">boldSystemFont</span><span class="p">.</span><span class="n">fontName</span><span class="p">,</span> <span class="n">boldSystemFont</span><span class="p">.</span><span class="n">pointSize</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">font</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">mutableAttributedString</span> <span class="nl">addAttribute</span><span class="p">:(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">kCTFontAttributeName</span> <span class="nl">value</span><span class="p">:(</span><span class="kt">id</span><span class="p">)</span><span class="n">font</span> <span class="nl">range</span><span class="p">:</span><span class="n">boldRange</span><span class="p">];</span>
    <span class="p">[</span><span class="n">mutableAttributedString</span> <span class="nl">addAttribute</span><span class="p">:</span><span class="n">kTTTStrikeOutAttributeName</span> <span class="nl">value</span><span class="p">:[</span><span class="bp">NSNumber</span> <span class="nl">numberWithBool</span><span class="p">:</span><span class="nb">YES</span><span class="p">]</span> <span class="nl">range</span><span class="p">:</span><span class="n">strikeRange</span><span class="p">];</span>
    <span class="n">CFRelease</span><span class="p">(</span><span class="n">font</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">mutableAttributedString</span><span class="p">;</span>
<span class="p">}];</span>
</pre></div>

<p>First, we create and configure the label, the same way you would instantiate <code>UILabel</code>. Any text properties that are set on the label are inherited as the base attributes when using the <code>-setText:afterInheritingLabelAttributesAndConfiguringWithBlock:</code> method. In this example, the substring "ipsum dolar", would appear in bold, such that the label would read "Lorem <strong>ipsum dolar</strong> sit amet", in size 14 Helvetica, with a dark gray color.</p>

<p>The normal <code>setText:</code> setter accepts both <code>NSString</code> and <code>NSAttributedString</code>; in the latter case, the attributed string is directly set, without inheriting the base style of the label.</p>

<h3>
<a name="user-content-links-and-data-detection" class="anchor" href="#links-and-data-detection" aria-hidden="true"><span class="octicon octicon-link"></span></a>Links and Data Detection</h3>

<p>In addition to supporting rich text, <code>TTTAttributedLabel</code> allows you to automatically detect links for dates, addresses, links, phone numbers, transit information, or allow you to embed your own.</p>

<div class="highlight highlight-objective-c"><pre><span class="n">label</span><span class="p">.</span><span class="n">enabledTextCheckingTypes</span> <span class="o">=</span> <span class="n">NSTextCheckingTypeLink</span><span class="p">;</span> <span class="c1">// Automatically detect links when the label text is subsequently changed</span>
<span class="n">label</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span> <span class="c1">// Delegate methods are called when the user taps on a link (see `TTTAttributedLabelDelegate` protocol)</span>

<span class="n">label</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">@"Fork me on GitHub! (http://github.com/mattt/TTTAttributedLabel/)"</span><span class="p">;</span> <span class="c1">// Repository URL will be automatically detected and linked</span>

<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="p">[</span><span class="n">label</span><span class="p">.</span><span class="n">text</span> <span class="nl">rangeOfString</span><span class="p">:</span><span class="s">@"me"</span><span class="p">];</span>
<span class="p">[</span><span class="n">label</span> <span class="nl">addLinkToURL</span><span class="p">:[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@"http://github.com/mattt/"</span><span class="p">]</span> <span class="nl">withRange</span><span class="p">:</span><span class="n">range</span><span class="p">];</span> <span class="c1">// Embedding a custom link in a substring</span>
</pre></div>

<h2>
<a name="user-content-demo" class="anchor" href="#demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Demo</h2>

<p>Build and run the <code>TTTAttributedLabelExample</code> project in Xcode to see <code>TTTAttributedLabel</code> in action.</p>

<h2>
<a name="user-content-requirements" class="anchor" href="#requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>Requirements</h2>

<p><code>TTTAttributedLabel</code> is compatible with iOS 4.3+ as a deployment target, but must be compiled using the iOS 6 SDK, or higher. If you get compiler errors for undefined constants, try upgrading to the latest version of Xcode, and updating your project to the recommended build settings.</p>

<p><code>TTTAttributedLabel</code> also requires the <code>CoreText</code> and <code>Core Graphics</code> frameworks. If you're installing with CocoaPods these frameworks will automatically be linked for you, otherwise you will have to add them to your project.</p>

<p>For <code>arm64</code> compatibility, you must compile your project with the iOS 7 SDK.</p>

<h2>
<a name="user-content-contact" class="anchor" href="#contact" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact</h2>

<p>Mattt Thompson</p>

<ul class="task-list">
<li><a href="http://github.com/mattt">http://github.com/mattt</a></li>
<li><a href="http://twitter.com/mattt">http://twitter.com/mattt</a></li>
<li><a href="mailto:m@mattt.me">m@mattt.me</a></li>
</ul><h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>TTTAttributedLabel is available under the MIT license. See the LICENSE file for more info.</p></article></div>
<div class="announce instapaper_body rdoc" data-path="README.rdoc" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage">
<p><a href="https://camo.githubusercontent.com/08b4ff444a4933472c3bf980547b18be87e6a26b/687474703a2f2f626c7565686561647075626c697368696e672e636f6d2f6173736574732f626f6f6b73686f705f6865726f2e6a7067" target="_blank"><img src="https://camo.githubusercontent.com/08b4ff444a4933472c3bf980547b18be87e6a26b/687474703a2f2f626c7565686561647075626c697368696e672e636f6d2f6173736574732f626f6f6b73686f705f6865726f2e6a7067" data-canonical-src="http://blueheadpublishing.com/assets/bookshop_hero.jpg" style="max-width:100%;"></a></p>

<p>Bookshop is a an open-source agile book development and publishing
framework for authors, editors, publishers and coders in today's
publishing industry. Bookshop provides best-practices for developing your
books in HTML/CSS/JS, allowing them to be transformed into potentially any
book format (Print-PDF, Online-PDF, mobi, ePub, etc.).</p>

<p>A conceptual overview of bookshop: <a href="http://blueheadblog.blogspot.com/2012/03/announcing-bookshop-html-to-pdf-ebook.html">blueheadblog.blogspot.com/2012/03/announcing-bookshop-html-to-pdf-ebook.html</a></p>

<p>bookshop hopes to simplify the book publishing toolchain by:</p>
<ul>
<li>
<p>using industry standards tools like HTML5, CSS, and JS to make the creation
of your book comfortable and familiar, greatly reducing the learning curve
for your developers, authors, agents, and other team members</p>
</li>
<li>
<p>separating the “book” into its logical parts:</p>
<ul>
<li>
<p><b>Content</b> via HTML5 (the actual words, grammar, tense, etc.)</p>
</li>
<li>
<p><b>Structure</b> via Boom! Microformat (chapters, sections, dedication,
preface, etc.)</p>
</li>
<li>
<p><b>Style</b> via CSS3 and JS (layout, design, typeset)</p>
</li>
<li>
<p><b>Format</b> (pdf, mobi, epub, html)</p>
</li>
</ul>
</li>
<li>
<p>providing a Ruby Gem to make the building of your book as easy as _gem
install bookshop_</p>
</li>
<li>
<p>pulling all the publishing tools together into one place (princexml,
kindlegen, epubcheck)</p>
</li>
<li>
<p>giving the developer a set of scripts to automate the redundant stuff</p>
</li>
<li>
<p>providing an architecture/structure that follows best-practices and
simplification (DRY… Don't Repeat Yourself)</p>
</li>
</ul><h2>
<a name="user-content-getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a name="user-content-system-requirements" class="anchor" href="#system-requirements" aria-hidden="true"><span class="octicon octicon-link"></span></a>System Requirements</h3>
<ul>
<li>
<p>Ruby v1.8.7 or higher <a href="http://www.ruby-lang.org/en/downloads">www.ruby-lang.org/en/downloads</a>/</p>
</li>
<li>
<p>Java 1.5 or higher <a href="http://www.java.com/en">www.java.com/en</a>/</p>
</li>
</ul><h2>
<a name="user-content-installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>For detailed installation instructions for your particular platform, please
see this link:</p>

<p><a href="https://github.com/blueheadpublishing/bookshop/wiki/Setting-Up-Your-bookshop-Environment">github.com/blueheadpublishing/bookshop/wiki/Setting-Up-Your-bookshop-Environment</a></p>

<h3>
<a name="user-content-install-bookshop" class="anchor" href="#install-bookshop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install bookshop</h3>

<pre>$ gem install bookshop</pre>

<h3>
<a name="user-content-install-princexml" class="anchor" href="#install-princexml" aria-hidden="true"><span class="octicon octicon-link"></span></a>Install PrinceXML</h3>

<p>Go to PrinceXML website and follow the install instructions</p>

<p><a href="http://www.princexml.com/download">www.princexml.com/download</a></p>

<h2>
<a name="user-content-using-bookshop" class="anchor" href="#using-bookshop" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using bookshop</h2>

<h3>
<a name="user-content-create-a-bookshop-book" class="anchor" href="#create-a-bookshop-book" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a bookshop book</h3>

<pre>$ bookshop new my_new_book</pre>

<p>This will create a new bookshop book project in /path/to/my_new_book with
the following structure:</p>

<pre>|-- book/                 # Source files for your book
    |--book.html.erb      # The master file
    |--frontmatter/       # Content at the front of the book (cover, title, preface, etc.)
    |--bodymatter/        # Main content of book (chapters, sections, etc.)
    |--backmatter/        # Content at the back of the book (appendix, index, etc.)
    |--assets/
        |--css/
            |--stylesheet.pdf.css
        |--images/
        |--js/
    |--epub/              # epub specific files and contents
        |--META-INF/
        |--mimetype
        |--OEBPS/
            |--content.opf.erb
            |--toc.ncx.erb

|-- builds/               # All the builds are created here
    |--epub/
    |--html/
    |--mobi/
    |--pdf/

|-- config/               # Your config and data settings
    |--book.yml           # Settings/Data for your book</pre>

<h3>
<a name="user-content-editing-your-new-book" class="anchor" href="#editing-your-new-book" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing Your New Book</h3>

<h4>
<a name="user-content-editing-your-book-source" class="anchor" href="#editing-your-book-source" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing your book source</h4>

<p>Currently, when you create a new bookshop project, it will generate the
example book source for you. You can use this as a template, replacing the
text with your own. But make sure to utilize the correct CSS microformat
markup.</p>

<p>For an explanation of the example, please see this article. - <a href="http://www.alistapart.com/articles/boom">www.alistapart.com/articles/boom</a></p>

<p>All of the source documents and assets for your book are stored in the
<tt>book/</tt> folder. So your stylesheets, images, text - everything used
for building your book - lives here. Ideally, you should only every edit
files in your <tt>book/</tt> folder (with the exception of your
config/book.yml file).</p>

<h4>
<a name="user-content-why-do-the-source-files-end-with-erb" class="anchor" href="#why-do-the-source-files-end-with-erb" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why do the Source files end with <tt>.erb</tt>?</h4>

<p>The source files are all in ERB. ERB is a templating language for the Ruby
programming language. Why is this cool? Because it means that you can use
HTML <em>and</em> you can embed Ruby code in your source files. In other
words, you can do all kinds of cool programmy things. Like embed ruby
functions and calls:</p>

<pre>&lt;p&gt;Today is &lt;%= Time.now.strftime('%A') %&gt;.&lt;/p&gt;  # creates -&gt; &lt;p&gt;Today is Thursday.&lt;/p&gt;</pre>

<p>More information on ERB - <a href="http://www.ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html">www.ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html</a></p>

<h4>
<a name="user-content-the-master-file-bookhtmlerb" class="anchor" href="#the-master-file-bookhtmlerb" aria-hidden="true"><span class="octicon octicon-link"></span></a>The master file book.html.erb</h4>

<p>Your master file (from which everything is built) is the
<tt>book.html.erb</tt> file (remember that we are in the <tt>book/</tt>
folder). You could of course just use this file and put all of your book
contents here, making one enormous file, but we don't recommend it…</p>

<h4>
<a name="user-content-import-files-into-your-master-file" class="anchor" href="#import-files-into-your-master-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Import files into your master file</h4>

<p>Are you writing another “War and Peace”? We've created a nice way to
make your epic book easier to manage. Rather than putting everything in the
<tt>book.html.erb</tt> file, you can <tt>import</tt> files. This allows you
to break your book up into smaller, more manageable pieces. This makes it
soooooo much easier to manage your book. And others will thank you for it..</p>

<p>You can import a file by using the import() function, for example:</p>

<pre>&lt;%= import('a_whole_chapter.html.erb') %&gt;</pre>

<p>This would import the file <tt>book/a_whole_chapter.html.erb</tt></p>

<p>You can also create sub-folders and group your files there. For example, in
your book.html.erb file you could import:</p>

<pre>&lt;%= import('bodymatter/ch01/my_first_section.html.erb') %&gt;</pre>

<p>This would import the file
<tt>book/bodymatter/ch01/my_first_section.html.erb</tt></p>

<p>Note that you can also nest import files into imported files.</p>

<p>So in your <tt>book/book.html.erb</tt></p>

<pre>&lt;%= import('bodymatter/ch01/ch01.html.erb') %&gt;</pre>

<p>and in the <tt>bodymatter/ch01/ch01.html.erb</tt> you could import more
files</p>

<pre>&lt;%= import('bodymatter/ch01/first_section.html.erb') %&gt;
&lt;%= import('bodymatter/ch01/second_section.html.erb') %&gt;</pre>

<h4>
<a name="user-content-use-the-output-tag-to-create-content-based-on-output-pdfhtmlepubetc" class="anchor" href="#use-the-output-tag-to-create-content-based-on-output-pdfhtmlepubetc" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use the @output tag to create content based on output (pdf/html/epub/etc.)</h4>

<p>So what if you want to create content for certain builds only? Let's
say you want a certain section of your book to only be included in the pdf
version of your book.</p>

<p>No worries. We've created the handy Output Variable (@output) for you
to use in this case… aren't we special?</p>

<p>Currently we have three attributes you can call with @output - :html, :pdf,
and :epub.</p>

<p>Let's generate a section that will only be displayed in the pdf version
of your book, using a conditional statement (remember, everything is ERB,
so we can use Ruby):</p>

<pre>&lt;% if @output == :pdf %&gt;
  &lt;p&gt;This is a pdf-only section&lt;/p&gt;
&lt;% end %&gt;</pre>

<h4>
<a name="user-content-use-book-tags-to-reuse-content-throughout-all-book-formats-the-configbookyml-file" class="anchor" href="#use-book-tags-to-reuse-content-throughout-all-book-formats-the-configbookyml-file" aria-hidden="true"><span class="octicon octicon-link"></span></a>Use @book tags to reuse content throughout all book formats (the <tt>config/book.yml</tt> file)</h4>

<p>Gosh, wouldn't it be cool to have a way to store bits of information
that we use repeatedly throughout the book, like the ISBN, or the title?
And then it would be great to be able to reference them from within the
book source. That way we can change them once, in one place, rather than
having to go looking for them throughout the entire book.</p>

<p>We've provided a data structure for your book (in YAML) so you can
store these pieces of data in variables that you can call within your
source files.</p>

<p>Here's an example <tt>config/book.yml</tt> file with some Book
Variables:</p>

<pre># book.yml

isbn: 1234567891011

html:
  title: An HTML Title

pdf:
  title: A PDF Title
  pub_date: 12/13/2012

epub:
  title: A EPUB Title
  pub_date: 11/13/2012</pre>

<p>You can then use these Book Variables in your book source file:</p>

<pre>&lt;p&gt;The book isbn is &lt;%= @book.isbn %&gt;&lt;/p&gt;
&lt;p&gt;The html title is &lt;%= @book.html.title %&gt;&lt;/p&gt;
&lt;p&gt;The epub pub_date is &lt;%= @book.epub.pub_date %&gt;&lt;/p&gt;</pre>

<p>Note that you can also construct and/or nest variables however you want to:</p>

<pre># book.yml

my:
  madeup:
    friend:
      name: dave</pre>

<p>Then call it in your source file with the variable:</p>

<pre>&lt;p&gt;My made up friend's name is &lt;%= @book.my.madeup.friend.name %&gt;&lt;/p&gt;</pre>

<p>More info about YAML:</p>

<p><a href="http://en.wikipedia.org/wiki/YAML">en.wikipedia.org/wiki/YAML</a></p>

<h4>
<a name="user-content-mixing-it-up" class="anchor" href="#mixing-it-up" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mixing it up</h4>

<p>So, do you want to see something cool? Now that we have the Output Variable
and Book Variables, we can combine them to do nifty things, like:</p>

<pre>&lt;p&gt;The ISBN is &lt;%= @book.isbn %&gt;&lt;/p&gt;
&lt;p&gt;Title: 
  &lt;% if @output == :html %&gt;
    &lt;%= @book.html.title %&gt;
  &lt;% elsif @output == :pdf %&gt;
    &lt;%= @book.pdf.title %&gt;
  &lt;% elsif @output == :epub %&gt;
    &lt;%= @book.epub.title %&gt;
  &lt;% end %&gt;
&lt;/p&gt;</pre>

<p>Please explore other creative ways to structure and enhance your book
(we'd love to see how you are doing it).</p>

<h3>
<a name="user-content-building-your-first-book" class="anchor" href="#building-your-first-book" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building Your First Book</h3>

<p>Each time you build a new book format, the source .erb files in your
<b>book/</b> folder are built and copied to the build target folder. Then
the final book format is generated from those newly generated files. For
example, if you issue “bookshop build epub”, the .erb source files are
built and the resulting book.html and all the assets/ are saved to the
<b>builds/epub/</b> folder. Then the target epub book format is generated
from the <b>builds/epub</b> folder and saved back in the same folder.</p>

<p>The great thing about this is that you can easily view the resulting
book.html file in a browser to get a quick peak at the generated look and
feel.</p>

<p>To build an HTML format of your book from the ERB source:</p>

<pre>$ bookshop build html   # -&gt; find the output in builds/html/book.html</pre>

<p>To build a pdf format of your book from the ERB source:</p>

<pre>$ bookshop build pdf    # -&gt; find the output in builds/pdf/book.pdf</pre>

<p>To build an epub format of your book from the ERB source:</p>

<pre>$ bookshop build epub    # -&gt; find the output in builds/epub/book.pdf</pre>

<h4>
<a name="user-content-editing-your-pdf-document-options" class="anchor" href="#editing-your-pdf-document-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing your pdf document options</h4>

<p>We recommend consulting PrinceXML's documentation concerning PDF
options.</p>

<p><a href="http://www.princexml.com/doc/8.0">www.princexml.com/doc/8.0</a>/</p>

<h4>
<a name="user-content-editing-you-epub-document-and-options" class="anchor" href="#editing-you-epub-document-and-options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Editing you epub document and options</h4>

<p>We decided to keep away from a generator model for the epub, in favor of
allowing the developer to have full control of the epub file in all its
aspects. The build command for epub is merely to build the main html file
from the .erb source files and then to zip them up into the epub format.</p>

<p>There are two main files (besides your actual book source) you will need to
edit for the epub build are located in the <tt>book/epub/OEBPS</tt> folder:
content.opf (the Open Packaging Format) and the toc.ncx (the Navigation
file).</p>

<h5>
<a name="user-content-1-the-contentopf-file-is-the-file-which-contains-all-of-the-primary-information-about-your-epub-ebook-publisher-files-included-date-etc-" class="anchor" href="#1-the-contentopf-file-is-the-file-which-contains-all-of-the-primary-information-about-your-epub-ebook-publisher-files-included-date-etc-" aria-hidden="true"><span class="octicon octicon-link"></span></a>1. The <b>content.opf</b> file is the file which contains all of the primary information about your epub ebook (publisher, files included, date, etc.). </h5>

<p><a href="http://idpf.org/epub/20/spec/OPF_2.0.1_draft.htm">idpf.org/epub/20/spec/OPF_2.0.1_draft.htm</a>
- Specs on the .opf file</p>

<h5>
<a name="user-content-2-the-tocncx-file-is-the-file-which-contains-the-structural-tree-of-your-books-navigation" class="anchor" href="#2-the-tocncx-file-is-the-file-which-contains-the-structural-tree-of-your-books-navigation" aria-hidden="true"><span class="octicon octicon-link"></span></a>2. The toc.ncx file is the file which contains the structural tree of your book's navigation.</h5>

<p><a href="http://idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2">idpf.org/epub/20/spec/OPF_2.0.1_draft.htm#Section2.4.1.2</a>
- Specs on the .ncx file.</p>

<p>During the build process, the entire contents of the <tt>book/epub/</tt>
folder will be used, along with your book source files, to create your epub
book format. You can add or edit any of the files in that folder if you
like. Generally speaking, you will probably only ever edit the
content.opf.erb and the toc.ncx.erb files.</p>

<p><a href="http://idpf.org/epub/30">idpf.org/epub/30</a> - For an overview of
EPUB <a href="http://idpf.org/epub/30/spec/epub30-ocf.html">idpf.org/epub/30/spec/epub30-ocf.html</a>
- For the specs on the epub file structures and contents</p>

<p>We recommend consulting the EPUB documentation for specifics.</p>

<h2>
<a name="user-content-example-book" class="anchor" href="#example-book" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Book</h2>

<p>We've provided an example book for you already in the <tt>book/</tt>
folder. You can use this as an example of how to structure your book and to
use ERB, Book Variables, and Output Variables.</p>

<p>Simply create a new book:</p>

<pre>bookshop new name_of_book</pre>

<p>Then take a look at the example book in the <tt>book/</tt> folder.</p>

<p>You can then build the book into whatever format you like.</p>

<h2>
<a name="user-content-description-of-bookshop-app-contents" class="anchor" href="#description-of-bookshop-app-contents" aria-hidden="true"><span class="octicon octicon-link"></span></a>Description of bookshop app contents</h2>

<p>The default directory structure of a generated bookshop project:</p>

<pre>|-- book/                 # Source files for your book
    |--book.html.erb      # The master file
    |--frontmatter/       # Content at the front of the book (cover, title, preface, etc.)
    |--bodymatter/        # Main content of book (chapters, sections, etc.)
    |--backmatter/        # Content at the back of the book (appendix, index, etc.)
    |--assets/
        |--css/
            |--stylesheet.css
        |--images/
        |--js/
    |--epub/              # epub specific files and contents
        |--META-INF/
        |--mimetype
        |--OEBPS/
            |--content.opf.erb
            |--toc.ncx.erb

|-- builds/               # All the builds are created here
    |--epub/
    |--html/
    |--mobi/
    |--pdf/

|-- config/               # Your config and data settings
    |--book.yml           # Settings/Data for your book</pre>

<p>book</p>

<pre>Holds all the manuscript html code/files. This is where your master manuscript lives from which everything is built.</pre>

<p>builds</p>

<pre>Holds all the output files built from the html</pre>

<p>builds/epub</p>

<pre>When building the epub, the generated output will reside here in an .epub file. You can rename the .epub extension to .zip then unzip the file to view the contents.</pre>

<p>build/mobi</p>

<pre>When building the mobi asset, the generated output will reside here as "book.mobi"</pre>

<p>build/pdf</p>

<pre>When building the pdf book, the generated output will reside here as "book.pdf"</pre>

<p>config</p>

<pre>application-wide variables and configurations will go here</pre>

<h2>
<a name="user-content-get-involved" class="anchor" href="#get-involved" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Involved</h2>
<ol>
<li>
<p>Fork the repository.</p>
</li>
<li>
<p>Pick an issue (or feature you want to add).</p>
</li>
<li>
<p>Make changes to your forked code.</p>
</li>
<li>
<p>Add tests so that we don't accidentally break your addition with our
future commits.</p>
</li>
<li>
<p>Commit to your git (forked) repository.</p>
</li>
<li>
<p>Let us know about your code and we'll review/merge it into the master.</p>
</li>
<li>
<p>And pat yourself on the back for contributing to an open source project!!</p>
</li>
</ol><p></p>

<h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Copyright (C) 2011, 2012 by BlueHead Publishing, Inc (<a href="http://blueheadpublishing.com">blueheadpublishing.com</a>)</p>

<p>Bookshop is available under either The “New” BSD License or The MIT License</p>

<p>Please see the LICENSE file for further information</p>

<h2>
<a name="user-content-thanks" class="anchor" href="#thanks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Thanks</h2>

<p>We would like to thank:</p>
<ul>
<li>
<p>The Ruby/Rubygems Team <a href="http://www.ruby-lang.org">www.ruby-lang.org</a>/</p>
</li>
<li>
<p>The Thor Team - <a href="https://github.com/wycats/thor">github.com/wycats/thor</a></p>
</li>
<li>
<p>Hakon Wium Lie and Bert Bos for developing the book microformat <a href="http://www.alistapart.com/articles/boom">www.alistapart.com/articles/boom</a></p>
</li>
<li>
<p>The PrinceXML Team - <a href="http://www.princexml.com/company">www.princexml.com/company</a>/</p>
</li>
</ul><p>A List of Our Contributors: <a href="https://github.com/blueheadpublishing/bookshop/blob/master/CONTRIBUTORS.md">github.com/blueheadpublishing/bookshop/blob/master/CONTRIBUTORS.md</a></p></article></div>
<div class="announce instapaper_body md" data-path="README.md" id="readme"><article class="markdown-body entry-content" itemprop="mainContentOfPage"><h1>
<a name="user-content-welcome-to-historyjs--v18b2-june-22-2013" class="anchor" href="#welcome-to-historyjs--v18b2-june-22-2013" aria-hidden="true"><span class="octicon octicon-link"></span></a>Welcome to History.js <br> v1.8b2, June 22 2013</h1>

<p><a href="https://flattr.com/submit/auto?user_id=balupton&amp;url=https://github.com/browserstate/history.js&amp;title=History.js&amp;language=&amp;tags=github&amp;category=software"><img src="https://camo.githubusercontent.com/739a757846f69c1cc10163619eec008e871b591b/687474703a2f2f6170692e666c617474722e636f6d2f627574746f6e2f666c617474722d62616467652d6c617267652e706e67" alt="Flattr this project" data-canonical-src="http://api.flattr.com/button/flattr-badge-large.png" style="max-width:100%;"></a></p>

<h2>
<a name="user-content-news" class="anchor" href="#news" aria-hidden="true"><span class="octicon octicon-link"></span></a>News</h2>

<ul class="task-list">
<li>22/06/2013: Beta 2 of v1.8 is released. Fixes and uncompressed bundled files.</li>
<li>31/05/2013: Beta 1 of v1.8 is released. Fixes.</li>
<li>14/02/2013: Alpha 4 of v1.8 is released. Fixes.</li>
<li>05/02/2013: Alpha 3 of v1.8 is released. Tests updated.</li>
<li>21/01/2013: Alpha 2 of v1.8 is released. Correct statechange behaviour.</li>
<li>19/01/2013: Alpha 1 of v1.8 is released. Started to categorize old balupton's issues.</li>
</ul><h3>
<a name="user-content-history" class="anchor" href="#history" aria-hidden="true"><span class="octicon octicon-link"></span></a>History</h3>

<p><a href="https://github.com/browserstate/history.js/blob/master/HISTORY.md#files">See the <code>HISTORY.md</code> file for a detailed list of features, changes, solved issues and bugs</a></p>

<h3>
<a name="user-content-involve" class="anchor" href="#involve" aria-hidden="true"><span class="octicon octicon-link"></span></a>Involve</h3>

<p>Please create an issue if something doesn't work or if there is a browser specific bug. I'll try to fix it as soon as possible. Please send me your Pull requests if you have a nice solution! I'm also going to review old issues in balupton's repository and try to solve them too.</p>

<h2>
<a name="user-content-aims" class="anchor" href="#aims" aria-hidden="true"><span class="octicon octicon-link"></span></a>Aims</h2>

<ul class="task-list">
<li>Follow the <a href="https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history">HTML5 History API</a> as much as possible</li>
<li>Provide a cross-compatible experience for all HTML5 Browsers (they all implement the HTML5 History API a little bit differently causing different behaviours and sometimes bugs - History.js fixes this ensuring the experience is as expected / the same / great throughout the HTML5 browsers)</li>
<li>Provide a backwards-compatible experience for all HTML4 Browsers using a hash-fallback (including continued support for the HTML5 History API's <code>data</code>, <code>title</code>, <code>pushState</code> and <code>replaceState</code>) with the option to <a href="https://github.com/browserstate/history.js/wiki/Intelligent-State-Handling">remove HTML4 support if it is not right for your application</a>
</li>
<li>Provide a forwards-compatible experience for HTML4 States to HTML5 States (so if a hash-fallbacked url is accessed by a HTML5 browser it is naturally transformed into its non-hashed url equivalent)</li>
<li>Provide support for as many javascript frameworks as possible via adapters; especially <a href="http://dojotoolkit.org/">Dojo</a>, <a href="http://www.sencha.com/">ExtJS</a>, <a href="http://jquery.com/">jQuery</a>, <a href="http://mootools.net/">MooTools</a>, <a href="http://rightjs.org/">Right.js</a> and <a href="http://zeptojs.com/">Zepto</a>.</li>
</ul><h2>
<a name="user-content-quick-install" class="anchor" href="#quick-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick Install</h2>

<h3>
<a name="user-content-via-ajaxify-script" class="anchor" href="#via-ajaxify-script" aria-hidden="true"><span class="octicon octicon-link"></span></a>Via Ajaxify Script</h3>

<p>To ajaxify your entire website with the HTML5 History API, History.js and jQuery the <a href="https://github.com/browserstate/ajaxify">Ajaxify script</a> is all you need. It's that easy.</p>

<h3>
<a name="user-content-via-ajaxify-extension" class="anchor" href="#via-ajaxify-extension" aria-hidden="true"><span class="octicon octicon-link"></span></a>Via Ajaxify Extension</h3>

<p>If you don't have access to your server, or just want to try out the Ajaxify script first, you can install the <a href="https://github.com/browserstate/historyjsit.crx">History.js It! Google Chrome Extension</a> to try out History.js via Ajaxify on select websites without actually installing History.js/Ajaxify on your server.</p>

<h3>
<a name="user-content-via-ruby-on-rails-gem" class="anchor" href="#via-ruby-on-rails-gem" aria-hidden="true"><span class="octicon octicon-link"></span></a>Via Ruby On Rails Gem</h3>

<p>If you are using Rails, then the easiest way for you to try History.js would be to use <a href="https://github.com/igor-alexandrov/wiselinks">Wiselinks</a> gem. Wiselinks integrates  into Rails application and allows you to start using History.js with three lines of code.</p>

<h2>
<a name="user-content-direct-install" class="anchor" href="#direct-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>Direct Install</h2>

<h3>
<a name="user-content-working-with-historyjs-directly" class="anchor" href="#working-with-historyjs-directly" aria-hidden="true"><span class="octicon octicon-link"></span></a>Working with History.js directly</h3>

<div class="highlight highlight-javascript"><pre><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="kc">undefined</span><span class="p">){</span>

    <span class="c1">// Bind to StateChange Event</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">Adapter</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="nb">window</span><span class="p">,</span><span class="s1">'statechange'</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span> <span class="c1">// Note: We are using statechange instead of popstate</span>
        <span class="kd">var</span> <span class="nx">State</span> <span class="o">=</span> <span class="nx">History</span><span class="p">.</span><span class="nx">getState</span><span class="p">();</span> <span class="c1">// Note: We are using History.getState() instead of event.state</span>
    <span class="p">});</span>

    <span class="c1">// Change our States</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">pushState</span><span class="p">({</span><span class="nx">state</span><span class="o">:</span><span class="mi">1</span><span class="p">},</span> <span class="s2">"State 1"</span><span class="p">,</span> <span class="s2">"?state=1"</span><span class="p">);</span> <span class="c1">// logs {state:1}, "State 1", "?state=1"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">pushState</span><span class="p">({</span><span class="nx">state</span><span class="o">:</span><span class="mi">2</span><span class="p">},</span> <span class="s2">"State 2"</span><span class="p">,</span> <span class="s2">"?state=2"</span><span class="p">);</span> <span class="c1">// logs {state:2}, "State 2", "?state=2"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">replaceState</span><span class="p">({</span><span class="nx">state</span><span class="o">:</span><span class="mi">3</span><span class="p">},</span> <span class="s2">"State 3"</span><span class="p">,</span> <span class="s2">"?state=3"</span><span class="p">);</span> <span class="c1">// logs {state:3}, "State 3", "?state=3"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">pushState</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s2">"?state=4"</span><span class="p">);</span> <span class="c1">// logs {}, '', "?state=4"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span> <span class="c1">// logs {state:3}, "State 3", "?state=3"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span> <span class="c1">// logs {state:1}, "State 1", "?state=1"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">back</span><span class="p">();</span> <span class="c1">// logs {}, "Home Page", "?"</span>
    <span class="nx">History</span><span class="p">.</span><span class="nx">go</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// logs {state:3}, "State 3", "?state=3"</span>

<span class="p">})(</span><span class="nb">window</span><span class="p">);</span>
</pre></div>

<h3>
<a name="user-content-how-would-the-above-operations-look-in-a-html5-browser" class="anchor" href="#how-would-the-above-operations-look-in-a-html5-browser" aria-hidden="true"><span class="octicon octicon-link"></span></a>How would the above operations look in a HTML5 Browser?</h3>

<ol class="task-list">
<li><a href="http://www.mysite.com">www.mysite.com</a></li>
<li><a href="http://www.mysite.com/?state=1">www.mysite.com/?state=1</a></li>
<li><a href="http://www.mysite.com/?state=2">www.mysite.com/?state=2</a></li>
<li><a href="http://www.mysite.com/?state=3">www.mysite.com/?state=3</a></li>
<li><a href="http://www.mysite.com/?state=4">www.mysite.com/?state=4</a></li>
<li><a href="http://www.mysite.com/?state=3">www.mysite.com/?state=3</a></li>
<li><a href="http://www.mysite.com/?state=1">www.mysite.com/?state=1</a></li>
<li><a href="http://www.mysite.com">www.mysite.com</a></li>
<li><a href="http://www.mysite.com/?state=3">www.mysite.com/?state=3</a></li>
</ol><blockquote>
<p>Note: These urls also work in HTML4 browsers and Search Engines. So no need for the hashbang (<code>#!</code>) fragment-identifier that google <a href="https://github.com/browserstate/history.js/wiki/Intelligent-State-Handling">"recommends"</a>.</p>
</blockquote>

<h3>
<a name="user-content-how-would-they-look-in-a-html4-browser" class="anchor" href="#how-would-they-look-in-a-html4-browser" aria-hidden="true"><span class="octicon octicon-link"></span></a>How would they look in a HTML4 Browser?</h3>

<ol class="task-list">
<li><a href="http://www.mysite.com">www.mysite.com</a></li>
<li><a href="http://www.mysite.com/#?state=1&amp;_suid=1">www.mysite.com/#?state=1&amp;_suid=1</a></li>
<li><a href="http://www.mysite.com/#?state=2&amp;_suid=2">www.mysite.com/#?state=2&amp;_suid=2</a></li>
<li><a href="http://www.mysite.com/#?state=3&amp;_suid=3">www.mysite.com/#?state=3&amp;_suid=3</a></li>
<li><a href="http://www.mysite.com/#?state=4">www.mysite.com/#?state=4</a></li>
<li><a href="http://www.mysite.com/#?state=3&amp;_suid=3">www.mysite.com/#?state=3&amp;_suid=3</a></li>
<li><a href="http://www.mysite.com/#?state=1&amp;_suid=1">www.mysite.com/#?state=1&amp;_suid=1</a></li>
<li><a href="http://www.mysite.com">www.mysite.com</a></li>
<li><a href="http://www.mysite.com/#?state=3&amp;_suid=3">www.mysite.com/#?state=3&amp;_suid=3</a></li>
</ol><blockquote>
<p>Note 1: These urls also work in HTML5 browsers - we use <code>replaceState</code> to transform these HTML4 states into their HTML5 equivalents so the user won't even notice :-)</p>

<p>Note 2: These urls will be automatically url-encoded in IE6 to prevent certain browser-specific bugs.</p>

<p>Note 3: Support for HTML4 browsers (this hash fallback) is optional <a href="https://github.com/browserstate/history.js/wiki/Intelligent-State-Handling">- why supporting HTML4 browsers could be either good or bad based on my app's use cases</a></p>
</blockquote>

<h3>
<a name="user-content-whats-the-deal-with-the-suids-used-in-the-html4-states" class="anchor" href="#whats-the-deal-with-the-suids-used-in-the-html4-states" aria-hidden="true"><span class="octicon octicon-link"></span></a>What's the deal with the SUIDs used in the HTML4 States?</h3>

<ul class="task-list">
<li>SUIDs (State Unique Identifiers) are used when we utilise a <code>title</code> and/or <code>data</code> in our state. Adding a SUID allows us to associate particular states with data and titles while keeping the urls as simple as possible (don't worry it's all tested, working and a lot smarter than I'm making it out to be).</li>
<li>If you aren't utilising <code>title</code> or <code>data</code> then we don't even include a SUID (as there is no need for it) - as seen by State 4 above :-)</li>
<li>We also shrink the urls to make sure that the smallest url will be used. For instance we will adjust <code>http://www.mysite.com/#http://www.mysite.com/projects/History.js</code> to become <code>http://www.mysite.com/#/projects/History.js</code> automatically. (again tested, working, and smarter).</li>
<li>It works with domains, subdomains, subdirectories, whatever - doesn't matter where you put it. It's smart.</li>
<li>Safari 5 will also have a SUID appended to the URL, it is entirely transparent but just a visible side-effect. It is required to fix a bug with Safari 5.</li>
</ul><h3>
<a name="user-content-is-there-a-working-demo" class="anchor" href="#is-there-a-working-demo" aria-hidden="true"><span class="octicon octicon-link"></span></a>Is there a working demo?</h3>

<ul class="task-list">
<li>Sure is, give it a download and navigate to the demo directory in your browser :-)</li>
<li>If you are after something a bit more adventurous than a end-user demo, open up the tests directory in your browser and editor - it'll rock your world and show all the vast use cases that History.js supports.</li>
</ul><h2>
<a name="user-content-download--installation" class="anchor" href="#download--installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Download &amp; Installation</h2>

<ul class="task-list">
<li><p>Download History.js and upload it to your webserver. Download links: <a href="https://github.com/browserstate/history.js/tarball/master">tar.gz</a> or <a href="https://github.com/browserstate/history.js/zipball/master">zip</a></p></li>
<li>
<p>Include History.js</p>

<ul class="task-list">
<li>
<p>For <a href="http://dojotoolkit.org/">Dojo</a> v1.8+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/dojo.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For <a href="http://www.sencha.com/">ExtJs</a> v1.8+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/extjs.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For <a href="http://jquery.com/">jQuery</a> v1.3+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/jquery.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For <a href="http://mootools.net/">Mootools</a> v1.3+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/mootools.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For <a href="http://rightjs.org/">Right.js</a> v2.2+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/right.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For <a href="http://zeptojs.com/">Zepto</a> v0.5+</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/zepto.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
<li>
<p>For everything else</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://www.yourwebsite.com/history.js/scripts/bundled/html4+html5/native.history.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre></div>
</li>
</ul>
</li>
</ul><blockquote>
<p>Note: If you want to only support HTML5 Browsers and not HTML4 Browsers (so no hash fallback support) then just change the <code>/html4+html5/</code> part in the urls to just <code>/html5/</code>. See <a href="https://github.com/browserstate/history.js/wiki/Intelligent-State-Handling">Why supporting HTML4 browsers could be either good or bad based on my app's use cases</a></p>
</blockquote>

<h2>
<a name="user-content-get-updates" class="anchor" href="#get-updates" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Updates</h2>

<ul class="task-list">
<li>For Commit RSS/Atom Updates:

<ul class="task-list">
<li>You can subscribe via the <a href="http://feeds.feedburner.com/historyjs">GitHub Commit Atom Feed</a>
</li>
</ul>
</li>
<li>For GitHub News Feed Updates:

<ul class="task-list">
<li>You can click the "watch" button up the top right of History.js's <a href="https://github.com/browserstate/history.js">GitHub Project Page</a>
</li>
</ul>
</li>
</ul><h2>
<a name="user-content-get-support" class="anchor" href="#get-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Get Support</h2>

<ul class="task-list">
<li><p>History.js is maintained by people like you. If you find a bug, report it to the <a href="https://github.com/browserstate/history.js/issues">GitHub Issue Tracker</a>. If you've fixed a bug submit a <a href="https://github.com/browserstate/history.js/pulls">Pull Request</a> and add your fork to the <a href="https://github.com/browserstate/history.js/wiki/Network">Network Wiki Page</a>.</p></li>
<li><p>If you would like paid support and trainings, or have job offers, then refer to the <a href="https://github.com/browserstate/history.js/wiki/Network">Network Wiki Page</a>. If you are qualified with History.js, then be sure to add your details to that page too.</p></li>
<li><p>If your company uses History.js on your projects, and would like to see it grow and prosper (better documentation, bugfixes, upgrades, maintenance, etc.) and would love to become a corporate sponsor then do email <a href="mailto:sponsor@bevry.me">sponsor@bevry.me</a></p></li>
<li><p>If you would like free support for History.js, then <a href="http://stackoverflow.com/questions/ask">post your question</a> on <a href="http://stackoverflow.com/about">Stackoverflow</a> and be sure to use the <code>history.js</code> tag when asking your question.</p></li>
<li><p>If you've created a website that uses History.js, or know of one, be sure to add it to the <a href="https://github.com/browserstate/history.js/wiki/Showcase">Showcase Wiki Page</a>.</p></li>
<li><p>If you'd love to +1 or like this project, then be sure to tweet about it and click the "watch" button up the top of its <a href="https://github.com/browserstate/history.js">Project Page</a>.</p></li>
<li><p>For anything else, refer to the <a href="https://github.com/browserstate/history.js/wiki">History.js GitHub Wiki Site</a>.</p></li>
</ul><p>Thanks! every bit of help really does make a difference!</p>

<h2>
<a name="user-content-browsers-tested-and-working-in" class="anchor" href="#browsers-tested-and-working-in" aria-hidden="true"><span class="octicon octicon-link"></span></a>Browsers: Tested and Working In</h2>

<h3>
<a name="user-content-html5-browsers" class="anchor" href="#html5-browsers" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTML5 Browsers</h3>

<ul class="task-list">
<li>Firefox 4+</li>
<li>Chrome 8+</li>
<li>Opera 11.5+</li>
<li>Safari 5.0+</li>
<li>Safari iOS 4.3+</li>
</ul><h3>
<a name="user-content-html4-browsers" class="anchor" href="#html4-browsers" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTML4 Browsers</h3>

<ul class="task-list">
<li>IE 6, 7, 8, 9, (10)</li>
<li>Firefox 3</li>
<li>Opera 10, 11.0</li>
<li>Safari 4</li>
<li>Safari iOS 4.2, 4.1, 4.0, 3.2</li>
</ul><h2>
<a name="user-content-exposed-api" class="anchor" href="#exposed-api" aria-hidden="true"><span class="octicon octicon-link"></span></a>Exposed API</h2>

<h3>
<a name="user-content-functions" class="anchor" href="#functions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Functions</h3>

<h4>
<a name="user-content-states" class="anchor" href="#states" aria-hidden="true"><span class="octicon octicon-link"></span></a>States</h4>

<ul class="task-list">
<li>
<code>History.pushState(data,title,url)</code> <br> Pushes a new state to the browser; <code>data</code> can be null or an object, <code>title</code> can be null or a string, <code>url</code> must be a string</li>
<li>
<code>History.replaceState(data,title,url)</code> <br> Replaces the existing state with a new state to the browser; <code>data</code> can be null or an object, <code>title</code> can be null or a string, <code>url</code> must be a string</li>
<li>
<code>History.getState()</code> <br> Gets the current state of the browser, returns an object with <code>data</code>, <code>title</code> and <code>url</code>
</li>
<li>
<code>History.getStateByIndex</code> <br> Gets a state by the index</li>
<li>
<code>History.getCurrentIndex</code> <br> Gets the current index</li>
<li>
<code>History.getHash()</code> <br> Gets the current hash of the browser</li>
</ul><h4>
<a name="user-content-adapter" class="anchor" href="#adapter" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adapter</h4>

<ul class="task-list">
<li>
<code>History.Adapter.bind(element,event,callback)</code> <br> A framework independent event binder, you may either use this or your framework's native event binder.</li>
<li>
<code>History.Adapter.trigger(element,event)</code> <br> A framework independent event trigger, you may either use this or your framework's native event trigger.</li>
<li>
<code>History.Adapter.onDomLoad(callback)</code> <br> A framework independent onDomLoad binder, you may either use this or your framework's native onDomLoad binder.</li>
</ul><h4>
<a name="user-content-navigation" class="anchor" href="#navigation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Navigation</h4>

<ul class="task-list">
<li>
<code>History.back()</code> <br> Go back once through the history (same as hitting the browser's back button)</li>
<li>
<code>History.forward()</code> <br> Go forward once through the history (same as hitting the browser's forward button)</li>
<li>
<code>History.go(X)</code> <br> If X is negative go back through history X times, if X is positive go forwards through history X times</li>
</ul><h4>
<a name="user-content-debug" class="anchor" href="#debug" aria-hidden="true"><span class="octicon octicon-link"></span></a>Debug</h4>

<ul class="task-list">
<li>
<code>History.log(...)</code> <br> Logs messages to the console, the log element, and fallbacks to alert if neither of those two exist</li>
<li>
<code>History.debug(...)</code> <br> Same as <code>History.log</code> but only runs if <code>History.options.debug === true</code>
</li>
</ul><h3>
<a name="user-content-options" class="anchor" href="#options" aria-hidden="true"><span class="octicon octicon-link"></span></a>Options</h3>

<ul class="task-list">
<li>
<code>History.options.hashChangeInterval</code> <br> How long should the interval be before hashchange checks</li>
<li>
<code>History.options.safariPollInterval</code> <br> How long should the interval be before safari poll checks</li>
<li>
<code>History.options.doubleCheckInterval</code> <br> How long should the interval be before we perform a double check</li>
<li>
<code>History.options.disableSuid</code> <br> Force History not to append suid</li>
<li>
<code>History.options.storeInterval</code> <br> How long should we wait between store calls</li>
<li>
<code>History.options.busyDelay</code> <br> How long should we wait between busy events</li>
<li>
<code>History.options.debug</code> <br> If true will enable debug messages to be logged</li>
<li>
<code>History.options.initialTitle</code> <br> What is the title of the initial state</li>
<li>
<code>History.options.html4Mode</code> <br> If true, will force HTMl4 mode (hashtags)</li>
<li>
<code>History.options.delayInit</code> <br> Want to override default options and call init manually.</li>
</ul><h3>
<a name="user-content-events" class="anchor" href="#events" aria-hidden="true"><span class="octicon octicon-link"></span></a>Events</h3>

<ul class="task-list">
<li>
<code>window.onstatechange</code> <br> Fired when the state of the page changes (does not include hash changes)</li>
<li>
<code>window.onanchorchange</code> <br> Fired when the anchor of the page changes (does not include state hashes)</li>
</ul><h2>
<a name="user-content-known-issues" class="anchor" href="#known-issues" aria-hidden="true"><span class="octicon octicon-link"></span></a>Known Issues</h2>

<ul class="task-list">
<li>Opera 11 fails to create history entries when under stressful loads (events fire perfectly, just the history events fail) - there is nothing we can do about this</li>
<li>Mercury iOS fails to apply url changes (hashes and HTML5 History API states) - there is nothing we can do about this</li>
</ul><h2>
<a name="user-content-notes-on-compatibility" class="anchor" href="#notes-on-compatibility" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes on Compatibility</h2>

<ul class="task-list">
<li>History.js <strong>solves</strong> the following browser bugs:

<ul class="task-list">
<li>HTML5 Browsers

<ul class="task-list">
<li>Chrome 8 sometimes does not contain the correct state data when traversing back to the initial state</li>
<li>Safari 5, Safari iOS 4 and Firefox 3 and 4 do not fire the <code>onhashchange</code> event when the page is loaded with a hash</li>
<li>Safari 5 and Safari iOS 4 do not fire the <code>onpopstate</code> event when the hash has changed unlike the other browsers</li>
<li>Safari 5 and Safari iOS 4 fail to return to the correct state once a hash is replaced by a <code>replaceState</code> call / <a href="https://bugs.webkit.org/show_bug.cgi?id=56249">bug report</a>
</li>
<li>Safari 5 and Safari iOS 4 sometimes fail to apply the state change under busy conditions / <a href="https://bugs.webkit.org/show_bug.cgi?id=42940">bug report</a>
</li>
<li>Google Chrome 8,9,10 and Firefox 4 prior to the RC will always fire <code>onpopstate</code> once the page has loaded / <a href="http://hacks.mozilla.org/2011/03/history-api-changes-in-firefox-4/">change recommendation</a>
</li>
<li>Safari iOS 4.0, 4.1, 4.2 have a working HTML5 History API - although the actual back buttons of the browsers do not work, therefore we treat them as HTML4 browsers</li>
<li>None of the HTML5 browsers actually utilise the <code>title</code> argument to the <code>pushState</code> and <code>replaceState</code> calls</li>
</ul>
</li>
<li>HTML4 Browsers

<ul class="task-list">
<li>Old browsers like MSIE 6,7 and Firefox 2 do not have a <code>onhashchange</code> event</li>
<li>MSIE 6 and 7 sometimes do not apply a hash even it was told to (requiring a second call to the apply function)</li>
<li>Non-Opera HTML4 browsers sometimes do not apply the hash when the hash is not <code>urlencoded</code>
</li>
</ul>
</li>
<li>All Browsers

<ul class="task-list">
<li>State data and titles do not persist once the site is left and then returned (includes page refreshes)</li>
<li>State titles are never applied to the <code>document.title</code>
</li>
</ul>
</li>
</ul>
</li>
<li>ReplaceState functionality is emulated in HTML4 browsers by discarding the replaced state, so when the discarded state is accessed it is skipped using the appropriate <code>History.back()</code> / <code>History.forward()</code> call</li>
<li>Data persistance and synchronisation works like so: Every second or so, the SUIDs and URLs of the states will synchronise between the store and the local session. When a new session opens a familiar state (via the SUID or the URL) and it is not found locally then it will attempt to load the last known stored state with that information.</li>
<li>URLs will be unescaped to the maximum, so for instance the URL <code>?key=a%20b%252c</code> will become <code>?key=a b c</code>. This is to ensure consistency between browser url encodings.</li>
<li>Changing the hash of the page causes <code>onpopstate</code> to fire (this is expected/standard functionality). To ensure correct compatibility between HTML5 and HTML4 browsers the following events have been created:

<ul class="task-list">
<li>
<code>window.onstatechange</code>: this is the same as the <code>onpopstate</code> event except it does not fire for traditional anchors</li>
<li>
<code>window.onanchorchange</code>: this is the same as the <code>onhashchange</code> event except it does not fire for states</li>
</ul>
</li>
</ul><h2>
<a name="user-content-license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<p>Licensed under the <a href="http://opensource.org/licenses/BSD-3-Clause">New BSD License</a>
<br>Copyright ©  2014+ <a href="http://bevry.me">Bevry Pty Ltd</a> <a href="mailto:us@bevry.me">us@bevry.me</a>
<br>Copyright ©  2011-2013 <a href="http://balupton.com">Benjamin Arthur Lupton</a> <a href="mailto:b@lupton.cc">b@lupton.cc</a></p>

<p>For support see the <a href="#get-support">Getting Support</a> section.</p></article></div>